1
00:00:00,001 --> 00:00:03,635
[MUSIC]

2
00:00:03,637 --> 00:00:06,938
Stanford University.

3
00:00:06,940 --> 00:00:10,975
Okay, well, welcome to lecture 7 of CS193P.

4
00:00:10,977 --> 00:00:13,243
This is the winter of 2015.

5
00:00:13,245 --> 00:00:15,078
And today,

6
00:00:15,080 --> 00:00:18,181
we are going to talk about multiple MVCs, all right?

7
00:00:18,183 --> 00:00:20,116
That includes split view controller,

8
00:00:20,118 --> 00:00:21,150
navigation controller.

9
00:00:21,152 --> 00:00:23,152
We talked about tab bar controller a little bit

10
00:00:23,154 --> 00:00:24,386
last time.

11
00:00:24,388 --> 00:00:26,921
We're also gonna talk about segues which is how we make

12
00:00:26,923 --> 00:00:31,826
all those multiple MVCs kind of transition to each other.

13
00:00:31,828 --> 00:00:34,595
And I have a big demo that shows it all off.

14
00:00:34,597 --> 00:00:36,997
And that after that demo I'll come back.

15
00:00:36,999 --> 00:00:41,134
We'll talk about popovers which are similar thing for

16
00:00:41,136 --> 00:00:43,836
having multiple MVCs but are not quite the same.

17
00:00:43,838 --> 00:00:45,171
So that's why I've kind of

18
00:00:45,172 --> 00:00:46,505
segregated them off to the end.

19
00:00:46,507 --> 00:00:48,440
And we'll have a demo about that.

20
00:00:49,643 --> 00:00:51,609
All right. So MVCs working together.

21
00:00:51,611 --> 00:00:54,912
These are the slide we saw at the end of last time.

22
00:00:54,914 --> 00:00:57,981
We're trying to build apps by taking our MVCs and combining

23
00:00:57,983 --> 00:01:01,585
them with tab bar, split view, and navigation controller.

24
00:01:01,587 --> 00:01:03,420
We talked about tab bar controller which is

25
00:01:03,422 --> 00:01:05,988
just simply four or five or however many

26
00:01:05,990 --> 00:01:09,792
MVCs all connected by just having this little tab bar so

27
00:01:09,794 --> 00:01:12,461
the bottom just picks which MVC you want to see.

28
00:01:12,463 --> 00:01:15,263
Each MVC by the way in the tab bar's completely independent.

29
00:01:15,265 --> 00:01:16,231
It runs on its own.

30
00:01:16,233 --> 00:01:18,099
It doesn't depend on the other ones.

31
00:01:18,101 --> 00:01:20,034
It actually might be kind of bad object on your

32
00:01:20,036 --> 00:01:22,436
programming really for them to depend on the other one.

33
00:01:22,438 --> 00:01:26,340
So, tab bars for peers that aren't really talking to each

34
00:01:26,342 --> 00:01:29,876
other they're just working together, they're related.

35
00:01:29,878 --> 00:01:31,444
Maybe they share a model and

36
00:01:31,446 --> 00:01:34,413
they're each having a different part of the model

37
00:01:34,415 --> 00:01:35,581
or whatever.

38
00:01:35,582 --> 00:01:36,748
And then we talked about split view controller,

39
00:01:36,751 --> 00:01:40,352
which only has two MVCs in it, a master, and a detail.

40
00:01:40,354 --> 00:01:41,953
We call them master and detail, by the way,

41
00:01:41,955 --> 00:01:45,123
because the master is usually the one determining what's in

42
00:01:45,125 --> 00:01:46,574
the detail.

43
00:01:46,575 --> 00:01:48,024
So the master is letting you view something,

44
00:01:48,027 --> 00:01:51,061
and then you're going to use the detail to see more detail

45
00:01:51,063 --> 00:01:53,096
about what you're doing in the master, okay?

46
00:01:53,098 --> 00:01:56,333
So that's why we call it master and detail.

47
00:01:56,335 --> 00:01:59,402
So we're going to pick up now with navigation controller.

48
00:01:59,404 --> 00:02:02,905
So navigation controller is just yet another MVC whose

49
00:02:02,907 --> 00:02:06,808
view is multiple of other MVCs and navigation controller can

50
00:02:06,810 --> 00:02:08,977
handle any number of other MVCs.

51
00:02:08,979 --> 00:02:10,278
Okay.

52
00:02:10,280 --> 00:02:13,814
And it puts them on screen, it shares the screen instead of

53
00:02:13,816 --> 00:02:16,550
just putting them side by side or putting them with the tabs,

54
00:02:16,552 --> 00:02:19,019
it puts them like a stack of cards.

55
00:02:19,021 --> 00:02:20,153
Okay?

56
00:02:20,154 --> 00:02:21,286
So NavigationController's basically stacking them

57
00:02:21,289 --> 00:02:23,089
like cards and you can only see the one on top.

58
00:02:24,292 --> 00:02:25,924
That's how NavigationController

59
00:02:25,926 --> 00:02:28,460
shares the small screen space between multiple MVCs.

60
00:02:28,462 --> 00:02:30,562
So it's gonna stack these MVCs up.

61
00:02:30,564 --> 00:02:32,897
So here's a NavigationController.

62
00:02:32,899 --> 00:02:34,532
And it's got an MVC in it.

63
00:02:34,534 --> 00:02:38,202
This is the All Settings MVC from your device.

64
00:02:38,204 --> 00:02:39,870
If you go look in your iPhone or

65
00:02:39,871 --> 00:02:41,537
whatever, you'll see the settings app looks like this.

66
00:02:41,540 --> 00:02:44,207
So this is just an MVC that's kind of the top level.

67
00:02:44,209 --> 00:02:48,044
Has all the settings accessible from here.

68
00:02:48,046 --> 00:02:52,781
Now the navigation controller is drawing only a little part

69
00:02:52,783 --> 00:02:56,418
of it's view here, which is that title bar.

70
00:02:56,420 --> 00:02:58,953
And the navigational controller will put the title

71
00:02:58,955 --> 00:03:01,556
there, and also you can have a couple of buttons up at

72
00:03:01,558 --> 00:03:04,492
the top and the navigational controller draws that part.

73
00:03:04,494 --> 00:03:05,826
The rest of it is totally drawn,

74
00:03:05,828 --> 00:03:09,396
and even underneath that title bar, totally drawn by

75
00:03:09,398 --> 00:03:12,666
whatever MVC is on top of this stack of cards.

76
00:03:12,668 --> 00:03:13,933
Okay, and right now the only thing on

77
00:03:13,935 --> 00:03:17,703
our stack of cards is this All Settings MVC.

78
00:03:17,705 --> 00:03:18,870
Now even though the contents of

79
00:03:18,872 --> 00:03:21,706
the top are drawn by the navigation controller, what

80
00:03:21,708 --> 00:03:26,344
the contents are is determined by the MVC that's showing.

81
00:03:26,346 --> 00:03:27,711
Okay? And that's done with this

82
00:03:27,713 --> 00:03:30,580
UIViewController property called navigationItem.

83
00:03:30,582 --> 00:03:32,048
So if you go look in the documentation for

84
00:03:32,050 --> 00:03:34,517
UIViewController you'll see this property navigationItem.

85
00:03:34,519 --> 00:03:38,721
If you click through to the type UINavigation item you'll

86
00:03:38,723 --> 00:03:40,789
see that it's got a lot of properties and

87
00:03:40,791 --> 00:03:44,692
they're like left button, right button, title.

88
00:03:44,694 --> 00:03:46,544
Things like that. So,

89
00:03:46,545 --> 00:03:48,395
the way the navigation controllers figures out

90
00:03:48,398 --> 00:03:51,598
what to put in the top bar is it asks whatever MVC is on

91
00:03:51,600 --> 00:03:53,100
top of the stack.

92
00:03:53,102 --> 00:03:55,902
So as you go to different MVCs being on this stack of

93
00:03:55,904 --> 00:03:58,204
cards that thing at the top will change.

94
00:03:59,306 --> 00:04:00,205
Okay?

95
00:04:00,207 --> 00:04:03,475
So, let's say I click on General here,

96
00:04:03,477 --> 00:04:05,076
because I want to see general settings.

97
00:04:05,078 --> 00:04:08,779
Okay, so I click on it, and a new MVC gets put on top of

98
00:04:08,781 --> 00:04:11,915
the stack of cards, so now I can't see the other one, okay?

99
00:04:11,917 --> 00:04:13,183
This new one is overlaying it,

100
00:04:13,185 --> 00:04:16,052
and this is just a general settings MVC.

101
00:04:16,054 --> 00:04:18,688
Completely different MVC,

102
00:04:18,689 --> 00:04:21,323
completely independent of the other one working on its own.

103
00:04:21,325 --> 00:04:22,658
By the way,

104
00:04:22,659 --> 00:04:23,992
I don't have a good screenshot of this unfortunately, but

105
00:04:23,994 --> 00:04:26,728
it's also possible for the navigation controller to

106
00:04:26,730 --> 00:04:30,732
draw some buttons along the bottom there.

107
00:04:30,734 --> 00:04:32,199
A little small sliver on the bottom.

108
00:04:32,201 --> 00:04:35,402
And it get those button items to put there,

109
00:04:35,404 --> 00:04:39,006
by asking the MVC that's on top of the stack of cards for

110
00:04:39,008 --> 00:04:41,675
the toolbar items property.

111
00:04:41,677 --> 00:04:42,875
So if you look at toolbar items,

112
00:04:42,877 --> 00:04:46,245
it's just an array of these bar buttons, so

113
00:04:46,247 --> 00:04:49,081
any MVC that returns anything in that array,

114
00:04:49,083 --> 00:04:51,149
when it's in a navigation controller like this,

115
00:04:51,151 --> 00:04:53,284
those buttons will appear at the bottom.

116
00:04:53,286 --> 00:04:54,719
So those would change each time you go

117
00:04:54,721 --> 00:04:57,321
to the next thing on the stack as well.

118
00:04:57,323 --> 00:04:59,923
So let's go ahead and click on something here.

119
00:05:00,926 --> 00:05:03,727
Let's click on, oh sorry, the back button.

120
00:05:03,729 --> 00:05:06,295
Yeah, you see there's a back button in the upper left.

121
00:05:06,297 --> 00:05:10,099
The back button says, Throw the top card off.

122
00:05:10,101 --> 00:05:11,266
That's basically what back means.

123
00:05:11,268 --> 00:05:13,251
Throw the top card on

124
00:05:13,252 --> 00:05:15,235
this stack of MVCs that we're building, throw it off, and

125
00:05:15,238 --> 00:05:17,005
then I'm going to go back to where I was before.

126
00:05:17,007 --> 00:05:18,673
So that's how back works, it just throws it off.

127
00:05:18,675 --> 00:05:20,574
And when it throws it off, it completely throws it off,

128
00:05:20,576 --> 00:05:21,808
it disappears.

129
00:05:21,810 --> 00:05:22,509
Completely gone.

130
00:05:22,511 --> 00:05:23,409
All right?

131
00:05:23,411 --> 00:05:26,178
Out of the heep, okay?

132
00:05:26,180 --> 00:05:29,014
All right, so let's put another card on the stacks,

133
00:05:29,016 --> 00:05:31,149
I'm going to click on accessibility here,

134
00:05:31,151 --> 00:05:33,351
another card's going to slide in,

135
00:05:33,353 --> 00:05:38,389
I'm trying to simulate the animation of it but in keynote

136
00:05:38,391 --> 00:05:41,291
I can't exactly do it, but it slides in from the side.

137
00:05:41,293 --> 00:05:43,710
And this is yet

138
00:05:43,711 --> 00:05:46,128
another completely different MVC, the accessibility MVC.

139
00:05:46,131 --> 00:05:47,464
And we can pick something out of here,

140
00:05:47,466 --> 00:05:50,066
like I'm going to pick larger text right there, and

141
00:05:50,068 --> 00:05:51,901
another MVC is going to slide in.

142
00:05:51,903 --> 00:05:54,536
So we have four MVCs, totally different MVCs,

143
00:05:54,538 --> 00:05:56,538
on our stack of cards right here.

144
00:05:56,540 --> 00:05:59,407
And the one on top, which is the last one that I chose,

145
00:05:59,409 --> 00:06:01,609
this larger text MVC, is showing.

146
00:06:01,611 --> 00:06:02,843
Okay? The rest of them are there,

147
00:06:02,845 --> 00:06:04,678
you just can't see

148
00:06:04,679 --> 00:06:06,512
them because they're underneath this top card.

149
00:06:06,515 --> 00:06:07,948
Okay, so now let's do the back button.

150
00:06:07,950 --> 00:06:11,351
So I'm going to click this back button in the upper left

151
00:06:11,353 --> 00:06:14,420
and when I do, it takes that larger text one off, throws it

152
00:06:14,422 --> 00:06:17,757
out, and now we've got the accessibility card, which is

153
00:06:17,759 --> 00:06:21,326
now the top of our stack which only has three things on it.

154
00:06:21,328 --> 00:06:22,694
And we can do back again.

155
00:06:22,696 --> 00:06:24,696
It goes back to the general one.

156
00:06:24,698 --> 00:06:25,563
We do back again.

157
00:06:25,565 --> 00:06:27,498
It goes back to the very top.

158
00:06:27,499 --> 00:06:29,432
Of course, once we get back to the very top there's no

159
00:06:29,435 --> 00:06:32,703
more back button because this is the only card on the stack.

160
00:06:32,705 --> 00:06:33,870
Okay, so everyone understand what

161
00:06:33,872 --> 00:06:34,804
a NavigationController is?

162
00:06:34,806 --> 00:06:36,239
It's just a stack of MVCs.

163
00:06:36,241 --> 00:06:37,373
All right?

164
00:06:37,375 --> 00:06:39,608
But it's just like split view controller and

165
00:06:39,610 --> 00:06:43,378
UITabBar Controller in that it is showing multiple MVCs.

166
00:06:43,380 --> 00:06:44,979
So I'm going talk a little bit about how navigation

167
00:06:44,981 --> 00:06:48,082
controller works internally, so you can get a feel for it.

168
00:06:48,084 --> 00:06:51,952
And I'm going to try to mix it with our MVC image that we

169
00:06:51,954 --> 00:06:55,222
had so you can kind of combine the two concepts in your mind.

170
00:06:55,224 --> 00:06:57,691
So, let's say I had an MVC.

171
00:06:57,693 --> 00:07:00,493
This one up here, the purple MVC thing.

172
00:07:00,495 --> 00:07:03,429
And I had more features I wanted to put on there, but

173
00:07:03,431 --> 00:07:05,431
there's just not enough room on the screen anymore,

174
00:07:05,433 --> 00:07:06,832
I've kind of maxed out.

175
00:07:06,834 --> 00:07:09,401
Or it's just those features don't logically make sense to

176
00:07:09,403 --> 00:07:11,102
be in the same place.

177
00:07:11,104 --> 00:07:14,305
Well, what I would do is create another MVC to manage

178
00:07:14,307 --> 00:07:17,308
those other features that won't fit,okay?

179
00:07:17,310 --> 00:07:21,712
And, so now though I need a way to have those two MVCs

180
00:07:21,714 --> 00:07:24,147
share the screen and I can use a split view controller or

181
00:07:24,149 --> 00:07:26,149
tab bar controller if they were peers or

182
00:07:26,151 --> 00:07:27,917
I could use navigation controller.

183
00:07:27,919 --> 00:07:29,284
So, let's see what it would look like to

184
00:07:29,286 --> 00:07:32,954
use a navigation controller to have these two MVCs which

185
00:07:32,956 --> 00:07:35,990
they're related share the screen.

186
00:07:35,992 --> 00:07:39,227
So a navigation controller is just an MVC, okay?

187
00:07:39,229 --> 00:07:41,813
It's a controller of an MVC.

188
00:07:41,814 --> 00:07:44,398
And it's view is a little rectangular area that usually

189
00:07:44,400 --> 00:07:46,934
fills the entire screen or a portion of the screen.

190
00:07:46,936 --> 00:07:47,868
It's got the title.

191
00:07:47,870 --> 00:07:52,005
But it's a special MVC and they've just got an outlet

192
00:07:52,007 --> 00:07:55,074
called Root View Controller that points to an MVC.

193
00:07:55,076 --> 00:07:58,444
[UUU] points to the controller of an MVC.

194
00:07:58,446 --> 00:08:02,247
And when it is pointing to that, then the navigation

195
00:08:02,249 --> 00:08:07,085
controller puts that MVC's view, okay, its view property.

196
00:08:07,087 --> 00:08:08,686
All right, we know that UIVController has

197
00:08:08,688 --> 00:08:10,321
this very important property called view,

198
00:08:10,323 --> 00:08:11,989
which is its top level of its view.

199
00:08:11,991 --> 00:08:15,525
It puts that on the screen underneath this title thing.

200
00:08:15,527 --> 00:08:17,861
So it fills the entire rectangular area and

201
00:08:17,863 --> 00:08:20,196
then the title kind of overlaps it transparently,

202
00:08:20,198 --> 00:08:24,066
semi-lucent transparency.

203
00:08:24,068 --> 00:08:24,733
Okay?

204
00:08:24,735 --> 00:08:25,867
So that's great.

205
00:08:25,869 --> 00:08:27,485
So we got it in there.

206
00:08:27,486 --> 00:08:29,102
Now how do we get the other MVC on?

207
00:08:29,105 --> 00:08:32,173
Well, when a ui element inside the view of

208
00:08:32,175 --> 00:08:34,975
this MVC like a button or something like that

209
00:08:34,977 --> 00:08:39,112
is pressed then it can cause another MVC to get created.

210
00:08:39,114 --> 00:08:41,014
You notice that MVC just appeared?

211
00:08:41,016 --> 00:08:42,314
It wasn't there before.

212
00:08:42,316 --> 00:08:45,084
But as soon as the button gets pressed in this guy's view,

213
00:08:45,086 --> 00:08:47,252
this MVC's view, that thing gets created.

214
00:08:47,254 --> 00:08:49,888
And that's something important to notice that we're always

215
00:08:49,890 --> 00:08:53,358
going to be creating a new MVC when we do these transitions.

216
00:08:53,360 --> 00:08:55,526
Okay? Transitioning to a new card.

217
00:08:55,528 --> 00:08:57,061
In a split view,

218
00:08:57,062 --> 00:08:58,595
we do something in the master that changes the detail.

219
00:08:58,597 --> 00:08:59,896
That's always creating a new,

220
00:08:59,898 --> 00:09:02,165
even the first time we press a tab bar, but

221
00:09:02,167 --> 00:09:05,234
only the first time for the tab bar, it creates a new MVC.

222
00:09:05,236 --> 00:09:06,736
Okay? So it creates this new MVC.

223
00:09:06,738 --> 00:09:09,471
And then the NavigationController just

224
00:09:09,473 --> 00:09:12,274
moves over to put that MVC's view on top.

225
00:09:12,276 --> 00:09:14,009
All right?

226
00:09:14,011 --> 00:09:15,843
And then of course you've got the back button.

227
00:09:15,845 --> 00:09:17,311
When you click the back button,

228
00:09:17,313 --> 00:09:19,646
it goes back to the first MVC.

229
00:09:19,648 --> 00:09:21,581
And look what happens to that MVC.

230
00:09:21,583 --> 00:09:22,782
Gone.

231
00:09:22,784 --> 00:09:24,017
Okay.

232
00:09:24,019 --> 00:09:25,351
That is not hidden or something.

233
00:09:25,353 --> 00:09:27,220
It's just gone.

234
00:09:27,221 --> 00:09:29,088
It got de-allocated probably from the heat.

235
00:09:29,090 --> 00:09:30,389
Okay? And then we're back to here.

236
00:09:31,591 --> 00:09:33,358
Okay, so that's how navigation controller works.

237
00:09:33,360 --> 00:09:34,309
Very simple.

238
00:09:34,310 --> 00:09:35,259
And, you know, split view and

239
00:09:35,261 --> 00:09:37,427
tab bar are similar kind of mechanism.

240
00:09:38,697 --> 00:09:40,780
Okay. So

241
00:09:40,781 --> 00:09:42,864
how do we get at these sub-MVCs?

242
00:09:42,867 --> 00:09:44,967
So let's say I had a split view controller or

243
00:09:44,969 --> 00:09:46,535
a navigation controller or a tab bar controller.

244
00:09:46,537 --> 00:09:49,171
How do I get at the things on the stack of cards,

245
00:09:49,173 --> 00:09:51,973
or the two things the master and detail?

246
00:09:51,975 --> 00:09:53,842
And the answer is

247
00:09:53,843 --> 00:09:55,710
they all have a property called view controllers.

248
00:09:55,712 --> 00:09:57,878
And it's an array of view controller.

249
00:09:57,880 --> 00:09:59,497
Okay?

250
00:09:59,498 --> 00:10:01,115
And that it's all the view controllers in a system.

251
00:10:01,117 --> 00:10:04,117
So in a split view, there will be only two in there,

252
00:10:04,119 --> 00:10:06,553
the master and the detail, in the tab bar there will be how

253
00:10:06,555 --> 00:10:08,654
ever many tabs there are, in a navigation controller there

254
00:10:08,656 --> 00:10:10,723
will be however many cards are on the stack.

255
00:10:10,725 --> 00:10:12,057
That's how many things will be in that array.

256
00:10:12,059 --> 00:10:14,426
And it's settable too which is a little weird,

257
00:10:14,428 --> 00:10:18,096
we don't usually set things but you can do it.

258
00:10:18,098 --> 00:10:22,800
And the way we usually set it is we're going to

259
00:10:22,802 --> 00:10:25,602
do it in the story boards or navigation controller for

260
00:10:25,604 --> 00:10:28,305
example has methods like push and pop view controller that

261
00:10:28,307 --> 00:10:30,407
will push view controller onto the stack.

262
00:10:30,409 --> 00:10:31,641
But that is doing that in code and

263
00:10:31,643 --> 00:10:34,210
we are usually doing all of this stuff in story boards.

264
00:10:34,212 --> 00:10:37,913
So that's how you get at the sub things of

265
00:10:37,915 --> 00:10:40,749
these three kinds of view controllers.

266
00:10:40,751 --> 00:10:43,551
What about, how do I get a hold of the view controller?

267
00:10:43,553 --> 00:10:44,485
Okay? How do I get that

268
00:10:44,487 --> 00:10:45,553
navigation controller?

269
00:10:45,555 --> 00:10:47,621
How do I get a pointer to it, or whatever?

270
00:10:47,623 --> 00:10:51,425
Well it turns out every view controller knows if it's

271
00:10:51,427 --> 00:10:54,661
inside a navigation controller or if it's inside a split-view

272
00:10:54,663 --> 00:10:56,596
controller, or if it's inside a tab bar controller.

273
00:10:56,598 --> 00:10:58,314
It knows.

274
00:10:58,315 --> 00:11:00,031
And so UI view controller has these three properties: tab

275
00:11:00,034 --> 00:11:01,367
bar controller, split view controller,

276
00:11:01,369 --> 00:11:02,567
navigation controller.

277
00:11:02,569 --> 00:11:04,536
And they will return to you the split view

278
00:11:04,538 --> 00:11:06,471
controller that the view controller is in.

279
00:11:06,473 --> 00:11:08,039
Okay?

280
00:11:08,041 --> 00:11:10,074
If it's in one, if it's not then it returns nil.

281
00:11:10,076 --> 00:11:11,942
And notice some view controllers might be inside a

282
00:11:11,944 --> 00:11:14,511
navigation controller, inside a split view controller.

283
00:11:15,447 --> 00:11:16,779
So more than one of these things can be

284
00:11:16,781 --> 00:11:18,798
non-nil at a time.

285
00:11:18,799 --> 00:11:20,816
Because we can nest these things to build more powerful

286
00:11:20,818 --> 00:11:22,968
user interfaces.

287
00:11:22,969 --> 00:11:25,119
So let's just use the example, if I'm the master in

288
00:11:25,122 --> 00:11:27,722
a split view, and I want to get the detail.

289
00:11:27,724 --> 00:11:29,924
Well I can get the split view controller I'm in by

290
00:11:29,926 --> 00:11:31,392
saying split view controller.

291
00:11:31,394 --> 00:11:32,726
I'll put the little question mark there,

292
00:11:32,728 --> 00:11:33,860
that's optional chaining.

293
00:11:33,862 --> 00:11:35,011
If it's nil,

294
00:11:35,012 --> 00:11:36,161
then I'm obviously not going to get my detail.

295
00:11:36,164 --> 00:11:38,264
And then I'm going to say view controller sub 1,

296
00:11:38,266 --> 00:11:39,965
because we know that view controller sub 1 in

297
00:11:39,967 --> 00:11:42,101
split controller is the detail.

298
00:11:42,103 --> 00:11:43,836
So now I've got the detail and

299
00:11:43,837 --> 00:11:45,570
I can talk to it I could, you know, get to my detail.

300
00:11:45,572 --> 00:11:46,838
So presumably I might want to tell it to

301
00:11:46,840 --> 00:11:49,807
do things display things or whatever, okay?

302
00:11:51,010 --> 00:11:54,178
So that's how we get at these things in code if we need to,

303
00:11:54,180 --> 00:11:57,247
but we often don't need to because we can manage most of

304
00:11:57,249 --> 00:11:58,648
this in the story board.

305
00:11:58,650 --> 00:12:01,551
And so how do we wire this up, how do we create this

306
00:12:01,553 --> 00:12:04,720
relationship between these split through tab bar and

307
00:12:04,722 --> 00:12:07,923
navigation controller and these all the sub-MVCs.

308
00:12:07,925 --> 00:12:10,759
And it can be done in code, okay?

309
00:12:10,761 --> 00:12:11,893
But we're gonna do it

310
00:12:11,895 --> 00:12:14,395
in storyboards in this class all the time.

311
00:12:14,397 --> 00:12:16,197
Okay. And we're just

312
00:12:16,198 --> 00:12:17,998
gonna use Ctrl + drag to do it.

313
00:12:18,001 --> 00:12:19,500
So let's see what that looks like.

314
00:12:19,502 --> 00:12:21,635
I'll do it for split view controller,

315
00:12:21,637 --> 00:12:23,336
we're just going to go the utilities area,

316
00:12:23,338 --> 00:12:25,972
the same place we drag out a button or something like that.

317
00:12:25,974 --> 00:12:28,307
We're going to drag out a split view controller.

318
00:12:28,309 --> 00:12:29,608
Now, when it comes out,

319
00:12:29,610 --> 00:12:32,411
it's going to come out with a whole bunch of other MVCs

320
00:12:32,413 --> 00:12:34,913
pre-attached to it in attempt to help you, but

321
00:12:34,915 --> 00:12:37,281
usually you're just going to delete those so

322
00:12:37,283 --> 00:12:40,418
that all you have left is the split view controller itself.

323
00:12:40,420 --> 00:12:42,286
Okay?

324
00:12:42,287 --> 00:12:44,153
And then you're going to Ctrl+Drag from the split view

325
00:12:44,156 --> 00:12:45,722
controller to the master and

326
00:12:45,724 --> 00:12:49,125
Ctrl+Drag from the split view controller to the detail.

327
00:12:49,127 --> 00:12:50,159
And that's how you are going to do the wire.

328
00:12:50,161 --> 00:12:51,360
So this is what it looks like.

329
00:12:51,362 --> 00:12:52,628
Here I have a storyboard.

330
00:12:52,630 --> 00:12:54,129
I've dragged out of split view controller.

331
00:12:54,131 --> 00:12:55,997
That's that gray thing on the left.

332
00:12:55,999 --> 00:12:57,198
Okay?

333
00:12:57,199 --> 00:12:58,398
I deleted all the things it was attached to so

334
00:12:58,401 --> 00:12:59,367
I just had that.

335
00:12:59,369 --> 00:13:01,735
Then I Ctrl+Drag to,

336
00:13:01,737 --> 00:13:04,504
in this case my master, which is my calculator.

337
00:13:04,506 --> 00:13:07,407
When I do that, it's going to put up this little thing says

338
00:13:07,409 --> 00:13:09,142
okay, what kind of connection do you want to make?

339
00:13:09,144 --> 00:13:12,278
And you're going to pick master view controller there.

340
00:13:12,280 --> 00:13:14,546
And that's going to make like a little connection to it.

341
00:13:14,548 --> 00:13:17,282
And then I'm going to Ctrl+Drag down to my detail,

342
00:13:17,284 --> 00:13:19,984
which is going to be the right side of my split view.

343
00:13:19,986 --> 00:13:22,320
And here I'm going to choose I want Detailed View Controller.

344
00:13:22,322 --> 00:13:24,188
Okay?

345
00:13:24,190 --> 00:13:25,723
And then I'm going to have this,

346
00:13:25,725 --> 00:13:27,057
fully hooked up split view.

347
00:13:27,059 --> 00:13:28,091
And that's it.

348
00:13:28,093 --> 00:13:30,293
So it's very easy to hook these things up.

349
00:13:30,295 --> 00:13:31,578
All right, and tab bar,

350
00:13:31,579 --> 00:13:32,862
you can hook up exactly the same way.

351
00:13:32,864 --> 00:13:35,130
Connect as many of them as you want, okay?

352
00:13:35,132 --> 00:13:37,299
Navigation controllers can be done a little bit differently,

353
00:13:37,301 --> 00:13:38,733
which we'll see in a second, okay?

354
00:13:40,036 --> 00:13:44,138
But there's a problem here which is that a split view

355
00:13:44,140 --> 00:13:47,974
can't display side by side on an iPhone.

356
00:13:47,976 --> 00:13:49,909
Or at least not anything but an iPhone 6 plus.

357
00:13:49,911 --> 00:13:53,079
That's the only one big enough to really display side

358
00:13:53,081 --> 00:13:54,530
by side.

359
00:13:54,531 --> 00:13:55,980
So a split view really can't work on an iPhone.

360
00:13:55,983 --> 00:13:58,501
Okay?

361
00:13:58,502 --> 00:14:01,020
The way we handle this is that iOS adapts its

362
00:14:01,022 --> 00:14:06,224
user interface to whatever device it happens to be on,

363
00:14:06,226 --> 00:14:09,594
depending on how its size class is.

364
00:14:09,596 --> 00:14:12,930
We'll talk about size classes later, but if it's compact,

365
00:14:12,932 --> 00:14:16,733
like a phone, then it can't show it in a split view.

366
00:14:16,735 --> 00:14:18,301
So how can I show it then?

367
00:14:18,303 --> 00:14:20,036
If I have it master in a detail and

368
00:14:20,038 --> 00:14:23,039
I wanna show it on an iPhone the way I show it is with

369
00:14:23,041 --> 00:14:24,807
a navigation controller.

370
00:14:24,809 --> 00:14:25,941
So instead of having master and

371
00:14:25,943 --> 00:14:27,909
detail on the screen at the same time on an iPad,

372
00:14:27,911 --> 00:14:31,813
on the phone when I click in the master, same button that I

373
00:14:31,815 --> 00:14:34,615
clicked to make the detail show it in split view,

374
00:14:34,617 --> 00:14:37,418
but when I click in the master on the iPhone is going to

375
00:14:37,420 --> 00:14:40,153
slide the detail on as a card.

376
00:14:40,155 --> 00:14:40,987
On the deck.

377
00:14:40,989 --> 00:14:41,888
All right.

378
00:14:41,890 --> 00:14:43,856
On the navigation charts stack.

379
00:14:43,858 --> 00:14:45,457
Now the thing is though we want to

380
00:14:45,459 --> 00:14:47,659
build one storyboard that will work for

381
00:14:47,661 --> 00:14:50,829
both platforms and automatically adapts.

382
00:14:50,831 --> 00:14:51,963
So how do we do that?

383
00:14:51,965 --> 00:14:55,333
We're just going to wrap our master in

384
00:14:55,335 --> 00:14:57,735
a navigation controller.

385
00:14:57,737 --> 00:14:59,870
So here is a Navigation Controller,

386
00:14:59,872 --> 00:15:03,139
which is my master, it's the calculator, right?

387
00:15:03,141 --> 00:15:05,141
And you can see it's hooked up to the split view already, and

388
00:15:05,143 --> 00:15:07,710
I'm just gonna select it, and then I'm gonna go to

389
00:15:07,712 --> 00:15:12,814
the Editor menu and pick Embed in Navigation Controller.

390
00:15:12,816 --> 00:15:13,749
See that embed?

391
00:15:13,750 --> 00:15:14,683
And this is what's gonna happen.

392
00:15:16,886 --> 00:15:18,285
Okay, the Navigation Controller,

393
00:15:18,287 --> 00:15:22,856
is going to the interposed between the split view and

394
00:15:22,858 --> 00:15:24,424
the master.

395
00:15:24,425 --> 00:15:25,991
So now the master, is in a Navigation Controller.

396
00:15:26,995 --> 00:15:30,196
Now if I am on an iPhone, and I click in something

397
00:15:30,198 --> 00:15:33,265
that would change the detail, then it's going to push it

398
00:15:33,267 --> 00:15:36,601
on that Navigation Controller, on top of the stack.

399
00:15:36,603 --> 00:15:38,336
But if I am on an iPad it's going to

400
00:15:38,338 --> 00:15:39,937
show them side by side.

401
00:15:39,939 --> 00:15:41,472
So this structure that you see right here,

402
00:15:41,474 --> 00:15:43,073
split view, navigation control for

403
00:15:43,075 --> 00:15:46,743
the master and then detail is very common.

404
00:15:46,745 --> 00:15:49,479
A universal way of specifying your UI so

405
00:15:49,481 --> 00:15:51,380
it works on both, okay?

406
00:15:53,451 --> 00:15:56,351
Now we can also put the detail inside of

407
00:15:56,353 --> 00:15:59,054
a Navigational Controller too, why would we want to do that?

408
00:15:59,056 --> 00:16:00,488
Well the only reason we would wanna do that,

409
00:16:00,490 --> 00:16:02,657
is cuz maybe we want

410
00:16:02,658 --> 00:16:04,825
the Navigation Controller's feature of a title, right?

411
00:16:04,827 --> 00:16:07,061
Or little buttons we wanna put at the top.

412
00:16:07,063 --> 00:16:08,562
It's really nice for that.

413
00:16:08,564 --> 00:16:09,880
But, we don't need

414
00:16:09,881 --> 00:16:11,197
a Navigation Controller down there for navigation,

415
00:16:11,199 --> 00:16:13,533
because we are never navigating from the detail.

416
00:16:13,535 --> 00:16:16,168
We only navigate to the detail.

417
00:16:16,170 --> 00:16:19,338
So, it doesn't, itself, need to be in its own

418
00:16:19,340 --> 00:16:21,907
Navigation Controller, and we'll see that in the demo.

419
00:16:21,909 --> 00:16:24,542
All right, so that's how we wire these things up.

420
00:16:24,544 --> 00:16:26,344
Okay, and they end up looking like that.

421
00:16:27,347 --> 00:16:30,981
Now how do we make these things appear?

422
00:16:30,983 --> 00:16:33,750
How do we make changes in our master,

423
00:16:33,752 --> 00:16:36,019
that cause something to appear in the detail.

424
00:16:36,021 --> 00:16:38,254
Or if we have a Navigational Controller that has multiple

425
00:16:38,256 --> 00:16:40,923
cards, when we clicked all those buttons and another card

426
00:16:40,925 --> 00:16:44,827
kept coming on in the stack, how did we do that, okay?

427
00:16:44,829 --> 00:16:47,796
And the answer is we use segues, okay?

428
00:16:47,798 --> 00:16:52,233
So segues is, how these things transition from

429
00:16:52,235 --> 00:16:53,567
view controller to view controller.

430
00:16:54,970 --> 00:16:56,503
There's really four kinds of segues.

431
00:16:56,505 --> 00:16:57,737
There are custom segues, too, but

432
00:16:57,739 --> 00:16:59,205
we're not gonna talk about that in this class,

433
00:16:59,207 --> 00:17:01,073
kind of advanced, you almost never need those.

434
00:17:02,143 --> 00:17:03,875
So there's four basic segues.

435
00:17:03,877 --> 00:17:06,211
There's show segue, okay?

436
00:17:06,213 --> 00:17:10,648
Which basically shows the MVC that you're talking about, and

437
00:17:10,650 --> 00:17:13,217
if you're a Navigation Controller, it will show it

438
00:17:13,219 --> 00:17:15,886
on the, it'll put it on top of the stack of cards.

439
00:17:15,888 --> 00:17:17,987
If you're not in a Navigation Controller,

440
00:17:17,989 --> 00:17:19,789
then it will show it modally.

441
00:17:19,791 --> 00:17:23,225
Okay, so now, modal presentation of an MVC,

442
00:17:23,227 --> 00:17:25,060
we haven't talked about that with all these other things,

443
00:17:25,062 --> 00:17:27,629
but basically it just takes over the entire screen.

444
00:17:27,631 --> 00:17:29,030
Okay? Just completely takes over the

445
00:17:29,032 --> 00:17:33,501
entire screen, puts the MVC that you wanna show on screen.

446
00:17:33,503 --> 00:17:36,236
So it's very kind of disruptive to

447
00:17:36,238 --> 00:17:39,306
the user a little bit, because their app is stuck,

448
00:17:39,308 --> 00:17:42,308
it can only do what this MVC is asking them to do.

449
00:17:42,310 --> 00:17:44,944
So I kind of recommend against using modal, and

450
00:17:44,946 --> 00:17:47,913
trying to keep your apps from doing that.

451
00:17:47,915 --> 00:17:49,114
So if you're using a show segue,

452
00:17:49,116 --> 00:17:51,516
you probably wanna be in a navigation controller, so

453
00:17:51,518 --> 00:17:52,951
that it will slide it on deck.

454
00:17:52,953 --> 00:17:54,986
Because, then the user can always go back,

455
00:17:54,988 --> 00:17:57,388
if they didn't mean that, they can go back.

456
00:17:57,390 --> 00:18:01,191
Then there is show detail segue, very similar to show,

457
00:18:01,193 --> 00:18:04,361
the only difference with show detail is that if

458
00:18:04,363 --> 00:18:07,364
you happen to be in a split view controller it

459
00:18:07,366 --> 00:18:10,166
will show this MVC as the detail, okay?

460
00:18:10,168 --> 00:18:12,168
Otherwise if you are in Navigation Controller, but

461
00:18:12,170 --> 00:18:13,969
not in a split view controller it just pushes it

462
00:18:13,971 --> 00:18:15,671
on the stack just like show would, okay?

463
00:18:17,541 --> 00:18:19,474
So, show detail tiny difference there.

464
00:18:19,476 --> 00:18:21,375
It's just about split view.

465
00:18:21,377 --> 00:18:23,410
So, it really helps you when you're in a split view

466
00:18:23,412 --> 00:18:25,812
decide whether what you want is the master to,

467
00:18:25,814 --> 00:18:27,714
if the master is in a Navigation Controller,

468
00:18:27,716 --> 00:18:29,882
if you want that to slide on the master?

469
00:18:29,884 --> 00:18:31,417
The thing you're segueing to or

470
00:18:31,419 --> 00:18:32,685
do you want it to appear in the detail, okay?

471
00:18:33,954 --> 00:18:37,188
Then there's modal which forces this full

472
00:18:37,190 --> 00:18:39,190
screen takeover type of thing.

473
00:18:39,192 --> 00:18:41,092
I'm not even gonna talk about that, I'll talk about it

474
00:18:41,094 --> 00:18:42,526
later in the quarter, but I don't wanna talk about it

475
00:18:42,528 --> 00:18:46,163
early because it can be used as a crutch to build UIs.

476
00:18:46,165 --> 00:18:48,498
You really wanna be using Navigation Controllers, and

477
00:18:48,500 --> 00:18:49,799
split view controllers to do that.

478
00:18:50,735 --> 00:18:52,034
And then a popover segue.

479
00:18:52,036 --> 00:18:55,404
Now a popover segue pops the view controller that you're

480
00:18:55,406 --> 00:18:58,707
segueing to, up into a little window that's on top of

481
00:18:58,709 --> 00:19:00,408
everything else, but just a little window instead of

482
00:19:00,410 --> 00:19:01,642
taking over the whole screen.

483
00:19:01,644 --> 00:19:03,243
But it, really is taking over the whole screen,

484
00:19:03,245 --> 00:19:05,545
because the user an only interact with what's in

485
00:19:05,547 --> 00:19:08,214
the little popover window, if they click anywhere else,

486
00:19:08,216 --> 00:19:10,350
it dismisses the popover window.

487
00:19:10,352 --> 00:19:13,252
But what makes popover nicer than just modal is that,

488
00:19:13,254 --> 00:19:15,554
since it doesn't take over the whole screen, you can still

489
00:19:15,556 --> 00:19:18,623
kind of see grayed out where you came from, and if you

490
00:19:18,625 --> 00:19:21,192
click where you came from, it puts the popover away.

491
00:19:21,194 --> 00:19:24,696
So the popover has very easy to cancel, it's very easy for

492
00:19:24,698 --> 00:19:26,881
you just to get back to

493
00:19:26,882 --> 00:19:29,065
where they were if they didn't really mean to click that.

494
00:19:29,068 --> 00:19:30,501
Okay, so that's popovers.

495
00:19:30,502 --> 00:19:31,935
So we'll talk over popovers at the end.

496
00:19:31,937 --> 00:19:35,505
Again I wanna emphasize what she was talking about on

497
00:19:35,507 --> 00:19:38,241
the previous slide segues of all kinds,

498
00:19:38,243 --> 00:19:42,812
no matter what you're doing, show detail, modal or popover.

499
00:19:42,814 --> 00:19:44,646
They always create a new MVC.

500
00:19:44,648 --> 00:19:48,550
You're never segueing to an existing MVC anywhere.

501
00:19:48,552 --> 00:19:50,318
You're always creating a new one always,

502
00:19:50,320 --> 00:19:51,886
that's what segues do.

503
00:19:51,888 --> 00:19:53,554
Okay, that takes a little bit of

504
00:19:53,556 --> 00:19:54,788
getting used to in your mind.

505
00:19:54,790 --> 00:19:56,556
Because of course you see this stack of cards.

506
00:19:56,558 --> 00:19:58,892
Navigation one, and you press back.

507
00:19:58,894 --> 00:20:00,760
And then you click to go back to where you were.

508
00:20:00,762 --> 00:20:02,428
And you think you're going back to the same one.

509
00:20:02,430 --> 00:20:03,696
But you're not. Because as soon as

510
00:20:03,698 --> 00:20:05,964
that thing comes off the stack, [SOUND] it's gone.

511
00:20:05,966 --> 00:20:07,365
Even in split view.

512
00:20:07,367 --> 00:20:10,501
You click in the master it updates your detail.

513
00:20:10,503 --> 00:20:12,436
You click again in the master to update the detail,

514
00:20:12,438 --> 00:20:14,304
and the detail changes and you think oh,

515
00:20:14,306 --> 00:20:16,206
that was the same thing it just got changed.

516
00:20:16,208 --> 00:20:18,041
No the previous one got thrown away and

517
00:20:18,043 --> 00:20:20,143
new detail got created, okay?

518
00:20:21,079 --> 00:20:22,878
So segues always created a new MVC.

519
00:20:24,148 --> 00:20:27,182
All right, so how do we make these segues happen, okay?

520
00:20:27,184 --> 00:20:28,649
You can do this in code as well, and

521
00:20:28,651 --> 00:20:31,352
I'm gonna show briefly how you do this in code.

522
00:20:31,354 --> 00:20:33,587
But in 90% of the time you're gonna do it

523
00:20:33,589 --> 00:20:35,455
in a storyboard with control drag,

524
00:20:35,457 --> 00:20:38,825
which is how we create most of the things we do in IOS.

525
00:20:38,827 --> 00:20:41,627
So here's an example of doing it with the control drag,

526
00:20:42,997 --> 00:20:46,231
I'm control dragging from a button in my calculator, so

527
00:20:46,233 --> 00:20:47,265
I added a button.

528
00:20:47,267 --> 00:20:48,600
The icon is very, very small but

529
00:20:50,870 --> 00:20:52,453
it actually looks like a little graph.

530
00:20:52,454 --> 00:20:54,037
So I'm control dragging from that in the upper right corner

531
00:20:54,040 --> 00:20:57,074
there down to the detail, because I

532
00:20:57,076 --> 00:21:00,344
want when that buttons pressed I want the detail to be

533
00:21:00,346 --> 00:21:05,448
replaced with a new graphing MVC, okay?

534
00:21:05,450 --> 00:21:06,682
When I let go it that,

535
00:21:06,684 --> 00:21:10,319
it's gonna say, what kind of segue do you want?

536
00:21:10,321 --> 00:21:12,988
This little black box is gonna appear.

537
00:21:12,990 --> 00:21:14,422
And here I'm gonna pick Show Detail,

538
00:21:14,424 --> 00:21:15,656
because if I'm in a split view,

539
00:21:15,658 --> 00:21:17,458
I wanted to replace the detail.

540
00:21:17,460 --> 00:21:20,160
If I was in a Navigation Controller only,

541
00:21:20,162 --> 00:21:22,195
I probably still would choose Show Detail because that

542
00:21:22,197 --> 00:21:24,030
also pushes on the stack.

543
00:21:24,032 --> 00:21:26,132
But if I were the master in a split view and

544
00:21:26,134 --> 00:21:27,500
I didn't want it to do the detail,

545
00:21:27,502 --> 00:21:30,269
I wanted it to actually slide on the stack of the master,

546
00:21:30,271 --> 00:21:33,071
cuz the master could be a stack then I would use show.

547
00:21:33,073 --> 00:21:34,706
All right?

548
00:21:34,708 --> 00:21:38,576
I could also make it a popover or a model here.

549
00:21:38,578 --> 00:21:41,712
So I'm gonna pick show detail, that's what I want.

550
00:21:41,714 --> 00:21:45,849
And it's gonna make a line appear in the story board.

551
00:21:45,851 --> 00:21:48,218
And the middle of the line is a little round circle.

552
00:21:48,220 --> 00:21:50,520
If you click on that and bring up the attributes and

553
00:21:50,522 --> 00:21:53,923
specter, on the right you'll see that there's a little pop

554
00:21:53,925 --> 00:21:55,758
up that says what kind of segue you want.

555
00:21:55,760 --> 00:21:58,660
We already, we already chose this one to be show detail.

556
00:21:58,662 --> 00:22:01,430
And there's also a critical field there called Identifier.

557
00:22:01,432 --> 00:22:03,631
That's a unique Identifier for

558
00:22:03,633 --> 00:22:06,701
this segue, and you need this Identifier.

559
00:22:06,703 --> 00:22:09,904
Let's talk about, why we need this Identifier?

560
00:22:09,906 --> 00:22:11,505
So I'm gonna call this Identifier for

561
00:22:11,507 --> 00:22:13,824
this own show graph.

562
00:22:13,825 --> 00:22:16,142
And you should usually, call the segue something that

563
00:22:16,145 --> 00:22:19,379
is probably a verb phrase that says what this segue does.

564
00:22:19,381 --> 00:22:20,980
So this segue when you're pressing the button it

565
00:22:20,982 --> 00:22:24,850
shows a graph so I'm gonna call it show graph, okay?

566
00:22:24,852 --> 00:22:26,218
So just type that in there.

567
00:22:26,220 --> 00:22:28,687
So, I told you before that everything in the storyboard

568
00:22:28,689 --> 00:22:31,322
is linked up with what's in your code by name.

569
00:22:31,324 --> 00:22:32,723
Whether it's the class of view controller.

570
00:22:32,725 --> 00:22:34,091
Class of of UI view.

571
00:22:34,093 --> 00:22:35,158
Name of an outlet.

572
00:22:35,160 --> 00:22:36,259
Name of an action.

573
00:22:36,261 --> 00:22:37,877
Name of a segue which is

574
00:22:37,878 --> 00:22:39,494
basically what the Identifier of a segue is.

575
00:22:39,497 --> 00:22:40,930
They're all just names, and

576
00:22:40,932 --> 00:22:43,065
we have to make the names the same in our code.

577
00:22:43,067 --> 00:22:45,701
So it's a loose coupling to make those two

578
00:22:45,703 --> 00:22:47,636
things work together.

579
00:22:47,637 --> 00:22:49,570
So, we'll have to reference this name in our code.

580
00:22:50,874 --> 00:22:53,040
Okay, so where, where are we gonna use that Identifier?

581
00:22:53,042 --> 00:22:56,744
Well, one way we can do it, only the 10% case I said,

582
00:22:56,746 --> 00:22:59,646
is to cause a segue to happen from code.

583
00:22:59,648 --> 00:23:01,698
And you do that with

584
00:23:01,699 --> 00:23:03,749
UIViewController method performSequeWithIdentifier.

585
00:23:03,752 --> 00:23:05,485
And you just specify that Identifier, and

586
00:23:05,487 --> 00:23:07,019
it's gonna make that segue happen, okay?

587
00:23:08,622 --> 00:23:09,888
Simple as that,

588
00:23:09,890 --> 00:23:11,189
as long as they're talking about this one,

589
00:23:11,191 --> 00:23:13,124
because you're not gonna be doing this one,

590
00:23:13,126 --> 00:23:14,992
probably ion this class, maybe in your final project,

591
00:23:14,994 --> 00:23:16,560
you might find a reason to do it.

592
00:23:17,896 --> 00:23:20,730
But the number one reason to have the Identifier in there

593
00:23:20,732 --> 00:23:22,465
and the main thing that it's used for

594
00:23:22,467 --> 00:23:26,735
is to prepare a segue, because when that segue happens,

595
00:23:26,737 --> 00:23:31,006
it creates a new MVC, that new MVC was just born.

596
00:23:31,008 --> 00:23:33,574
It needs to be prepared to do what it wants to do.

597
00:23:33,576 --> 00:23:35,760
So for example,

598
00:23:35,761 --> 00:23:37,945
in the calculator case, when I segue to a graphing MVC,

599
00:23:38,881 --> 00:23:40,680
it's just a blank graphing MVC.

600
00:23:40,682 --> 00:23:42,348
I have to tell it what to graph.

601
00:23:42,350 --> 00:23:45,151
I have to prepare it basically, okay?

602
00:23:45,153 --> 00:23:47,152
So, that's the number one thing, preparing.

603
00:23:47,154 --> 00:23:49,121
So how does preparing work?

604
00:23:49,123 --> 00:23:51,089
Preparing very simple.

605
00:23:51,091 --> 00:23:54,692
The MVC that contains the instigator of this segue.

606
00:23:54,694 --> 00:23:57,828
Like the button, or whatever's causing it to segue.

607
00:23:57,830 --> 00:24:00,998
That MVC implements a method called, prepare for segue.

608
00:24:01,000 --> 00:24:04,201
And inside, it gets the MVC that was just created, and

609
00:24:04,203 --> 00:24:05,969
it has to prepare it.

610
00:24:05,971 --> 00:24:08,438
So let's talk about what that code looks like,

611
00:24:08,440 --> 00:24:10,206
prepare for segue.

612
00:24:10,208 --> 00:24:11,740
It takes two arguments, okay?

613
00:24:11,742 --> 00:24:13,942
The first one is the segue.

614
00:24:13,944 --> 00:24:15,844
That's UI storyboard segue instance and

615
00:24:15,846 --> 00:24:17,912
it really has two important things in there.

616
00:24:17,914 --> 00:24:19,480
One is the Identifier, so

617
00:24:19,482 --> 00:24:21,315
you know which segue you're preparing.

618
00:24:21,317 --> 00:24:23,200
And two is,

619
00:24:23,201 --> 00:24:25,084
the MVC that it just created that you're going to segue to,

620
00:24:25,087 --> 00:24:27,787
which is called the destination view controller.

621
00:24:27,789 --> 00:24:29,155
It has a second argument there,

622
00:24:29,157 --> 00:24:32,224
which is sender, that's just the UI button or

623
00:24:32,226 --> 00:24:35,127
whatever that caused the segue to happen.

624
00:24:35,129 --> 00:24:37,229
You don't usually need to look at that but sometimes.

625
00:24:37,231 --> 00:24:39,564
We'll see later in the quarter when we wanna look at that.

626
00:24:39,566 --> 00:24:41,599
But that's all it is,

627
00:24:41,600 --> 00:24:43,633
it's just what object caused the segue to happen.

628
00:24:44,737 --> 00:24:47,004
So we're gonna look at that segue identifier.

629
00:24:47,006 --> 00:24:48,772
It's just a property, segue.identifier.

630
00:24:48,774 --> 00:24:51,240
It could be nil, because you might not have set it.

631
00:24:51,242 --> 00:24:53,676
And so you wanna check if it's nil here, so

632
00:24:53,678 --> 00:24:56,712
here I am doing if, let to check if that thing is nil.

633
00:24:56,714 --> 00:24:59,414
Then I'm just gonna switch on it, okay?

634
00:24:59,416 --> 00:25:02,083
And I'm gonna look for Show Graph, and

635
00:25:02,085 --> 00:25:05,753
once I know that, but I'm preparing to show a graph,

636
00:25:05,755 --> 00:25:07,922
then I can say, give me the MVC,

637
00:25:07,924 --> 00:25:11,458
that graphing calculator MVC that you just made.

638
00:25:11,460 --> 00:25:14,227
Now, the thing is segue dot destination view controller,

639
00:25:14,229 --> 00:25:15,962
that property is any object.

640
00:25:17,232 --> 00:25:20,599
Okay, so you have to use as to turn it into

641
00:25:20,601 --> 00:25:23,469
the right class of the MVC you just create.

642
00:25:23,471 --> 00:25:25,070
Now in the case here,

643
00:25:25,072 --> 00:25:27,639
I created a calculator graph view controller,

644
00:25:27,641 --> 00:25:29,941
I've abbreviated here calc graph view controller,

645
00:25:29,943 --> 00:25:32,209
although you shouldn't do that in your homework, okay?

646
00:25:32,211 --> 00:25:33,977
It's just that it wouldn't fit on the slide here,

647
00:25:33,979 --> 00:25:36,446
so calculator graph view controllers are on,

648
00:25:36,448 --> 00:25:37,647
turning that destination view

649
00:25:37,649 --> 00:25:39,615
controller into a calculator graph view controller, and

650
00:25:39,617 --> 00:25:41,417
if I can't do it, well then I can't prepare it.

651
00:25:41,419 --> 00:25:43,318
So, I'm just gonna do if let there.

652
00:25:44,455 --> 00:25:49,390
So if I can, then I'm just going to call methods and set

653
00:25:49,392 --> 00:25:53,627
properties in that calculator graph view controller, that

654
00:25:53,629 --> 00:25:57,831
are needed to prepare that thing to come onscreen, okay?

655
00:25:57,833 --> 00:26:00,066
So again in this case I

656
00:26:00,067 --> 00:26:02,300
would probably tell it what I wanted it to graph here.

657
00:26:02,303 --> 00:26:05,271
Okay, maybe I would set it to color, or something else.

658
00:26:05,273 --> 00:26:08,674
The scale, or I don't know whatever we wanted to set here

659
00:26:08,676 --> 00:26:11,243
we can do, okay?

660
00:26:11,245 --> 00:26:14,546
Now, I don't put a lot of red on my slides.

661
00:26:14,548 --> 00:26:17,048
And when I do, you really should pay attention, okay?

662
00:26:17,050 --> 00:26:19,083
Very important thing to understand,

663
00:26:19,085 --> 00:26:22,152
is when you are preparing that newly created MVC,

664
00:26:23,221 --> 00:26:25,621
it's outlets have not been set.

665
00:26:27,291 --> 00:26:29,174
Remember outlets are these

666
00:26:29,175 --> 00:26:31,058
implicitly unwrapped optionals, we are always kind

667
00:26:31,061 --> 00:26:32,894
of expecting them to have been set.

668
00:26:32,896 --> 00:26:35,329
Well, this is one case where that's not true.

669
00:26:35,331 --> 00:26:38,065
When you're preparing your MVC, it's outlets are not yet

670
00:26:38,067 --> 00:26:39,867
set, okay?

671
00:26:39,869 --> 00:26:43,804
That can cause crashers, that can cause you to unexpected

672
00:26:43,806 --> 00:26:47,407
behavior, because you set something in preparing it and

673
00:26:47,409 --> 00:26:50,576
you're expecting something in the view to have been set, but

674
00:26:50,578 --> 00:26:53,479
it didn't happen because the outlet is just not set yet.

675
00:26:53,481 --> 00:26:56,648
So you have to take whatever the preparation is and hold

676
00:26:56,650 --> 00:27:00,252
onto it, and then later on when the outlet does get set,

677
00:27:00,254 --> 00:27:03,788
maybe in the property observer of that outlet, you can load

678
00:27:03,790 --> 00:27:07,392
up the information that you're prepared with here, okay?

679
00:27:07,394 --> 00:27:08,292
I'll see that in the demo.

680
00:27:08,294 --> 00:27:09,894
I've made my demo

681
00:27:09,895 --> 00:27:11,495
intentionally crash because of this.

682
00:27:11,497 --> 00:27:13,897
And we'll go back and look at why that happens, okay?

683
00:27:13,899 --> 00:27:17,967
But this is red, pay attention, you know,

684
00:27:17,969 --> 00:27:19,635
if your segue doesn't work the first time,

685
00:27:19,637 --> 00:27:22,204
it might well be because you're expecting outlets to

686
00:27:22,206 --> 00:27:28,343
be set when your MVC is being prepared, okay?

687
00:27:28,345 --> 00:27:29,744
So that's preparing for a segue.

688
00:27:29,746 --> 00:27:32,146
You can also prevent a segue from happening.

689
00:27:32,148 --> 00:27:33,547
If there's some reason it doesn't make sense for

690
00:27:33,549 --> 00:27:35,716
that segue to happen, you could just disable the button,

691
00:27:35,718 --> 00:27:38,952
but if you didn't wanna disable the button you could

692
00:27:38,954 --> 00:27:40,921
click the button.

693
00:27:40,922 --> 00:27:42,889
And what'll happen here is your UIViewController will be

694
00:27:42,891 --> 00:27:46,225
asked, should I perform this segue with Identifier?

695
00:27:46,227 --> 00:27:48,293
It'll pass you the Identifier and the sender.

696
00:27:48,295 --> 00:27:50,062
And you can just return, false.

697
00:27:50,064 --> 00:27:52,964
And then it won't do that segue.

698
00:27:52,966 --> 00:27:55,150
It won't crash or anything.

699
00:27:55,151 --> 00:27:57,335
It just, you know, touch the button, it does nothing.

700
00:27:57,337 --> 00:28:00,438
'Kay, so you can control your segues kind of

701
00:28:00,440 --> 00:28:01,739
programmatically as well like that.

702
00:28:03,242 --> 00:28:04,441
Okay?

703
00:28:04,443 --> 00:28:06,209
So, demo time here.

704
00:28:06,211 --> 00:28:08,778
We're gonna demonstrate all of this.

705
00:28:08,780 --> 00:28:12,681
And I'm gonna do this demonstration by creating

706
00:28:12,683 --> 00:28:17,452
completely new application called Psychologist.

707
00:28:17,454 --> 00:28:20,421
Okay, so, let's go over here.

708
00:28:21,757 --> 00:28:23,423
So I'm going to Xcode.

709
00:28:23,425 --> 00:28:24,691
And here's happiness and calculator.

710
00:28:24,693 --> 00:28:26,893
But I'm gonna create a new project here.

711
00:28:26,895 --> 00:28:32,197
I'm gonna call it psychologist, Psychologist.

712
00:28:32,199 --> 00:28:36,401
Okay this gonna put it in the same place that

713
00:28:36,403 --> 00:28:39,036
my calculator and happiness apps were.

714
00:28:40,239 --> 00:28:41,755
Here it is.

715
00:28:41,756 --> 00:28:43,272
I'm gonna move these things out of the way,

716
00:28:43,275 --> 00:28:45,475
like we always do.

717
00:28:45,476 --> 00:28:47,676
The images, the assets, the launch screen so that I

718
00:28:47,679 --> 00:28:52,148
just have my main storyboard here and this view controller.

719
00:28:52,150 --> 00:28:54,817
And I'm actually gonna rename this view controller.

720
00:28:54,819 --> 00:28:58,086
I don't like the name GenericViewController.

721
00:28:58,088 --> 00:28:59,287
I even had you change it

722
00:29:00,223 --> 00:29:01,856
in the latest homework assignment, because I

723
00:29:01,858 --> 00:29:03,724
just don't think that's a very descriptive name.

724
00:29:03,726 --> 00:29:06,193
So, I'm gonna change the name of

725
00:29:06,194 --> 00:29:08,661
my view controller here to be PsychologistViewController.

726
00:29:08,664 --> 00:29:11,097
So I have to do that in three different places again,

727
00:29:11,099 --> 00:29:14,567
so here I'm gonna say Psychologist.

728
00:29:14,569 --> 00:29:16,335
Okay?

729
00:29:16,336 --> 00:29:18,102
Here I'm gonna change the name of the file,

730
00:29:18,105 --> 00:29:19,905
to be Psychologist.

731
00:29:19,907 --> 00:29:22,640
That's surprisingly hard to type by the way.

732
00:29:22,642 --> 00:29:24,108
And then in the story board,

733
00:29:24,110 --> 00:29:27,044
of course, I need to go to the identity inspector here and

734
00:29:27,046 --> 00:29:29,646
change it to be a PsychologistViewController.

735
00:29:30,816 --> 00:29:32,849
So let's add those three steps.

736
00:29:32,850 --> 00:29:34,883
So now I have this PsychologistViewController.

737
00:29:34,886 --> 00:29:36,285
What's this Psychologist gonna do?

738
00:29:36,287 --> 00:29:39,655
Well, he can ask you a question like Psychologists

739
00:29:39,657 --> 00:29:40,890
want to do.

740
00:29:40,891 --> 00:29:42,124
And you're gonna give an answer.

741
00:29:42,126 --> 00:29:44,459
And then he's gonna make a diagnosis.

742
00:29:44,461 --> 00:29:46,094
Okay. Based on your answer as to

743
00:29:46,096 --> 00:29:47,695
how happy you are or not.

744
00:29:47,697 --> 00:29:50,798
And then it's gonna use the HappinessViewController,

745
00:29:50,800 --> 00:29:54,001
to show how happy you are, show the diagnosis basically.

746
00:29:54,003 --> 00:29:55,635
Okay, so we are gonna use both the

747
00:29:55,637 --> 00:29:57,437
PsychologistViewController, and

748
00:29:57,439 --> 00:29:59,872
the HappinessViewController from our last app.

749
00:29:59,874 --> 00:30:02,208
But let's start with this psychologist view

750
00:30:02,210 --> 00:30:04,276
controller here, let's build its UI.

751
00:30:04,278 --> 00:30:05,877
He's going to ask a question, so

752
00:30:05,879 --> 00:30:08,246
I'm going to bring out a label for the question.

753
00:30:08,248 --> 00:30:11,015
He's going to ask the question,

754
00:30:11,017 --> 00:30:14,818
what do you see in your dreams?

755
00:30:14,820 --> 00:30:16,703
That sounds like

756
00:30:16,704 --> 00:30:18,587
a very psychologisty kind of question.

757
00:30:18,590 --> 00:30:20,824
And let's make it bigger font.

758
00:30:21,893 --> 00:30:24,693
Maybe like, 36 point or something like that.

759
00:30:26,430 --> 00:30:30,198
We can make it larger here.

760
00:30:31,901 --> 00:30:35,069
Let's center it, make this text centered.

761
00:30:35,071 --> 00:30:37,070
Let's try to put it in a nice place, okay?

762
00:30:37,072 --> 00:30:39,372
Let's use our blue lines to put it somewhere here.

763
00:30:39,374 --> 00:30:42,442
Let's put it like that, so it's nice.

764
00:30:42,444 --> 00:30:45,978
And put it in a good place.

765
00:30:45,980 --> 00:30:47,179
Let's try.

766
00:30:47,181 --> 00:30:48,747
I'm going to show you a little bit of

767
00:30:48,749 --> 00:30:50,048
Auto Layout every lecture.

768
00:30:50,050 --> 00:30:52,116
Just show you the things you can do.

769
00:30:52,118 --> 00:30:54,118
So let's try and see if we can.

770
00:30:54,120 --> 00:30:56,186
We put this all on blue lines up here.

771
00:30:56,188 --> 00:30:57,788
Right.

772
00:30:57,789 --> 00:30:59,389
So let's see if we can request, or have it

773
00:30:59,391 --> 00:31:02,392
reset to Suggested Constraints and see if it'll work, okay?

774
00:31:02,394 --> 00:31:04,627
So here I'm, this is for the Selected View.

775
00:31:04,629 --> 00:31:06,261
To un-select this view.

776
00:31:06,263 --> 00:31:09,831
I'm gonna go reset to Suggested Constraints.

777
00:31:09,833 --> 00:31:10,732
Now, let's see what happened.

778
00:31:10,734 --> 00:31:11,566
Now, this doesn't look good.

779
00:31:11,568 --> 00:31:13,434
I don't like this,

780
00:31:13,435 --> 00:31:15,301
cuz I really don't want this thing attached to the bottom.

781
00:31:15,304 --> 00:31:18,005
But the real place, a good place to look for

782
00:31:18,007 --> 00:31:21,575
the constraints is over here again in Size Inspector.

783
00:31:21,577 --> 00:31:23,009
If you look down at the bottom,

784
00:31:23,011 --> 00:31:25,978
you can see all the constraints that that reset to

785
00:31:25,980 --> 00:31:27,813
Suggested Constraints did.

786
00:31:27,815 --> 00:31:31,683
And I'd like this one, and I like that one.

787
00:31:31,685 --> 00:31:32,817
And I like that one.

788
00:31:32,819 --> 00:31:34,018
But I don't like that one.

789
00:31:34,020 --> 00:31:35,353
So I can just click on it and

790
00:31:35,355 --> 00:31:36,887
hit delete, and get rid of that.

791
00:31:36,889 --> 00:31:38,355
Now as soon as I did that,

792
00:31:38,357 --> 00:31:41,124
of course I got the yellow cuz it's misplaced.

793
00:31:41,126 --> 00:31:42,392
So I'm gonna go back and

794
00:31:42,394 --> 00:31:45,294
do what we did all the way, way back in lecture one,

795
00:31:45,296 --> 00:31:48,464
which I'm gonna update this frame, fix the misplacement.

796
00:31:48,466 --> 00:31:49,664
No issues.

797
00:31:49,666 --> 00:31:51,366
Boom. I've got this where I want it.

798
00:31:51,368 --> 00:31:54,802
Okay, so that's another way to use auto layout there.

799
00:31:55,971 --> 00:31:57,237
Alright, so let's get the answers out.

800
00:31:57,239 --> 00:31:58,505
Here's our question.

801
00:31:58,506 --> 00:31:59,772
Let's grab our answers out here.

802
00:31:59,775 --> 00:32:04,677
So let's, maybe I see a dancing tree, okay?

803
00:32:04,679 --> 00:32:06,712
If I see a dancing tree in my grid,

804
00:32:06,714 --> 00:32:08,847
let's make this font bigger again on this one too.

805
00:32:10,550 --> 00:32:13,551
If I see a dancing tree in my dreams I'm probably gonna be

806
00:32:13,553 --> 00:32:15,286
pretty happy I think.

807
00:32:15,288 --> 00:32:17,588
So let's try and put this one where it should be.

808
00:32:17,590 --> 00:32:19,356
So I'm gonna try and

809
00:32:19,357 --> 00:32:21,123
put this one right in the center of my view.

810
00:32:21,126 --> 00:32:24,094
So again, let's try and reset the suggested constraints and

811
00:32:24,096 --> 00:32:25,328
see if that works.

812
00:32:25,330 --> 00:32:27,229
Okay well that looks bad too.

813
00:32:27,231 --> 00:32:28,697
So let's go look over and see what it did.

814
00:32:30,601 --> 00:32:33,101
Alright, well, it aligns center to the super view.

815
00:32:33,103 --> 00:32:34,268
That looks good.

816
00:32:34,270 --> 00:32:38,172
But it aligned the X up with this thing up here and

817
00:32:38,174 --> 00:32:39,940
I don't really want that, so I'm gonna delete that.

818
00:32:39,942 --> 00:32:42,476
The bottom space, I definitely don't want that.

819
00:32:42,478 --> 00:32:44,277
And it fixed the width.

820
00:32:44,279 --> 00:32:45,878
I definitely don't want the width fixed.

821
00:32:45,880 --> 00:32:49,148
I want the width to match whatever the size of

822
00:32:49,150 --> 00:32:50,483
this thing is.

823
00:32:50,484 --> 00:32:51,817
So, kinda got most things here.

824
00:32:51,819 --> 00:32:54,786
But I really don't have a vertical position or

825
00:32:54,788 --> 00:32:57,155
horizontal position of this thing set.

826
00:32:57,157 --> 00:32:59,691
So I'm gonna use another one down here.

827
00:32:59,693 --> 00:33:01,158
This is the alignment one.

828
00:33:01,160 --> 00:33:04,261
And I'm gonna go down here and say, I want the alignment,

829
00:33:04,263 --> 00:33:09,599
the horizontal and vertical centers to be lined up.

830
00:33:09,601 --> 00:33:14,036
So I really already got the vertical center right there.

831
00:33:14,038 --> 00:33:15,404
So I just do horizontal center, so

832
00:33:15,406 --> 00:33:16,772
I'll add that constraint.

833
00:33:16,774 --> 00:33:19,374
So now I've got these two things lined up,

834
00:33:19,376 --> 00:33:20,875
that looks like what I want.

835
00:33:20,877 --> 00:33:24,912
Again, it's a little off this placement probably size is

836
00:33:24,914 --> 00:33:27,714
not quite right, we'll put that right.

837
00:33:27,716 --> 00:33:30,250
And boom, now we've got this tree in the middle.

838
00:33:30,252 --> 00:33:31,852
Okay.

839
00:33:31,853 --> 00:33:33,453
So let's add some more answers. I'm just going

840
00:33:33,454 --> 00:33:35,054
to copy and paste because I like this font combination.

841
00:33:35,056 --> 00:33:39,792
Let's say you dream of a dirty Golden, no not dirty,

842
00:33:39,794 --> 00:33:42,794
we'll just say, a Golden Bear.

843
00:33:42,796 --> 00:33:44,963
[NOISE] Okay so let's say the Golden Bear somehow shows up

844
00:33:44,965 --> 00:33:45,596
in your dreams.

845
00:33:45,598 --> 00:33:49,033
Doesn't sound very good.

846
00:33:49,035 --> 00:33:50,100
So there's that.

847
00:33:50,102 --> 00:33:53,103
And this one, let's see if we

848
00:33:53,105 --> 00:33:55,872
can do suggested constraints with this one.

849
00:33:57,275 --> 00:33:59,708
Okay, we do that. Now this one looks good.

850
00:33:59,710 --> 00:34:03,244
It's got the bottom space and the center.

851
00:34:03,246 --> 00:34:04,112
Looks good, okay?

852
00:34:04,114 --> 00:34:05,479
So we're rocking with that one.

853
00:34:05,481 --> 00:34:06,613
No need to do anything.

854
00:34:06,615 --> 00:34:07,547
Let's do another one.

855
00:34:08,684 --> 00:34:11,551
Buckeye, I'm not even sure what that is, but

856
00:34:11,553 --> 00:34:13,085
we'll put that in there.

857
00:34:13,087 --> 00:34:16,422
We'll reset suggested constraints for this one too.

858
00:34:16,424 --> 00:34:18,690
Make sure that looks good, yes it does, okay,

859
00:34:18,692 --> 00:34:21,059
this is just the size inspector right here, alright.

860
00:34:21,061 --> 00:34:22,644
Alright, so that's good.

861
00:34:22,645 --> 00:34:24,228
So let's run our app and see how it looks.

862
00:34:29,235 --> 00:34:30,367
Okay, here we go.

863
00:34:30,368 --> 00:34:31,500
Oh, that's doesn't look good.

864
00:34:31,503 --> 00:34:33,069
What do you see is getting cut off?

865
00:34:33,071 --> 00:34:34,537
Let's see, if we rotate.

866
00:34:34,539 --> 00:34:35,938
So it's good in landscape.

867
00:34:35,940 --> 00:34:38,173
It doesn't look very good in portrait.

868
00:34:38,175 --> 00:34:39,908
So why is that happening right there?

869
00:34:39,910 --> 00:34:42,677
Some of you found this out in your homework.

870
00:34:42,679 --> 00:34:43,911
It's because right now,

871
00:34:43,913 --> 00:34:47,448
we have this thing set to be of a fixed size.

872
00:34:47,450 --> 00:34:51,551
The font size are here, see auto shrink, fixed font size.

873
00:34:51,553 --> 00:34:53,019
And that doesn't need to be fixed,

874
00:34:53,021 --> 00:34:54,821
I'm happy if that's any size.

875
00:34:54,823 --> 00:34:56,523
I really don't want it to

876
00:34:56,524 --> 00:34:58,224
be any smaller than like 12 point.

877
00:34:58,226 --> 00:35:00,192
That's getting pretty small in the UI so,

878
00:35:00,194 --> 00:35:03,095
I'm gonna set the minimum size to 12.

879
00:35:03,097 --> 00:35:04,729
And now when we run,

880
00:35:04,731 --> 00:35:07,165
it'll make the font smaller to fit the size.

881
00:35:07,167 --> 00:35:09,300
But if we go to a larger, it will make the font bigger.

882
00:35:10,469 --> 00:35:11,985
Okay. Question back there.

883
00:35:11,986 --> 00:35:13,502
>> Is there any way to make it wrap around to the next line?

884
00:35:13,505 --> 00:35:15,171
>> So the question is,

885
00:35:15,173 --> 00:35:17,774
is there any way to make this text wrap to the next line?

886
00:35:17,776 --> 00:35:20,042
And there is.There's a couple of ways to do it.

887
00:35:20,044 --> 00:35:21,443
There's UI text view,

888
00:35:21,445 --> 00:35:25,580
which is a very powerful text wrapping one.

889
00:35:25,582 --> 00:35:28,316
But even Label, you can go here to the Label and

890
00:35:28,318 --> 00:35:31,419
when you inspect it, you can say,

891
00:35:31,421 --> 00:35:33,120
how you want the line breaks to happen.

892
00:35:33,122 --> 00:35:35,822
You see here it says truncate tail.

893
00:35:35,824 --> 00:35:39,859
And you can also control how many lines long you're gonna

894
00:35:39,861 --> 00:35:41,427
allow the label to be.

895
00:35:42,730 --> 00:35:47,866
Okay, so now we have this good UI, and we want to

896
00:35:47,868 --> 00:35:51,469
make it so that it works with the Happiness View Controller.

897
00:35:51,471 --> 00:35:53,170
So we need our Happiness View Controller.

898
00:35:53,172 --> 00:35:55,406
So how are we going to get our Happiness View Controller?

899
00:35:55,408 --> 00:35:57,174
And the answer is,

900
00:35:57,175 --> 00:35:58,941
we're just going to copy and paste it from our other app.

901
00:35:58,944 --> 00:36:01,244
So let's go open our other app.

902
00:36:01,246 --> 00:36:02,812
Okay, where is it?

903
00:36:02,813 --> 00:36:04,379
It's here, Developer Happiness.

904
00:36:04,382 --> 00:36:06,115
I'm just gonna open Happiness in X code.

905
00:36:06,117 --> 00:36:07,767
Here it is.

906
00:36:07,768 --> 00:36:09,418
And I'm just gonna first of all copy the code over.

907
00:36:09,420 --> 00:36:12,688
So I have my Face view and my Happiness view controller.

908
00:36:12,690 --> 00:36:16,224
I'm just gonna drag them from one into the other.

909
00:36:17,160 --> 00:36:19,460
Okay, just drag them from one project into the other.

910
00:36:19,462 --> 00:36:22,462
When you do, it'll allow you to copy them if you want, or

911
00:36:22,464 --> 00:36:24,064
you could have a reference.

912
00:36:24,066 --> 00:36:26,833
If you're going to have a reference, make sure that that

913
00:36:26,835 --> 00:36:29,335
place you're referencing to stays around,

914
00:36:29,337 --> 00:36:31,337
that you're not deleting it and things like that.

915
00:36:31,339 --> 00:36:33,422
Or you could have a copy.

916
00:36:33,423 --> 00:36:35,506
I'm going to add a copy, the items right here.

917
00:36:35,509 --> 00:36:36,975
Okay, so, copy those two things in.

918
00:36:36,977 --> 00:36:39,077
And then what about my storyboard here?

919
00:36:39,079 --> 00:36:41,879
I need to kind of get this Happiness view

920
00:36:41,881 --> 00:36:43,547
controller over here.

921
00:36:43,549 --> 00:36:45,816
Okay. Over, into this guy.

922
00:36:45,818 --> 00:36:47,684
Okay, well I can copy and paste that too.

923
00:36:47,686 --> 00:36:49,819
Just select this thing, copy.

924
00:36:49,821 --> 00:36:51,253
Go over to here and paste.

925
00:36:51,255 --> 00:36:52,488
Okay.

926
00:36:52,490 --> 00:36:58,860
So, now I have somewhere my two view controllers.

927
00:36:58,862 --> 00:37:01,262
Okay.

928
00:37:01,264 --> 00:37:03,497
Now one thing I notice when you do copy and

929
00:37:03,499 --> 00:37:06,900
paste, it doesn't draw the face.

930
00:37:06,902 --> 00:37:10,103
It seems like it needs kind of a little bit of a kick,

931
00:37:10,105 --> 00:37:12,706
a little boost before I do that.

932
00:37:12,708 --> 00:37:14,640
So like if you go to FaceView and

933
00:37:14,642 --> 00:37:16,809
just edit this file and hit save.

934
00:37:16,811 --> 00:37:19,845
It seems like that gives it the kick in the head,

935
00:37:19,847 --> 00:37:22,814
literally, that it needs to draw the head, okay?

936
00:37:22,816 --> 00:37:24,900
So, now we have it.

937
00:37:24,901 --> 00:37:26,985
So, we got our two view controllers here and

938
00:37:26,987 --> 00:37:28,953
we want to put them in a split view.

939
00:37:28,955 --> 00:37:32,289
So that this is the master, and this is the detail.

940
00:37:32,291 --> 00:37:33,290
So let's do that.

941
00:37:33,292 --> 00:37:35,058
Super simple, we're gonna go down here.

942
00:37:35,994 --> 00:37:38,061
Go grab a split view controller, okay?

943
00:37:38,063 --> 00:37:39,695
The split view controller's right here.

944
00:37:39,697 --> 00:37:41,930
See, here's tab bar controller.

945
00:37:41,932 --> 00:37:44,866
Here's navigation controller, somewhere.

946
00:37:44,868 --> 00:37:45,900
Page view controller, even.

947
00:37:45,902 --> 00:37:47,068
We're not gonna talk about that, but

948
00:37:47,070 --> 00:37:49,503
that's another way to combine MVCs.

949
00:37:49,505 --> 00:37:52,206
But let's drag this split view controller out.

950
00:37:52,208 --> 00:37:53,774
Now see how it

951
00:37:53,775 --> 00:37:55,341
comes with other stuff that you don't want?

952
00:37:55,344 --> 00:37:57,644
So when you drop it in there, literally just

953
00:37:57,646 --> 00:38:00,079
select the stuff you don't want and delete it.

954
00:38:01,082 --> 00:38:03,215
Okay. Don't want any of that stuff.

955
00:38:03,217 --> 00:38:04,783
Trying to be helpful.

956
00:38:04,785 --> 00:38:07,819
And so here's my split view controller, okay and

957
00:38:07,821 --> 00:38:09,554
here's my mastering detail.

958
00:38:09,556 --> 00:38:11,756
I'm just gonna control drag.

959
00:38:11,758 --> 00:38:13,323
To set my master.

960
00:38:13,325 --> 00:38:15,208
So here's the master.

961
00:38:15,209 --> 00:38:17,092
And I'm gonna control drag, to set the detail.

962
00:38:19,197 --> 00:38:20,363
Okay. That's it.

963
00:38:20,365 --> 00:38:21,363
So let's run.

964
00:38:21,365 --> 00:38:23,331
Let's actually run on an iPad.

965
00:38:23,333 --> 00:38:26,468
See what this looks like.

966
00:38:26,470 --> 00:38:32,373
[BLANK AUDIO] Alright, so here's an iPad.

967
00:38:32,375 --> 00:38:35,976
Oh, I thought I was gonna get a split view, with this thing.

968
00:38:35,978 --> 00:38:37,110
How come I don't get a split view?

969
00:38:37,112 --> 00:38:41,047
>> [INAUDIBLE] >> What?

970
00:38:41,049 --> 00:38:44,983
>> [INAUDIBLE] >> Yes, exactly.

971
00:38:44,985 --> 00:38:46,852
Very good job.

972
00:38:46,854 --> 00:38:49,454
You should get extra credit or something up there.

973
00:38:49,456 --> 00:38:52,957
Yeah, the problem is this UI comes in through this arrow,

974
00:38:52,959 --> 00:38:53,858
so it comes to here.

975
00:38:53,860 --> 00:38:55,426
So it's bypassing the split view.

976
00:38:55,428 --> 00:38:56,793
It's not even going.

977
00:38:56,795 --> 00:38:58,361
So it's just a common mistake you'll do,

978
00:38:58,363 --> 00:38:59,779
you'll forget to move this.

979
00:38:59,780 --> 00:39:01,196
And you can just pick this arrow up and

980
00:39:01,199 --> 00:39:01,797
move it over here.

981
00:39:03,334 --> 00:39:05,384
Okay.

982
00:39:05,385 --> 00:39:07,435
Now when we run, it's going to come in, via the split view.

983
00:39:07,438 --> 00:39:08,403
And it is a split view.

984
00:39:08,405 --> 00:39:10,004
If I slide out from the left,

985
00:39:10,006 --> 00:39:13,607
there's my master and here's my detail.

986
00:39:13,609 --> 00:39:16,076
Okay. And if I rotate.

987
00:39:16,078 --> 00:39:17,210
Okay. I get the mastering detail on

988
00:39:17,212 --> 00:39:18,144
the screen at the same time.

989
00:39:19,948 --> 00:39:22,248
Sound good? Now clicking this doesn't seem

990
00:39:22,250 --> 00:39:23,916
to do anything, okay.

991
00:39:23,918 --> 00:39:25,150
So we're gonna have to fix that.

992
00:39:25,152 --> 00:39:27,218
And let's go look at it on an iPhone see what it

993
00:39:27,220 --> 00:39:28,186
looks like there?

994
00:39:32,325 --> 00:39:37,961
I didn't hit the button sorry Alright, here's my iPhone.

995
00:39:37,963 --> 00:39:39,629
Okay?

996
00:39:39,631 --> 00:39:40,129
Oh.

997
00:39:40,131 --> 00:39:40,663
Wait.

998
00:39:40,665 --> 00:39:42,064
How do I?

999
00:39:42,066 --> 00:39:43,298
I can't see the face.

1000
00:39:43,300 --> 00:39:44,866
Okay? Let's try landscape.

1001
00:39:44,868 --> 00:39:46,000
That doesn't work either.

1002
00:39:46,002 --> 00:39:48,402
So there's no way to get at the face, right now.

1003
00:39:48,404 --> 00:39:50,471
Absolutely no way to get the face.

1004
00:39:50,473 --> 00:39:51,471
And why is that?

1005
00:39:51,473 --> 00:39:53,239
Well that's because again on phone which is

1006
00:39:53,241 --> 00:39:55,675
a compact size trait device.

1007
00:39:55,677 --> 00:39:58,944
Split view doesn't put things side by side,

1008
00:39:58,946 --> 00:40:01,313
it just doesn't do that, okay.

1009
00:40:01,315 --> 00:40:05,150
Now if we do iPhone6 Plus.

1010
00:40:05,152 --> 00:40:05,917
Try that one.

1011
00:40:10,389 --> 00:40:12,623
It's kind of a hybrid.

1012
00:40:12,624 --> 00:40:14,858
First of all it's such high resolution that even the small

1013
00:40:14,860 --> 00:40:16,626
versions, the smallest I can get it.

1014
00:40:16,628 --> 00:40:17,593
But see, in portrait,

1015
00:40:17,595 --> 00:40:19,328
I have the same problem as another iPhone.

1016
00:40:19,330 --> 00:40:21,797
There's just no way for me to get to the face.

1017
00:40:21,799 --> 00:40:23,882
Cuz it's no way to,

1018
00:40:23,883 --> 00:40:25,966
if I try sliding out from the side, nothing happens.

1019
00:40:25,969 --> 00:40:27,602
Okay? Because in portrait mode,

1020
00:40:27,604 --> 00:40:30,271
the iPhone 6 Plus works like an iPhone.

1021
00:40:30,273 --> 00:40:32,773
But in landscape, on iPhone 6 Plus,

1022
00:40:32,775 --> 00:40:34,941
it's big enough, that it can actually show them both.

1023
00:40:36,244 --> 00:40:36,943
Okay?

1024
00:40:36,945 --> 00:40:38,378
So that's kinda cool.

1025
00:40:38,379 --> 00:40:39,812
Alright but it still doesn't work.

1026
00:40:39,814 --> 00:40:41,680
Okay.

1027
00:40:41,682 --> 00:40:43,448
So why does this not work?

1028
00:40:43,450 --> 00:40:46,718
Well, it doesn't work because we have no segues.

1029
00:40:46,720 --> 00:40:50,554
We don't describe how to get from one of

1030
00:40:50,556 --> 00:40:52,623
these things to another.

1031
00:40:52,625 --> 00:40:53,957
So let's put some segues in.

1032
00:40:53,959 --> 00:40:55,325
What we're gonna do,

1033
00:40:55,327 --> 00:40:57,627
well, actually before we do the segues,

1034
00:40:57,629 --> 00:41:01,597
let's fix this problem with the iPhone not working.

1035
00:41:01,599 --> 00:41:04,500
Okay, let's fix the problem where we can't see the iPhone.

1036
00:41:04,502 --> 00:41:07,369
In order to fix that, what we talked about in the slides,

1037
00:41:07,371 --> 00:41:09,704
by putting this guy in a navigation controller.

1038
00:41:09,706 --> 00:41:10,738
Okay.

1039
00:41:10,740 --> 00:41:12,039
So let's go do that.

1040
00:41:12,041 --> 00:41:14,441
We're gonna do that with embed.

1041
00:41:14,443 --> 00:41:16,276
In Navigation Controller.

1042
00:41:16,278 --> 00:41:18,745
It puts it in a navigation controller, okay.

1043
00:41:18,747 --> 00:41:21,714
Now when we run on the iPhone, we'll just run it in normal

1044
00:41:21,716 --> 00:41:28,253
iPhone, you'll see that we get the face.

1045
00:41:28,255 --> 00:41:29,354
Okay? Awesome.

1046
00:41:29,356 --> 00:41:32,057
And we can go back to the master and

1047
00:41:32,059 --> 00:41:33,458
there's no way to get back to the detail.

1048
00:41:33,460 --> 00:41:34,992
Okay.

1049
00:41:34,994 --> 00:41:36,727
So now we definitely need those segues.

1050
00:41:36,729 --> 00:41:39,930
We need these buttons to cause a segue to happen to

1051
00:41:39,932 --> 00:41:40,663
the detail.'

1052
00:41:40,665 --> 00:41:42,432
Okay. So

1053
00:41:42,433 --> 00:41:44,200
that's what we're gonna do next.

1054
00:41:44,202 --> 00:41:46,435
And actually, let's take a second here and

1055
00:41:46,437 --> 00:41:48,070
show what this looks like on the iPad.

1056
00:41:49,540 --> 00:41:52,007
We added the navigation controller here.

1057
00:41:52,009 --> 00:41:54,175
Let's see what effect it had on the iPad.

1058
00:41:54,177 --> 00:41:57,945
And the answer is, that the master now has a title.

1059
00:41:59,381 --> 00:42:00,547
See?

1060
00:42:00,549 --> 00:42:01,948
Has a title there.

1061
00:42:01,950 --> 00:42:03,616
And this kind of would be nice,

1062
00:42:03,618 --> 00:42:05,701
even to put a title in here.

1063
00:42:05,702 --> 00:42:07,785
So we can go over here, and actually double click on here,

1064
00:42:07,788 --> 00:42:13,258
and put in psychologist.

1065
00:42:13,260 --> 00:42:15,159
Put a title in there.

1066
00:42:15,161 --> 00:42:17,461
Notice, look what happened to our question.

1067
00:42:17,463 --> 00:42:18,729
It kind of got obscured.

1068
00:42:18,731 --> 00:42:20,697
Do you see that?

1069
00:42:20,699 --> 00:42:22,132
By this title.

1070
00:42:22,134 --> 00:42:23,533
And actually we have a warning up here.

1071
00:42:23,535 --> 00:42:24,834
Do you see that warning?

1072
00:42:24,836 --> 00:42:26,135
That warning is about that.

1073
00:42:26,137 --> 00:42:26,835
Let's click on it.

1074
00:42:26,837 --> 00:42:28,570
It says, the frame for

1075
00:42:28,571 --> 00:42:30,304
what you see in your dreams will be different at run time.

1076
00:42:30,307 --> 00:42:34,141
That's because it's going to automatically move it down

1077
00:42:34,143 --> 00:42:35,476
underneath this.

1078
00:42:35,478 --> 00:42:38,245
And we can make that happen in our storyboard by going over

1079
00:42:38,247 --> 00:42:41,581
here, clicking here, doing what we always do when we

1080
00:42:41,583 --> 00:42:43,583
have a problem with our auto layout,

1081
00:42:43,585 --> 00:42:45,751
fix our misplacement and it will move it back down.

1082
00:42:45,753 --> 00:42:46,318
Okay.

1083
00:42:48,088 --> 00:42:51,056
Alright so this is looking good.

1084
00:42:51,058 --> 00:42:53,591
So let's get this segue business happening.

1085
00:42:53,593 --> 00:42:56,794
So I told you the segues are done just with control drag.

1086
00:42:56,796 --> 00:42:58,128
Okay.

1087
00:42:58,130 --> 00:43:01,598
When we click one of these things I wanna segue to

1088
00:43:01,600 --> 00:43:04,401
a face that shows the diagnosis based on

1089
00:43:04,403 --> 00:43:05,935
what you saw in your dreams.

1090
00:43:05,937 --> 00:43:08,037
So we do this just with Ctrl+drag.

1091
00:43:08,039 --> 00:43:10,906
So let's Ctrl+drag from Golden Bear.

1092
00:43:10,908 --> 00:43:12,925
Down here.

1093
00:43:12,926 --> 00:43:14,943
See how it's grabbing on to this MVC down here?

1094
00:43:14,945 --> 00:43:16,945
So we'll let go and

1095
00:43:16,946 --> 00:43:18,946
it says what kind of segue do you want?

1096
00:43:18,949 --> 00:43:21,616
And we're going to do show detail because we want it to

1097
00:43:21,618 --> 00:43:24,385
show it in the detail side of the split view, and

1098
00:43:24,387 --> 00:43:26,653
in the navigation control it will just push it.

1099
00:43:26,655 --> 00:43:29,222
But the show detail will do the split view thing.

1100
00:43:29,224 --> 00:43:30,891
So, there we go and

1101
00:43:30,892 --> 00:43:32,559
look what happened there we got this little segue.

1102
00:43:32,561 --> 00:43:34,293
If we inspect it, over here,

1103
00:43:34,295 --> 00:43:35,695
you can see there is its identifier.

1104
00:43:35,697 --> 00:43:36,762
You can even change what kind of

1105
00:43:36,764 --> 00:43:38,864
segue it is in the future if you wanted.

1106
00:43:38,866 --> 00:43:41,566
But this identifier is the Golden Bear one.

1107
00:43:41,568 --> 00:43:46,437
I'm going to call this the sad identifier, okay.

1108
00:43:46,439 --> 00:43:48,339
So whenever this goes through,

1109
00:43:48,341 --> 00:43:50,974
this identifier for this segue, is called sad.

1110
00:43:50,976 --> 00:43:52,108
And we'll do the same thing here for

1111
00:43:52,110 --> 00:43:56,012
Dancing Tree, okay, show detail again.

1112
00:43:56,014 --> 00:43:59,915
And dancing trees segue, which is right here.

1113
00:43:59,917 --> 00:44:01,783
We're gonna call this one, happy.

1114
00:44:01,785 --> 00:44:03,001
That's the happy one.

1115
00:44:03,002 --> 00:44:04,218
Now, I told you these should be verbs so

1116
00:44:04,221 --> 00:44:06,254
maybe this should be,

1117
00:44:06,255 --> 00:44:08,288
show happy diagnosis, show sad diagnosis.

1118
00:44:08,291 --> 00:44:10,925
But for demo it's less typing later,

1119
00:44:10,927 --> 00:44:12,159
I'm just putting happy in that.

1120
00:44:12,161 --> 00:44:13,860
How about buckeye.

1121
00:44:13,862 --> 00:44:15,495
Okay, we'll say show detail.

1122
00:44:15,497 --> 00:44:17,764
And for the buckeye one.

1123
00:44:17,766 --> 00:44:18,564
Where is that one?

1124
00:44:18,566 --> 00:44:19,732
That's this one I guess.

1125
00:44:19,734 --> 00:44:22,701
We'll say meh.

1126
00:44:22,703 --> 00:44:23,802
Okay, not happy or sad.

1127
00:44:24,838 --> 00:44:27,304
Okay, and you can move these things around.

1128
00:44:27,306 --> 00:44:29,206
Right, if you're having trouble selecting them or

1129
00:44:29,208 --> 00:44:32,976
whatever, you can move them around to get at them better.

1130
00:44:32,978 --> 00:44:34,427
Okay.

1131
00:44:34,428 --> 00:44:35,877
So this is what our storyboard looks like now.

1132
00:44:35,880 --> 00:44:39,848
Let's make some more space so you can see it, right here.

1133
00:44:39,850 --> 00:44:41,149
And we've got our detail.

1134
00:44:41,151 --> 00:44:43,818
Let me whip this up here.

1135
00:44:43,820 --> 00:44:47,055
And we got our master and we've got the segues now.

1136
00:44:47,057 --> 00:44:49,890
So let's go ahead and run, and see if this works.

1137
00:44:49,892 --> 00:44:52,343
Let's go.

1138
00:44:52,344 --> 00:44:54,795
On i-Pad, okay, huh, does not appear to work on the i-Pad,

1139
00:44:54,797 --> 00:44:56,663
huh, that's interesting.

1140
00:44:56,665 --> 00:44:58,297
Alright, let's try it on the i-Phone.

1141
00:45:09,977 --> 00:45:11,109
All right, so there's iPhone.

1142
00:45:11,111 --> 00:45:13,078
So we're at the face, let's go back to the master.

1143
00:45:13,080 --> 00:45:14,696
Here's the master,

1144
00:45:14,697 --> 00:45:16,313
notice we have this nice title up here now, Psychologist.

1145
00:45:16,316 --> 00:45:17,682
Let's do this.

1146
00:45:17,683 --> 00:45:19,049
Oh, it's doing something, but,

1147
00:45:19,052 --> 00:45:20,851
it's not actually showing the diagnosis.

1148
00:45:20,853 --> 00:45:24,688
But at least it's segueing to the other one.

1149
00:45:24,690 --> 00:45:26,406
Okay?

1150
00:45:26,407 --> 00:45:28,123
So the iPad was working too, it's just there was nothing to

1151
00:45:28,126 --> 00:45:31,093
see, because there was already a detail there and

1152
00:45:31,095 --> 00:45:32,995
it replaced that detail with a new one.

1153
00:45:32,997 --> 00:45:36,565
But we didn't prepare that thing, so it doesn't know how

1154
00:45:36,567 --> 00:45:38,800
much to smile, it doesn't know how to show the diagnosis,

1155
00:45:38,802 --> 00:45:40,501
cuz we have to prepare it.

1156
00:45:40,503 --> 00:45:42,570
Okay, so preparing is the next step.

1157
00:45:42,572 --> 00:45:44,371
We do the preparation for

1158
00:45:44,373 --> 00:45:46,740
these segues in this ViewController.

1159
00:45:46,742 --> 00:45:49,476
This is the ViewController that's instigating the segue,

1160
00:45:49,478 --> 00:45:52,145
so here's where we have to put our preparation.

1161
00:45:52,147 --> 00:45:54,814
This is the PsychologistViewController.

1162
00:45:54,816 --> 00:45:56,915
Okay, so we're gonna go over here to

1163
00:45:56,917 --> 00:46:01,152
our PsychologistViewController code, delete that stuff.

1164
00:46:02,722 --> 00:46:04,155
Okay, here's PsychologistViewController.

1165
00:46:04,157 --> 00:46:07,291
And all we have to do here is implement that one prepare

1166
00:46:07,293 --> 00:46:08,992
method, okay.

1167
00:46:08,994 --> 00:46:14,097
So it's called prepareForSegue.

1168
00:46:14,099 --> 00:46:17,767
'Kay, I'll let it type it out for me by hitting tab.

1169
00:46:17,769 --> 00:46:19,868
And you can see there's the two arguments, the segue and

1170
00:46:19,870 --> 00:46:21,269
the sender.

1171
00:46:21,271 --> 00:46:25,140
Now I'm gonna just say here, if the segue's

1172
00:46:25,142 --> 00:46:30,044
destination view controller, sorry, if I can let HVC,

1173
00:46:30,046 --> 00:46:35,982
HappinessViewController, equal the DestinationViewController

1174
00:46:35,984 --> 00:46:40,353
as a HappinessViewController, then I'm gonna do

1175
00:46:40,355 --> 00:46:44,290
something based on what the identifier is.

1176
00:46:44,292 --> 00:46:46,658
Now, if this segue, if we have a prepareForSegue and we're

1177
00:46:46,660 --> 00:46:49,227
segueing to something that's not a HappinessViewController,

1178
00:46:49,229 --> 00:46:50,662
then this if let is not gonna happen.

1179
00:46:50,664 --> 00:46:52,964
So none of what I'm gonna type right here is gonna happen,

1180
00:46:52,966 --> 00:46:54,398
and that's perfectly fine.

1181
00:46:54,400 --> 00:46:57,835
You can kinda do the if let on what kind of

1182
00:46:57,837 --> 00:46:59,569
thing you're segueing to, or

1183
00:46:59,571 --> 00:47:01,504
on the identifier, one on the outside,

1184
00:47:01,506 --> 00:47:04,807
one on the inside, kind of depends on what's going on.

1185
00:47:04,809 --> 00:47:07,109
But in this case, I'm going to do the if let for

1186
00:47:07,111 --> 00:47:09,745
my destinationViewController on the outside, and then I'm

1187
00:47:09,747 --> 00:47:15,116
going to do the if let on the identifier on the inside.

1188
00:47:15,118 --> 00:47:17,251
Okay? So if I had a segue to

1189
00:47:17,253 --> 00:47:20,954
a happiness controller that had no identifier set,

1190
00:47:20,956 --> 00:47:23,123
then we would do nothing.

1191
00:47:23,125 --> 00:47:24,824
But if it's set, we're going to go in here,

1192
00:47:24,826 --> 00:47:26,192
we'll switch on it.

1193
00:47:26,194 --> 00:47:27,727
So let's switch on identifier.

1194
00:47:29,130 --> 00:47:33,431
If it is the sad identifier, okay,

1195
00:47:33,433 --> 00:47:38,402
the sad segue, then let's set our hvc's happiness to 0.

1196
00:47:40,773 --> 00:47:45,308
Okay, so here's where I'm preparing, this newly created

1197
00:47:45,310 --> 00:47:48,044
HappinessViewController to be displayed on screen.

1198
00:47:49,280 --> 00:47:52,014
Okay, and if it's the happy segue,

1199
00:47:52,016 --> 00:47:55,717
then we'll set the happiness to 100.

1200
00:47:55,719 --> 00:47:57,952
And then, actually for

1201
00:47:57,953 --> 00:48:00,186
anything else, I'm just gonna set the happiness to 50.

1202
00:48:00,189 --> 00:48:02,089
Okay, something in the middle.

1203
00:48:03,559 --> 00:48:05,959
Okay, so that's it, that's all I have to do here,

1204
00:48:05,961 --> 00:48:08,995
that's all my ViewController needs to be prepared.

1205
00:48:08,997 --> 00:48:11,831
You know, if I had other things in here, I could

1206
00:48:11,833 --> 00:48:15,034
set other properties, but this is all this one needs.

1207
00:48:15,036 --> 00:48:15,934
Okay?

1208
00:48:15,936 --> 00:48:17,102
So it's prepared.

1209
00:48:17,103 --> 00:48:18,269
So let's go ahead and run this.

1210
00:48:18,271 --> 00:48:19,771
This should all work, right?

1211
00:48:19,773 --> 00:48:20,871
It should be no problems.

1212
00:48:21,807 --> 00:48:23,273
Okay. Here's our psychologist.

1213
00:48:23,275 --> 00:48:24,574
Let's try dancing tree.

1214
00:48:24,576 --> 00:48:25,875
Oh, crashed our program.

1215
00:48:25,877 --> 00:48:29,078
All right, kind of told you I was going to do this.

1216
00:48:29,080 --> 00:48:30,779
Why did our program crash?

1217
00:48:30,781 --> 00:48:32,280
Well it says unexpected,

1218
00:48:32,282 --> 00:48:34,416
I'm looking in the console down here.

1219
00:48:34,418 --> 00:48:36,451
You should always look in the console when it crashes.

1220
00:48:36,453 --> 00:48:37,385
Okay? It's the first place

1221
00:48:37,387 --> 00:48:39,537
you want to look.

1222
00:48:39,538 --> 00:48:41,688
This says unexpected found nil while unwrapping an optional.

1223
00:48:41,691 --> 00:48:45,492
Okay, so I accessed some optional that was nil.

1224
00:48:45,494 --> 00:48:46,759
So that's bad.

1225
00:48:46,761 --> 00:48:48,945
Where did I do that?

1226
00:48:48,946 --> 00:48:51,130
Right here in updateUI, in HappinessViewController,

1227
00:48:51,132 --> 00:48:52,264
HappinessViewController updateUI.

1228
00:48:52,266 --> 00:48:56,935
Well, let's see, what in this line might be nil?

1229
00:48:56,937 --> 00:48:58,803
Well, of course, it's the only thing that could be nil,

1230
00:48:58,805 --> 00:49:01,172
which is the faceView is nil.

1231
00:49:02,108 --> 00:49:03,507
What is the faceView?

1232
00:49:03,509 --> 00:49:05,041
It's this outlet right here.

1233
00:49:05,043 --> 00:49:08,411
Okay, we can also, by the way, go over here and

1234
00:49:08,413 --> 00:49:10,012
find out how we got here.

1235
00:49:10,014 --> 00:49:11,780
So we got here because someone was setting our

1236
00:49:11,782 --> 00:49:13,648
model into the property observer,

1237
00:49:13,650 --> 00:49:17,852
we wanted to update UI, and we got there from preparation.

1238
00:49:17,854 --> 00:49:18,919
So here we are preparing,

1239
00:49:18,921 --> 00:49:21,121
we're trying to prepare this new MVC, and

1240
00:49:21,123 --> 00:49:24,658
it sets the model to be something,

1241
00:49:24,660 --> 00:49:28,761
that updates the UI, and we get here and we crash.

1242
00:49:28,763 --> 00:49:30,696
And why is faceView nil right there?

1243
00:49:30,698 --> 00:49:33,165
Because as I said in red,

1244
00:49:33,167 --> 00:49:36,201
when you're preparing the outlets have not been set.

1245
00:49:36,203 --> 00:49:39,337
So this faceView outlet, down here, has not been set.

1246
00:49:39,339 --> 00:49:42,240
So, you know, it's an implicit unwrapped optional, but

1247
00:49:42,242 --> 00:49:45,776
it's still an optional, and it has not been set yet.

1248
00:49:45,778 --> 00:49:47,544
Okay, so how are we going to get around this?

1249
00:49:47,546 --> 00:49:51,348
Well, luckily in our case, whenever we set, if we set our

1250
00:49:51,350 --> 00:49:54,150
model and we try to update the UI and the faceView's not

1251
00:49:54,152 --> 00:49:56,819
even connected yet, well, we can just ignore it then,

1252
00:49:56,821 --> 00:49:59,989
because obviously the faceView is up to date because it's

1253
00:49:59,991 --> 00:50:01,623
not even hooked up.

1254
00:50:01,625 --> 00:50:04,359
So we can just use optional chaining here and

1255
00:50:04,361 --> 00:50:05,593
just put a question mark there.

1256
00:50:06,563 --> 00:50:09,430
Right, and what that says, if this thing is nil,

1257
00:50:09,432 --> 00:50:11,298
than just ignore the rest of this statement.

1258
00:50:11,300 --> 00:50:13,033
Okay.

1259
00:50:13,035 --> 00:50:17,470
So, one thing you'll probably end up doing a lot of times

1260
00:50:17,472 --> 00:50:20,606
is, in the things that could be called from a prepare,

1261
00:50:20,608 --> 00:50:22,775
you might be putting this optional chaining in.

1262
00:50:22,777 --> 00:50:25,077
Or checking, if base view does not equal nil,

1263
00:50:25,079 --> 00:50:28,046
then do something.

1264
00:50:28,048 --> 00:50:29,013
Okay?

1265
00:50:29,015 --> 00:50:29,847
So that should fix that.

1266
00:50:29,849 --> 00:50:32,316
Let's go ahead and run this.

1267
00:50:32,318 --> 00:50:33,150
Here it is.

1268
00:50:33,152 --> 00:50:34,050
Let's go back.

1269
00:50:34,052 --> 00:50:36,452
Dancing tree, very happy.

1270
00:50:36,454 --> 00:50:38,788
Golden bear, very unhappy.

1271
00:50:38,790 --> 00:50:40,389
Buckeye?

1272
00:50:40,391 --> 00:50:41,657
Okay.

1273
00:50:41,658 --> 00:50:42,924
Working fine, let's go take a look, and

1274
00:50:42,926 --> 00:50:45,860
let's go look in landscape here.

1275
00:50:45,862 --> 00:50:47,161
Golden Bear, working fine.

1276
00:50:47,163 --> 00:50:52,232
Notice that this MVC underlaps this title bar up here.

1277
00:50:52,234 --> 00:50:56,002
You can actually control that in storyboard if you inspect

1278
00:50:56,004 --> 00:50:57,637
the MVC, you can click on there,

1279
00:50:57,639 --> 00:51:01,974
say do not go under thing above me.

1280
00:51:01,976 --> 00:51:03,141
Also notice that in landscape,

1281
00:51:03,143 --> 00:51:05,343
you get a little smaller title bar up here,

1282
00:51:05,345 --> 00:51:07,412
which is kind of nice.

1283
00:51:07,414 --> 00:51:08,813
Okay.

1284
00:51:08,815 --> 00:51:10,347
But back in here, you get the bigger one,

1285
00:51:10,349 --> 00:51:13,650
because you're getting the carrier and the time up here.

1286
00:51:13,652 --> 00:51:16,686
Okay, let's go look at it on the iPad.

1287
00:51:24,429 --> 00:51:27,496
Okay, here's this, I can slide this thing out from the right,

1288
00:51:27,498 --> 00:51:30,599
Golden Bear, Dancing Tree, Buckeye, working great.

1289
00:51:30,601 --> 00:51:32,901
We can go over here.

1290
00:51:32,903 --> 00:51:36,537
Golden Bear, Dancing Tree, Buckeye.

1291
00:51:36,539 --> 00:51:39,023
Okay?

1292
00:51:39,024 --> 00:51:41,508
So pretty straightforward, the stuff is all pretty easy to

1293
00:51:41,510 --> 00:51:43,343
envisualize in your storyboard,

1294
00:51:43,345 --> 00:51:46,513
when you're looking at the storyboard it's pretty clear,

1295
00:51:46,515 --> 00:51:50,649
once you understand how these connections happen, to see

1296
00:51:50,651 --> 00:51:51,684
what's going on over here.

1297
00:51:52,920 --> 00:51:58,122
Okay, so one other thing I want to do here is make,

1298
00:51:58,124 --> 00:52:03,694
let me go back to my simulator.

1299
00:52:03,696 --> 00:52:05,629
Look at this guy over here.

1300
00:52:05,631 --> 00:52:06,963
This guy doesn't get a title.

1301
00:52:07,966 --> 00:52:11,400
That's kind of a bummer, that he doesn't get a title right

1302
00:52:11,402 --> 00:52:13,268
there and he does on the iPhone.

1303
00:52:13,270 --> 00:52:15,170
Right, if you remember on the iPhone, he had a title,

1304
00:52:15,172 --> 00:52:16,371
it was blank, but he had a title.

1305
00:52:16,373 --> 00:52:20,208
So I wanna give this guy a title on the iPad as well.

1306
00:52:20,210 --> 00:52:23,644
So I'm gonna do that by just selecting it here and

1307
00:52:23,646 --> 00:52:27,314
saying Embed In > Navigation Controller.

1308
00:52:27,316 --> 00:52:28,382
So I put this guy in

1309
00:52:28,383 --> 00:52:29,449
a Navigation Controller too, down here.

1310
00:52:31,019 --> 00:52:31,884
Okay?

1311
00:52:31,886 --> 00:52:34,286
So then, I can have a title.

1312
00:52:34,288 --> 00:52:37,022
Now, I could click here to set the title, right here I

1313
00:52:37,024 --> 00:52:39,324
could say diagnosis or something like that,

1314
00:52:39,326 --> 00:52:41,726
but actually I am going to have the title be set in code.

1315
00:52:41,728 --> 00:52:44,995
What I'm going to do is, every time someone says for my model

1316
00:52:44,997 --> 00:52:47,898
in my HappinessViewController, when I update the UI,

1317
00:52:47,900 --> 00:52:55,071
I'm going to say my title equals my happiness.

1318
00:52:55,073 --> 00:52:56,973
So I'm just gonna put that integer,

1319
00:52:56,975 --> 00:52:58,641
which is my happiness, as my title.

1320
00:52:58,643 --> 00:53:01,209
So I'm gonna put that in here let's see if that works.

1321
00:53:03,380 --> 00:53:05,446
So we run, I've got a title.

1322
00:53:05,448 --> 00:53:06,847
Doesn't look I've got there, but

1323
00:53:06,849 --> 00:53:12,786
no one has set my happiness yet, so that makes sense.

1324
00:53:12,788 --> 00:53:13,586
Oh, but it looks like I've

1325
00:53:13,588 --> 00:53:15,521
broken something by doing that.

1326
00:53:15,523 --> 00:53:16,655
This doesn't work.

1327
00:53:16,657 --> 00:53:17,856
Huh.

1328
00:53:17,858 --> 00:53:19,691
Why doesn't this work?

1329
00:53:19,693 --> 00:53:23,928
Well, the reason this doesn't work is because these segues

1330
00:53:23,930 --> 00:53:27,765
are seguing now to a Navigation Controller.

1331
00:53:27,767 --> 00:53:30,567
They're not seguing directly to a HappinessViewController.

1332
00:53:30,569 --> 00:53:33,437
So this prepare that we have right here,

1333
00:53:33,439 --> 00:53:36,172
this very first line is going to not work.

1334
00:53:36,174 --> 00:53:37,940
Because the destinationViewController is

1335
00:53:37,942 --> 00:53:39,342
no longer a HappinessController,

1336
00:53:39,344 --> 00:53:40,676
it's a NavigationController.

1337
00:53:40,678 --> 00:53:43,779
Everyone understand that?

1338
00:53:43,781 --> 00:53:45,080
So how can we deal with that?

1339
00:53:45,082 --> 00:53:47,482
Well, that's actually quite easy to deal with.

1340
00:53:47,484 --> 00:53:51,285
I'm gonna create a variable here called destination, which

1341
00:53:51,287 --> 00:53:56,857
I'm gonna set equal to the destinationViewController as

1342
00:53:56,859 --> 00:53:58,792
a UIViewController,

1343
00:53:58,794 --> 00:54:01,728
cuz I know it's a UIViewController of some sort.

1344
00:54:01,730 --> 00:54:06,398
And then I'm gonna say, if I can let navCon equal

1345
00:54:06,400 --> 00:54:11,269
the destination as a UI Navigation Controller,

1346
00:54:11,271 --> 00:54:14,505
okay, then I'm going to set the destination to be the nav

1347
00:54:14,507 --> 00:54:17,541
cons, and what I want is the visible ViewController,

1348
00:54:17,543 --> 00:54:19,743
the one on top of the stack.

1349
00:54:19,745 --> 00:54:22,212
Right?

1350
00:54:22,213 --> 00:54:24,680
So I'm going to say, .visibleViewController.

1351
00:54:24,683 --> 00:54:27,017
So visibleViewController is just a property in

1352
00:54:27,019 --> 00:54:29,252
UINavigationController that returns to the one

1353
00:54:29,254 --> 00:54:30,470
that's on top of the stack,

1354
00:54:30,471 --> 00:54:31,687
which is going to be HappinessViewController,

1355
00:54:31,689 --> 00:54:33,789
because it's the only one on the stack.

1356
00:54:33,791 --> 00:54:35,307
Okay. And

1357
00:54:35,308 --> 00:54:36,824
then here, instead of saying destinationViewController

1358
00:54:36,827 --> 00:54:38,493
here, I'll just say destination.

1359
00:54:39,662 --> 00:54:41,762
So now, if we come in here and

1360
00:54:41,764 --> 00:54:43,163
this is the HappinessViewController,

1361
00:54:43,165 --> 00:54:45,065
in other words, I don't have the navigation controller,

1362
00:54:45,067 --> 00:54:46,366
then this is not even going to happen.

1363
00:54:46,368 --> 00:54:47,567
And so it's fine.

1364
00:54:47,569 --> 00:54:48,601
This will work.

1365
00:54:48,603 --> 00:54:50,069
Otherwise, if it's a navigation controller,

1366
00:54:50,071 --> 00:54:52,537
I'm going to pull the HappinessViewController out of

1367
00:54:52,539 --> 00:54:54,673
it, and then this'll work again.

1368
00:54:54,675 --> 00:54:55,707
So it would have worked in either case.

1369
00:54:55,709 --> 00:54:58,409
So this is nice, in your prepares,

1370
00:54:58,411 --> 00:55:01,211
to make it so that if you ever think that the thing you're

1371
00:55:01,213 --> 00:55:03,680
segueing to might be wrapped in a navigation controller,

1372
00:55:03,682 --> 00:55:05,949
this will make it so it'll work either way.

1373
00:55:05,951 --> 00:55:07,417
So later, if you decide to unwrap it or

1374
00:55:07,419 --> 00:55:08,851
whatever, this'll work.

1375
00:55:08,853 --> 00:55:09,752
So let's try this.

1376
00:55:12,089 --> 00:55:13,705
All right, so

1377
00:55:13,706 --> 00:55:15,322
we've got this Golden Bear, there's the title and

1378
00:55:15,325 --> 00:55:19,460
it's working, 100, Buckeye, that's working too.

1379
00:55:19,462 --> 00:55:20,027
Okay?

1380
00:55:21,397 --> 00:55:22,028
Make sense there?

1381
00:55:23,998 --> 00:55:26,899
All right, the last thing I want to show here is

1382
00:55:27,868 --> 00:55:30,869
briefly how to do a segue in code.

1383
00:55:30,871 --> 00:55:33,838
Because this segue we did with control dragging in

1384
00:55:33,840 --> 00:55:35,806
the storyboard entirely.

1385
00:55:35,808 --> 00:55:38,308
So how would we do a segue in code?

1386
00:55:38,310 --> 00:55:40,110
So let's do a different segue here,

1387
00:55:40,112 --> 00:55:44,347
I'm gonna add another thing to this.

1388
00:55:45,750 --> 00:55:51,353
Let's go down here and add a new button right here.

1389
00:55:51,355 --> 00:55:53,555
Put it in here, I'm going to call this Nothing.

1390
00:55:53,557 --> 00:55:55,189
So what do I see in my dreams?

1391
00:55:55,191 --> 00:55:55,973
Nothing.

1392
00:55:55,974 --> 00:55:56,756
I don't see anything.

1393
00:55:56,759 --> 00:55:58,659
Okay and I am going to put that here.

1394
00:55:58,661 --> 00:56:02,229
I'm going to try Reset to Suggested Constraints.

1395
00:56:02,231 --> 00:56:03,596
I'm going to check to see what it did.

1396
00:56:03,598 --> 00:56:05,832
That looks perfectly fine to me.

1397
00:56:05,834 --> 00:56:07,767
I'm rocking!

1398
00:56:07,768 --> 00:56:09,701
But instead of control dragging from here to make

1399
00:56:09,704 --> 00:56:12,738
this segue, I'm just going to create a normal target

1400
00:56:12,740 --> 00:56:13,338
action method.

1401
00:56:14,274 --> 00:56:16,007
Okay.

1402
00:56:16,008 --> 00:56:17,741
So this is I'm just gonna make this be a completely normal

1403
00:56:17,744 --> 00:56:21,412
button that's going to do target action from here.

1404
00:56:21,414 --> 00:56:23,147
Okay, so let's make some space over here in our

1405
00:56:23,149 --> 00:56:24,247
PsychologistViewController.

1406
00:56:24,249 --> 00:56:27,384
I'm gonna Ctrl+drag over to here.

1407
00:56:27,386 --> 00:56:28,651
Okay, it's gonna be an action.

1408
00:56:28,653 --> 00:56:32,955
I'm gonna call it the nothing action.

1409
00:56:32,957 --> 00:56:36,358
I'm gonna have the center be a UI button, and Connect.

1410
00:56:36,360 --> 00:56:38,159
So now every time I click on Nothing,

1411
00:56:38,161 --> 00:56:41,863
it's going to do this target action right here.

1412
00:56:41,865 --> 00:56:44,899
And what I wanna do inside here is cause a segue

1413
00:56:44,901 --> 00:56:46,133
to happen.

1414
00:56:46,135 --> 00:56:48,302
Okay?

1415
00:56:48,303 --> 00:56:50,470
So base this segue in code, so how am I gonna do that?

1416
00:56:50,472 --> 00:56:55,575
Well, I still have to create the segue in the storyboard.

1417
00:56:55,577 --> 00:56:58,210
Okay, so I'm still going to go back here and

1418
00:56:58,212 --> 00:56:59,879
create the segue, but

1419
00:56:59,880 --> 00:57:01,547
the question is where do I create the segue from?

1420
00:57:01,549 --> 00:57:02,714
Where do I drag from?

1421
00:57:02,716 --> 00:57:05,550
Since I don't want this to directly cause it,

1422
00:57:05,552 --> 00:57:07,585
and the answer is, I drag from this little thing up here.

1423
00:57:07,587 --> 00:57:09,220
Do you see this little yellow guy?

1424
00:57:09,222 --> 00:57:12,256
This yellow thing represents the ViewController.

1425
00:57:12,258 --> 00:57:13,857
So, when you're setting up a segue that's gonna be

1426
00:57:13,859 --> 00:57:15,158
fired off in code,

1427
00:57:15,160 --> 00:57:18,061
you do the control drag from this little yellow thing.

1428
00:57:18,063 --> 00:57:19,895
So, let's go down here.

1429
00:57:19,897 --> 00:57:22,848
Okay?

1430
00:57:22,849 --> 00:57:25,800
I'm gonna take this guy and I'm gonna control drag over to

1431
00:57:25,803 --> 00:57:28,069
here, to this navigation controller.

1432
00:57:28,071 --> 00:57:30,371
Sorry for the screen resolution there.

1433
00:57:30,373 --> 00:57:33,074
It's still gonna be a show detail segue.

1434
00:57:33,076 --> 00:57:34,941
I'm going to now zoom out.

1435
00:57:37,312 --> 00:57:39,145
Okay, let's find this thing.

1436
00:57:39,147 --> 00:57:45,451
It's not that one, it's not that one, it's this one.

1437
00:57:45,453 --> 00:57:47,252
And so notice that when I select this one,

1438
00:57:47,254 --> 00:57:50,155
it's showing the whole view controller sending this, and

1439
00:57:50,157 --> 00:57:55,059
so we will call this the nothing segue.

1440
00:57:56,062 --> 00:57:58,128
Okay, so now we have this segue named nothing,

1441
00:57:58,130 --> 00:58:01,164
it's not hooked up to any button or anything like that.

1442
00:58:01,166 --> 00:58:05,335
Okay, but if I go over to my PsychologistViewController,

1443
00:58:05,337 --> 00:58:08,871
now in nothing I can say, let's make this nice and wide,

1444
00:58:08,873 --> 00:58:14,409
performSegueWithIdentifier the nothing segue.

1445
00:58:14,411 --> 00:58:17,946
And the sender, we could make it be the button or

1446
00:58:17,948 --> 00:58:20,348
we could make this actually be self, so

1447
00:58:20,350 --> 00:58:22,550
that the view control itself could be the sender.

1448
00:58:22,552 --> 00:58:24,284
Or we could make it be nil.

1449
00:58:24,286 --> 00:58:25,552
Okay?

1450
00:58:25,554 --> 00:58:27,787
But this sender, whatever we put here is just going to get

1451
00:58:27,789 --> 00:58:30,690
passed along when we get a chance to prepare.

1452
00:58:30,692 --> 00:58:33,893
Because this segue, even though we are executing it

1453
00:58:33,895 --> 00:58:36,428
from code, is still going to get a chance to prepare.

1454
00:58:36,430 --> 00:58:40,198
So if we went down here and said case nothing,

1455
00:58:40,200 --> 00:58:43,568
maybe the happiness there is not very happy,

1456
00:58:43,570 --> 00:58:46,838
okay, then you can still prepare down here.

1457
00:58:46,840 --> 00:58:48,572
So even though we are doing it in code,

1458
00:58:48,574 --> 00:58:49,640
it's still going to prepare.

1459
00:58:51,143 --> 00:58:52,909
All right, so let's go take a look at that.

1460
00:58:54,346 --> 00:58:56,896
Back to our iPad here.

1461
00:58:56,897 --> 00:58:59,447
So there's happy, sad, and here's nothing.

1462
00:58:59,450 --> 00:59:00,115
'Kay?

1463
00:59:02,185 --> 00:59:03,485
Make sense?

1464
00:59:03,486 --> 00:59:04,786
So you can do things from code.

1465
00:59:04,787 --> 00:59:06,087
Now why would you ever wanna do it in code?

1466
00:59:06,089 --> 00:59:09,156
Well, maybe you want to have a button clicked, and then,

1467
00:59:09,158 --> 00:59:10,724
depending on the state of something,

1468
00:59:10,726 --> 00:59:13,593
it'll do one segue versus doing another segue.

1469
00:59:13,595 --> 00:59:16,329
So you can have a little if then there that performs one

1470
00:59:16,331 --> 00:59:17,830
of two different segues.

1471
00:59:17,832 --> 00:59:19,165
That's a classic reason you might want to

1472
00:59:19,167 --> 00:59:22,368
do segues in code

1473
00:59:22,369 --> 00:59:25,570
versus just control dragging directly from the button.

1474
00:59:25,572 --> 00:59:27,722
All right?

1475
00:59:27,723 --> 00:59:29,873
I believe that's all I wanted to cover today on that, yes.

1476
00:59:29,876 --> 00:59:34,145
So now we'll go talk about popovers, so

1477
00:59:34,147 --> 00:59:37,848
let's go back to our slides here.

1478
00:59:41,720 --> 00:59:42,885
All right, popovers.

1479
00:59:44,155 --> 00:59:49,057
So I don't talk about popovers with the other three, because

1480
00:59:49,059 --> 00:59:50,925
it's a little bit different, a popover's a little different.

1481
00:59:50,927 --> 00:59:53,861
So here is a UI that has a popover in it.

1482
00:59:53,863 --> 00:59:55,696
This is the calendar app.

1483
00:59:55,698 --> 00:59:58,298
And you can see the popover is that whole area there where

1484
00:59:58,300 --> 01:00:00,967
I'm searching in my calendar trying to find something.

1485
01:00:00,969 --> 01:00:03,587
Okay.

1486
01:00:03,588 --> 01:00:06,206
So that whole popover, that little lighter colored area in

1487
01:00:06,208 --> 01:00:09,742
the upper righthand corner, that is all one MVC.

1488
01:00:09,744 --> 01:00:14,046
It's the search for appointment MVC, okay?

1489
01:00:14,048 --> 01:00:17,649
So and it completely fills that popover space.

1490
01:00:17,651 --> 01:00:20,418
Now, notice that the popover also has kind of

1491
01:00:20,420 --> 01:00:21,386
a little arrow.

1492
01:00:21,387 --> 01:00:22,353
You see that tiny little arrow?

1493
01:00:22,355 --> 01:00:24,021
It's just like a little white triangle.

1494
01:00:24,023 --> 01:00:26,990
That's pointing to whatever caused this to come up.

1495
01:00:26,992 --> 01:00:28,509
So in this case,

1496
01:00:28,510 --> 01:00:30,027
that little thing that looks like a magnifying glass,

1497
01:00:30,029 --> 01:00:32,696
that's what the user must have pressed on in order to

1498
01:00:32,698 --> 01:00:36,298
have this pop-over for searching come up.

1499
01:00:36,300 --> 01:00:38,050
Right?

1500
01:00:38,051 --> 01:00:39,801
Now notice the rest of the screen here is gray,

1501
01:00:39,804 --> 01:00:41,269
except for the keyboard, is gray.

1502
01:00:41,271 --> 01:00:42,737
See it's kind of grayed out?

1503
01:00:42,739 --> 01:00:45,073
And it's also if you tried to click in there,

1504
01:00:45,075 --> 01:00:46,641
it wouldn't work.

1505
01:00:46,642 --> 01:00:48,208
Like if you tried to click on the Week button at the top,

1506
01:00:48,211 --> 01:00:50,678
or the Month button or the Year button it wouldn't work.

1507
01:00:50,680 --> 01:00:55,248
But what it would do is dismiss the popover, okay?

1508
01:00:55,250 --> 01:00:57,917
So that grey area, so you can see that it's not as

1509
01:00:57,919 --> 01:01:01,587
bad as take over the screen, but it's still the case that I

1510
01:01:01,589 --> 01:01:03,922
can only do what the popover is asking me to do.

1511
01:01:03,924 --> 01:01:06,024
I can't do anything else until I dismiss the popover but

1512
01:01:06,026 --> 01:01:08,493
it's just really, really easy to see what the rest of

1513
01:01:08,495 --> 01:01:10,862
what was going on before you brought the popover up,

1514
01:01:10,864 --> 01:01:13,864
and it's usually easy to get rid of the popover.

1515
01:01:13,866 --> 01:01:15,399
Now, the interesting thing about popover, and

1516
01:01:15,401 --> 01:01:16,900
the reason I talk about it differently,

1517
01:01:16,902 --> 01:01:19,002
is that it's not a UIViewController.

1518
01:01:20,071 --> 01:01:21,804
Okay. Popover is itself,

1519
01:01:21,806 --> 01:01:23,672
not a UIViewController.

1520
01:01:23,674 --> 01:01:25,657
It's brought on

1521
01:01:25,658 --> 01:01:27,641
screen using what's called a presentation controller.

1522
01:01:27,644 --> 01:01:29,811
And I'm not really going to talk about presentation

1523
01:01:29,813 --> 01:01:32,447
controller, just a little bit about the popover presentation

1524
01:01:32,449 --> 01:01:35,616
controller, but it's the underlying mechanism that all

1525
01:01:35,618 --> 01:01:39,053
of this stuff is based on, so popover doesn't really need to

1526
01:01:39,055 --> 01:01:42,322
have a view controller whose view is this MVC.

1527
01:01:43,291 --> 01:01:45,375
It can do it

1528
01:01:45,376 --> 01:01:47,460
purely with the presentation controller mechanism.

1529
01:01:47,462 --> 01:01:49,728
So let's talk about the popover then,

1530
01:01:49,730 --> 01:01:52,230
and how we make it work, because the interesting of

1531
01:01:52,232 --> 01:01:55,867
Power Popover that even though it's not its own MVC,

1532
01:01:55,869 --> 01:01:59,037
it still segues and all that stuff exactly the same.

1533
01:01:59,039 --> 01:02:01,906
You still Ctrl+drag to some view controller.

1534
01:02:01,908 --> 01:02:03,574
You still get to do prepare for segue.

1535
01:02:03,576 --> 01:02:05,776
It all looks exactly the same because it's still doing

1536
01:02:05,778 --> 01:02:07,844
segues even though it's not its own view controller.

1537
01:02:07,846 --> 01:02:10,546
It's still using segues to cause it to appear.

1538
01:02:12,283 --> 01:02:16,317
So, things to note when you're preparing for a segue here.

1539
01:02:16,319 --> 01:02:21,956
One is that inside your preparer you

1540
01:02:21,958 --> 01:02:25,259
can get ahold of what's called the presentation controller.

1541
01:02:25,261 --> 01:02:27,394
And the presentation controller for

1542
01:02:27,396 --> 01:02:30,964
a popover will tell you things like what's the button that

1543
01:02:30,966 --> 01:02:33,066
brought this popover up.

1544
01:02:33,068 --> 01:02:36,202
And you can even configure the presentation like I don't want

1545
01:02:36,204 --> 01:02:39,438
this popover to pop up to the left of anything.

1546
01:02:39,440 --> 01:02:42,007
I always want it on the right side of something.

1547
01:02:42,009 --> 01:02:43,742
So you can even control that.

1548
01:02:43,744 --> 01:02:47,311
And very interestingly using the presentation controller's

1549
01:02:47,313 --> 01:02:48,746
delegate, this is the first time we

1550
01:02:48,748 --> 01:02:50,948
have talked about a delegate in iOS in this class,

1551
01:02:50,950 --> 01:02:53,450
although we'll gonna talk about it in spades next week.

1552
01:02:55,787 --> 01:02:58,287
Using the presentation controller's delegate,

1553
01:02:58,289 --> 01:03:03,058
you can affect how the popover adapts to being on an iPhone.

1554
01:03:03,060 --> 01:03:07,962
So a popover on an iPad pops up like you saw in

1555
01:03:07,964 --> 01:03:09,663
the previous screen there.

1556
01:03:09,665 --> 01:03:11,265
A little window that pops up.

1557
01:03:11,267 --> 01:03:13,500
Well on the iPhone it adapts and

1558
01:03:13,502 --> 01:03:16,936
instead does modal, full-screen, okay?

1559
01:03:16,938 --> 01:03:21,207
So it doesn't pop up as a little thing on an iPhone.

1560
01:03:21,209 --> 01:03:22,375
And why is that?

1561
01:03:22,376 --> 01:03:23,542
Well, the iPhone's smaller and

1562
01:03:23,544 --> 01:03:26,678
so if the thing you're popping up is really big,

1563
01:03:26,680 --> 01:03:29,114
there might be no way to cram it in there and make it fit.

1564
01:03:30,183 --> 01:03:32,249
But if you present full screen modal,

1565
01:03:32,251 --> 01:03:33,817
it's definitely going to fit.

1566
01:03:33,819 --> 01:03:36,620
Okay, so it automatically does this.

1567
01:03:36,622 --> 01:03:38,688
iOS automatically does this adaptation for you,

1568
01:03:38,690 --> 01:03:41,457
just like it automatically adapts to split view and

1569
01:03:41,459 --> 01:03:44,260
navigation controller if you build your storyboard right

1570
01:03:44,262 --> 01:03:47,730
on iPhone, but using the delegate or the presentation

1571
01:03:47,732 --> 01:03:50,532
control, you can actually affect that adaptation.

1572
01:03:50,534 --> 01:03:53,134
Okay. So, here is a brief slide.

1573
01:03:53,136 --> 01:03:56,104
We'll have a brief slide that talks about that in a second.

1574
01:03:56,106 --> 01:03:58,906
But, first I want to show you how in prepare for segue you

1575
01:03:58,908 --> 01:04:01,809
get a hold of that popover presentation controller and

1576
01:04:01,811 --> 01:04:03,276
you can do something like set this delegate.

1577
01:04:03,278 --> 01:04:06,479
So this prepare for segue all of the green is basically

1578
01:04:06,481 --> 01:04:09,482
the same as you would have in any other prepare for segue.

1579
01:04:09,484 --> 01:04:12,952
But the yellow line there is where I am,

1580
01:04:12,954 --> 01:04:16,221
from the view controller that I'm segue-ing to,

1581
01:04:16,223 --> 01:04:19,524
I'm asking for it's popover presentation controller.

1582
01:04:19,526 --> 01:04:21,243
'Kay?

1583
01:04:21,244 --> 01:04:22,961
So this is an object, the presentation controller,

1584
01:04:22,963 --> 01:04:25,096
that will only come back non-nil, here,

1585
01:04:25,098 --> 01:04:27,665
if I'm being segued via popover.

1586
01:04:27,667 --> 01:04:29,199
If I'm being segued some other way,

1587
01:04:29,201 --> 01:04:32,469
like just pushing in a navigation controller, or

1588
01:04:32,471 --> 01:04:34,604
something like that, then this'll come back nil, and

1589
01:04:34,606 --> 01:04:36,673
I'm just gonna ignore it, cuz I do if let right there.

1590
01:04:37,842 --> 01:04:39,842
But if it is popover, then I make it this popover

1591
01:04:39,844 --> 01:04:41,209
presentation controller and if you go look in

1592
01:04:41,211 --> 01:04:43,912
the documentation for popover presentation controller,

1593
01:04:43,914 --> 01:04:45,813
you'll see it has some things you can configure about

1594
01:04:45,815 --> 01:04:48,582
the presentation like the permitted arrow directions,

1595
01:04:48,584 --> 01:04:49,583
that little white triangle.

1596
01:04:49,585 --> 01:04:51,184
Where is that allowed to point?

1597
01:04:51,186 --> 01:04:52,352
In what direction?

1598
01:04:52,354 --> 01:04:54,387
And you can also set yourself,

1599
01:04:54,389 --> 01:04:57,189
the controller, you know you add the controller as

1600
01:04:57,191 --> 01:04:59,124
the delegate of the presentation controller.

1601
01:04:59,126 --> 01:05:01,426
Okay, so

1602
01:05:01,428 --> 01:05:05,863
when you set yourself as the delegate, what can you do?

1603
01:05:05,865 --> 01:05:07,565
What is it going to offer to let you do?

1604
01:05:07,567 --> 01:05:08,866
Well, there's a number of things, but

1605
01:05:08,868 --> 01:05:11,768
I'm gonna talk about this adaptation behavior.

1606
01:05:11,770 --> 01:05:14,270
So here's two methods that are in the protocol for

1607
01:05:14,272 --> 01:05:16,072
the delegate there.

1608
01:05:16,074 --> 01:05:18,341
One is called adapter presentation,

1609
01:05:18,343 --> 01:05:21,210
presentation style for presentation controller.

1610
01:05:21,212 --> 01:05:25,547
Okay, so when the popover is trying to present, it's going

1611
01:05:25,549 --> 01:05:29,817
to ask you, how do you want me to adapt if I'm on an iPhone?

1612
01:05:30,986 --> 01:05:34,988
Now by default, this is going to say full screen modal, but

1613
01:05:34,990 --> 01:05:38,324
you can say you want modal presentation style none

1614
01:05:38,326 --> 01:05:41,060
which means don't adapt.

1615
01:05:41,062 --> 01:05:43,496
So presented on the iPhone exactly like you do

1616
01:05:43,498 --> 01:05:45,097
on the iPad.

1617
01:05:45,099 --> 01:05:47,466
Okay, so for

1618
01:05:47,467 --> 01:05:49,834
a small popover, this makes a lot of sense, okay.

1619
01:05:49,837 --> 01:05:51,469
So this is how you can basically turn off

1620
01:05:51,471 --> 01:05:52,970
that adaptation behavior.

1621
01:05:52,972 --> 01:05:54,972
You can even go way more powerful than that,

1622
01:05:54,974 --> 01:05:56,907
the other one here presentation controller view,

1623
01:05:56,909 --> 01:05:59,276
view controller for adapted presentation style,

1624
01:05:59,278 --> 01:06:03,213
you can return a whole other MVC on the iPhone.

1625
01:06:03,215 --> 01:06:05,581
That displays your MVC in a totally different way

1626
01:06:05,583 --> 01:06:08,117
maybe it's wrapped in a navigation controller or

1627
01:06:08,119 --> 01:06:09,418
it can be completely different.

1628
01:06:09,420 --> 01:06:12,988
So you can really customize it but I just wanted to

1629
01:06:12,990 --> 01:06:15,590
show the this first one because it's common to say oh

1630
01:06:15,592 --> 01:06:17,592
I just have this small little pop over thing.

1631
01:06:17,594 --> 01:06:19,460
I want it to look like a pop over on an iPhone and

1632
01:06:19,462 --> 01:06:20,327
this is how you do that.

1633
01:06:21,563 --> 01:06:22,996
Okay.

1634
01:06:22,998 --> 01:06:27,299
The last thing about popover that's important is the size.

1635
01:06:27,301 --> 01:06:30,002
So you'd really like the popover to come up and

1636
01:06:30,004 --> 01:06:32,871
be exactly the right size to fit the MVC

1637
01:06:32,873 --> 01:06:36,207
because your MVC might be different sizes, okay?

1638
01:06:36,209 --> 01:06:38,943
Even as a given MVC might be different sizes and so

1639
01:06:38,945 --> 01:06:40,945
you really wanna be able to control the size.

1640
01:06:40,947 --> 01:06:43,414
And in a really object oriented way,

1641
01:06:43,416 --> 01:06:47,117
the way the system does that, is it asks the MVC that is in

1642
01:06:47,119 --> 01:06:49,886
the popover what is your preferred size?

1643
01:06:49,888 --> 01:06:53,623
What would you like to be if I could grant your wish,

1644
01:06:53,625 --> 01:06:56,325
what would you like to be, okay?

1645
01:06:56,327 --> 01:06:59,328
So it's cuz only that MVC really knows what

1646
01:06:59,330 --> 01:07:02,197
its preferred or ideal size might be.

1647
01:07:02,199 --> 01:07:03,999
Now that's only a recommendation because

1648
01:07:04,001 --> 01:07:06,134
the popover has some constraints as well, right?

1649
01:07:06,136 --> 01:07:09,570
Because it can only appear in certain places on screen, and

1650
01:07:09,572 --> 01:07:12,940
the screen is only so big, and those arrows might have to go

1651
01:07:12,942 --> 01:07:15,976
a certain direction, they might be restricted, so

1652
01:07:15,978 --> 01:07:19,079
the popover has got its own things to deal with.

1653
01:07:19,081 --> 01:07:24,083
But it's going to ask the MVC it's putting inside of

1654
01:07:24,085 --> 01:07:26,085
itself what would you like to be?

1655
01:07:26,087 --> 01:07:29,621
And so this is just a property in your eye view controller.

1656
01:07:29,623 --> 01:07:32,657
You can, for example, override this.

1657
01:07:32,659 --> 01:07:33,925
Okay. Override the property and

1658
01:07:33,927 --> 01:07:35,826
return your preferred size.

1659
01:07:35,828 --> 01:07:37,194
Or you can set.

1660
01:07:37,196 --> 01:07:38,228
It's a settable property so

1661
01:07:38,230 --> 01:07:40,230
you can set your preferred size.

1662
01:07:40,232 --> 01:07:43,933
If your preferred size is always an exact size just set

1663
01:07:43,935 --> 01:07:45,401
your preferred size to that.

1664
01:07:45,403 --> 01:07:47,536
Or, if you have to calculate your preferred size based on

1665
01:07:47,538 --> 01:07:49,471
what your content is, which you're going to

1666
01:07:49,473 --> 01:07:53,107
see in the demo that I'm going to show about popovers

1667
01:07:53,109 --> 01:07:57,378
in a moment here, than you can override it,

1668
01:07:57,380 --> 01:07:59,379
which is what I did in that demo.

1669
01:07:59,381 --> 01:08:02,349
'Kay, so, we're gonna have

1670
01:08:02,351 --> 01:08:07,019
a demo here which is adding a popover to psychologists.

1671
01:08:07,021 --> 01:08:08,754
Popovers I

1672
01:08:08,755 --> 01:08:10,488
made them extra credit on your homework assignment.

1673
01:08:11,625 --> 01:08:14,359
So you don't have to do them but I recommend doing it cuz

1674
01:08:14,361 --> 01:08:16,627
it's a good experience to make a popover.

1675
01:08:16,629 --> 01:08:17,928
Okay, it is something.

1676
01:08:19,198 --> 01:08:21,898
If I had enough kind of room in your assignment to

1677
01:08:21,900 --> 01:08:24,100
fit popovers, I wouldn't have made it extra credit, but

1678
01:08:24,102 --> 01:08:27,136
I just feel I have only given you one week's worth of work,

1679
01:08:27,138 --> 01:08:28,938
I don't want to over burden you,

1680
01:08:28,939 --> 01:08:30,739
but this is an extra credit you really want to try to do,

1681
01:08:30,742 --> 01:08:32,725
I think, if you can.

1682
01:08:32,726 --> 01:08:34,709
Because in your final project, you're almost certainly going

1683
01:08:34,712 --> 01:08:38,146
to have some reason, hopefully to put a popover in there.

1684
01:08:38,148 --> 01:08:41,149
Okay now before I do the demo let me talk about

1685
01:08:41,151 --> 01:08:44,118
what's coming up because I never go back to the slides.

1686
01:08:44,120 --> 01:08:47,154
Friday we are gonna have that Friday section again for

1687
01:08:47,156 --> 01:08:50,657
IT & T people sorry it's not gonna be on video.

1688
01:08:50,659 --> 01:08:53,060
It's not in a room that we can do the video in really.

1689
01:08:53,062 --> 01:08:56,363
So that should be a good one.

1690
01:08:56,365 --> 01:08:58,498
And that's also an extra credit item in

1691
01:08:58,500 --> 01:09:01,300
your homework is to analyze your performance of your

1692
01:09:01,302 --> 01:09:04,636
calculator that you're doing, your graphing calculator.

1693
01:09:04,638 --> 01:09:06,838
And find out where it's slow and

1694
01:09:06,840 --> 01:09:08,173
then maybe you can fix it if you want,

1695
01:09:08,175 --> 01:09:11,309
that's another extra credit to try and go fix it.

1696
01:09:11,311 --> 01:09:12,810
Next Monday I'm

1697
01:09:12,811 --> 01:09:14,310
going to dive into the View Controller Lifecycle.

1698
01:09:14,313 --> 01:09:17,314
I hate to have had put the View Controller Lifecycle onff

1699
01:09:17,316 --> 01:09:18,715
for so long.

1700
01:09:18,717 --> 01:09:21,951
But in some ways it's kind of nice because it forces you to

1701
01:09:21,953 --> 01:09:23,853
use other parts of your View Controller,

1702
01:09:23,855 --> 01:09:27,056
like the property observers in your outlets, and

1703
01:09:27,058 --> 01:09:30,759
in your model setting, and things ike that.

1704
01:09:30,761 --> 01:09:32,361
But you're going to find out on Monday, you're

1705
01:09:32,363 --> 01:09:34,195
probably going to be mad at me on Monday when I show you

1706
01:09:34,197 --> 01:09:36,497
all these nice methods in the View Controller Lifecycle and

1707
01:09:36,499 --> 01:09:38,899
you're, like oh if you'd just told me that last week it

1708
01:09:38,901 --> 01:09:40,734
could have made something so much easier.

1709
01:09:40,736 --> 01:09:43,570
But the homeworks are designed to not need any of the view

1710
01:09:43,572 --> 01:09:45,538
controller life cycle methods, you shouldn't need them for

1711
01:09:45,540 --> 01:09:47,306
anything, even for the extra credits, you shouldn't.

1712
01:09:48,443 --> 01:09:50,876
And then again, I have autolayout question mark,

1713
01:09:50,878 --> 01:09:52,678
kind of a running joke,

1714
01:09:52,679 --> 01:09:54,479
we'll see, hopefully we'll get to autolayout eventually in

1715
01:09:54,481 --> 01:09:58,116
this quarter, but like I say, see I'm kind of sprinkling it

1716
01:09:58,118 --> 01:10:00,718
in in every demo, a little bit of autolayout, so

1717
01:10:00,720 --> 01:10:03,154
hopefully you're learning a little bit along the way.

1718
01:10:03,156 --> 01:10:06,190
And then, after Monday, we'll start diving into

1719
01:10:06,192 --> 01:10:09,326
multithreading, because you're talking about a device,

1720
01:10:09,328 --> 01:10:12,796
a phone, that needs to be highly responsive to the user.

1721
01:10:12,798 --> 01:10:13,730
Okay? It needs to

1722
01:10:13,732 --> 01:10:15,464
always be responding to touches.

1723
01:10:15,466 --> 01:10:18,901
It cannot, you press a touch and then it freezes for

1724
01:10:18,903 --> 01:10:21,636
two seconds or even a second, while it goes off and

1725
01:10:21,638 --> 01:10:22,921
does something.

1726
01:10:22,922 --> 01:10:24,205
It needs to immediately animating a response to

1727
01:10:24,207 --> 01:10:25,890
what you're doing.

1728
01:10:25,891 --> 01:10:27,574
So the only way to make that work if you're doing things

1729
01:10:27,577 --> 01:10:30,745
like accessing the network, which is really slow,

1730
01:10:30,747 --> 01:10:33,180
compared to the things you're doing on-screen,

1731
01:10:33,182 --> 01:10:35,849
you need to be able to do those things offline of

1732
01:10:35,851 --> 01:10:39,352
the main thread of execution, so we'll talk about that.

1733
01:10:39,354 --> 01:10:41,187
Then we'll start talking about scrolling.

1734
01:10:41,189 --> 01:10:42,722
Because you've got this small screen.

1735
01:10:42,724 --> 01:10:44,890
It's nice because it fits in your pocket but

1736
01:10:44,892 --> 01:10:46,391
if you want to show something big,

1737
01:10:46,393 --> 01:10:48,026
you need to be able to scroll around in it.

1738
01:10:48,028 --> 01:10:49,694
If you want to see a nice image and

1739
01:10:49,695 --> 01:10:51,361
you want to zoom in and see a really detailed part of it,

1740
01:10:51,364 --> 01:10:54,131
you have to be able to zoom in and scroll around.

1741
01:10:54,133 --> 01:10:56,700
And then we're going to talk about the next big thing and

1742
01:10:56,702 --> 01:10:59,403
the topic of your next homework after the calculator.

1743
01:10:59,405 --> 01:11:01,771
Which is, I know you love the calculator, but

1744
01:11:01,773 --> 01:11:04,073
this is your last assignment for the calculator.

1745
01:11:04,075 --> 01:11:06,909
We're going to move on to a whole thing called table view.

1746
01:11:06,911 --> 01:11:11,346
Which is really highly delicate based user interface

1747
01:11:11,348 --> 01:11:14,716
mechanism in iOS that really helps you understand

1748
01:11:14,718 --> 01:11:19,153
how iOS works when it comes to sophisticated user interface.

1749
01:11:19,155 --> 01:11:21,155
Okay? So that's what we're going to

1750
01:11:21,157 --> 01:11:21,955
be doing next week.

1751
01:11:23,458 --> 01:11:24,057
All right?

1752
01:11:24,059 --> 01:11:24,623
Thank you.

1753
01:11:26,027 --> 01:11:27,392
Okay. So,

1754
01:11:27,394 --> 01:11:30,395
let's continue with our psychologist demo, here.

1755
01:11:30,397 --> 01:11:32,096
We're going to add a popover.

1756
01:11:32,098 --> 01:11:36,400
And the place I'm gonna add a popover is down here, okay?

1757
01:11:36,402 --> 01:11:38,335
In this HappinessViewController, here,

1758
01:11:38,337 --> 01:11:40,270
I'm gonna put a little button, here.

1759
01:11:40,272 --> 01:11:43,272
And this popover is going to show the history of

1760
01:11:43,274 --> 01:11:46,242
all the diagnoses made by the psychologist.

1761
01:11:46,244 --> 01:11:49,078
So the psychologist is going to be diagnosing things as we

1762
01:11:49,080 --> 01:11:50,979
click on what we see in our dreams, and

1763
01:11:50,981 --> 01:11:53,682
we're going to want a little button here that brings up

1764
01:11:53,684 --> 01:11:55,016
a popover right here, and

1765
01:11:55,018 --> 01:11:57,985
this popover is going to show the history of the diagnoses.

1766
01:11:57,987 --> 01:12:01,321
Now since this is a demo, I wanna keep the code simple.

1767
01:12:01,323 --> 01:12:03,824
It's gonna show the history of the diagnosis just as

1768
01:12:03,826 --> 01:12:06,459
an array of ints, because we know that our happiness is

1769
01:12:06,461 --> 01:12:07,493
represented in int.

1770
01:12:07,495 --> 01:12:08,728
So it's gonna be shown in an array of ints.

1771
01:12:08,730 --> 01:12:11,330
It might be nicer to show it in a different way, but

1772
01:12:11,332 --> 01:12:13,465
we're gonna show it as an array of ints.

1773
01:12:14,501 --> 01:12:18,736
So let's build this popover segue first and

1774
01:12:18,738 --> 01:12:22,006
then we'll have to go on to build a brand new MVC,

1775
01:12:22,008 --> 01:12:23,974
actually, to show the information.

1776
01:12:23,976 --> 01:12:27,577
It's just gonna be a simple MVC that shows text only, so

1777
01:12:27,579 --> 01:12:28,811
we'll have to do that.

1778
01:12:28,813 --> 01:12:30,746
And then we're obviously gonna prepare this segue.

1779
01:12:30,748 --> 01:12:35,884
But first let's build the ui portion of this and to do that

1780
01:12:35,886 --> 01:12:39,554
I need to add a little bar but here is so I'm going to

1781
01:12:39,556 --> 01:12:44,992
bring up my object palette here and zoom in on this guy.

1782
01:12:46,528 --> 01:12:53,232
And when you put a button here you don't use this UI button.

1783
01:12:53,234 --> 01:12:56,969
Okay so UI buttons, even if you drag the UI Button here it

1784
01:12:56,971 --> 01:12:58,837
will look like it is going to work but

1785
01:12:58,839 --> 01:13:02,073
actually don't do that, it will mess you up.

1786
01:13:03,176 --> 01:13:06,444
Instead you want to go down here quite a ways

1787
01:13:06,446 --> 01:13:10,981
towards the very bottom and there is this Bar Button Item.

1788
01:13:10,983 --> 01:13:14,484
Bar Button Items is a little lighter weight button that

1789
01:13:14,486 --> 01:13:18,754
goes in bars like this, navigation bars and tool bars.

1790
01:13:18,756 --> 01:13:20,923
So I should put that one right there.

1791
01:13:20,925 --> 01:13:24,192
We'll call this one history since it's the diagnostic

1792
01:13:24,194 --> 01:13:28,196
history of what's going on with this patient right here.

1793
01:13:28,198 --> 01:13:30,531
And of course if we're gonna have a popover,

1794
01:13:30,533 --> 01:13:31,999
the popover shows a MVC.

1795
01:13:32,001 --> 01:13:33,667
So we need to create a new MVC.

1796
01:13:33,669 --> 01:13:37,304
So let's go back to the top here and get ourselves

1797
01:13:37,306 --> 01:13:40,073
brand new view controllers, this is just the regular old

1798
01:13:40,075 --> 01:13:42,008
view controller like we've dragged out before, so

1799
01:13:42,010 --> 01:13:47,279
I'm just gonna drag that right in here, and make some room.

1800
01:13:47,281 --> 01:13:49,848
So here we have this, zoom out a little so

1801
01:13:49,850 --> 01:13:51,483
you can see it a little better, and

1802
01:13:51,485 --> 01:13:55,219
what we want is for this little button to segue to this

1803
01:13:55,221 --> 01:13:59,356
MVC, and show it in a little popover right here.

1804
01:13:59,358 --> 01:14:00,624
Okay? So that's all we

1805
01:14:00,626 --> 01:14:01,691
wanna do there.

1806
01:14:01,693 --> 01:14:03,893
So let's just Ctrl+Drag, just like we

1807
01:14:03,895 --> 01:14:05,795
created in the other segue, we're gonna Ctrl+Drag from

1808
01:14:05,797 --> 01:14:09,298
the history button over to this MVC, and when we let go,

1809
01:14:09,300 --> 01:14:12,134
it's gonna say well, what kind of segue do you want?

1810
01:14:12,136 --> 01:14:15,170
And we want the propover presentation segue right here.

1811
01:14:15,172 --> 01:14:17,171
So I'm gonna click that.

1812
01:14:17,173 --> 01:14:19,457
This is a popover.

1813
01:14:19,458 --> 01:14:21,742
If I click here, on the segue, and go to the attributes

1814
01:14:21,744 --> 01:14:24,478
inspector here, you can see that it is a popover segue.

1815
01:14:24,480 --> 01:14:27,948
I can control where the little arrow, if you remember

1816
01:14:27,950 --> 01:14:31,017
the slide about the popover, there was a little kind of

1817
01:14:31,019 --> 01:14:34,287
triangle that was pointing at the thing that brought it up.

1818
01:14:34,289 --> 01:14:35,454
Like this History button, or

1819
01:14:35,456 --> 01:14:38,090
in that slide it was a little search button.

1820
01:14:38,092 --> 01:14:40,292
So I can control which direction that arrow pointed.

1821
01:14:40,294 --> 01:14:42,060
And I can even see here the anchor.

1822
01:14:42,062 --> 01:14:43,995
See it highlighting there.

1823
01:14:43,997 --> 01:14:46,697
That is going to bring up this popover.

1824
01:14:46,699 --> 01:14:47,564
So that's great.

1825
01:14:47,566 --> 01:14:48,832
And of course I need an identifier,

1826
01:14:48,834 --> 01:14:50,767
just like any other segue, I need an identifier.

1827
01:14:50,769 --> 01:14:53,936
So, this shows the diagnostic history, so

1828
01:14:53,938 --> 01:14:57,373
I'm gonna call this Show Diagnostic History.

1829
01:14:57,375 --> 01:14:59,141
Oh, my caps lock.

1830
01:14:59,143 --> 01:15:00,509
There she is, there.

1831
01:15:00,511 --> 01:15:01,776
History, there we go.

1832
01:15:01,778 --> 01:15:03,778
Show Diagnostic History.

1833
01:15:03,780 --> 01:15:05,579
Okay?

1834
01:15:05,581 --> 01:15:08,082
So now we've got this set up to this segue and

1835
01:15:08,084 --> 01:15:09,649
show this MVC.

1836
01:15:09,651 --> 01:15:12,252
Now, this MVC is just a blank MVC right now,

1837
01:15:12,254 --> 01:15:14,821
but let's go ahead and run and see what this looks like.

1838
01:15:14,823 --> 01:15:17,923
So this is going to show a blank MVC at this point.

1839
01:15:20,094 --> 01:15:23,028
So here's our iPad right here and we'll.

1840
01:15:23,030 --> 01:15:24,662
Go to Landscape Mode.

1841
01:15:24,664 --> 01:15:26,798
And so if I click on this,

1842
01:15:26,799 --> 01:15:28,933
you see I get this nice blank MVC appearing right here.

1843
01:15:28,935 --> 01:15:33,503
So our next step in this is we need to create this MVC.

1844
01:15:33,505 --> 01:15:34,938
All right, we're going to.

1845
01:15:35,940 --> 01:15:38,474
Create the MVC that is going to go in here.

1846
01:15:38,476 --> 01:15:41,176
It's going to be a very, very simple little MVC.

1847
01:15:41,178 --> 01:15:45,013
It's just going to have a text view in it here to show text.

1848
01:15:45,015 --> 01:15:47,082
And that's all it's gonna do is show text.

1849
01:15:47,084 --> 01:15:49,183
It doesn't do anything else.

1850
01:15:49,185 --> 01:15:50,802
Okay?

1851
01:15:50,803 --> 01:15:52,420
So, let's start by creating a new

1852
01:15:53,522 --> 01:15:55,188
UI view controller subclass.

1853
01:15:55,190 --> 01:15:58,858
So again I'm gonna go to iOS source cocoa touch class here

1854
01:15:58,860 --> 01:16:00,626
because I'm gonna create a cocoa touch class, and

1855
01:16:00,628 --> 01:16:02,762
it is gonna be a UI view controller.

1856
01:16:02,764 --> 01:16:05,831
I'm gonna call it text UI view controller because that's what

1857
01:16:05,833 --> 01:16:07,265
it does, it shows some text.

1858
01:16:07,267 --> 01:16:08,967
That's all this view controller knows how to do.

1859
01:16:10,136 --> 01:16:12,903
I'm gonna put it in the same place all the rest of

1860
01:16:12,905 --> 01:16:14,038
my SWF files are.

1861
01:16:15,140 --> 01:16:16,339
Okay, here it is.

1862
01:16:16,341 --> 01:16:17,807
Here's the code for it.

1863
01:16:17,809 --> 01:16:20,275
We're gonna delete all of this stuff in here.

1864
01:16:21,211 --> 01:16:23,061
Start.

1865
01:16:23,062 --> 01:16:24,912
Right, so we've got a nice subclass of UIViewController.

1866
01:16:24,915 --> 01:16:27,181
We'll have to put our implementation in here.

1867
01:16:27,183 --> 01:16:29,016
Meanwhile, let's go back to our storyboard and

1868
01:16:29,018 --> 01:16:32,386
make sure that we set this thing's class in

1869
01:16:32,388 --> 01:16:35,088
the identity inspector up here.

1870
01:16:35,090 --> 01:16:37,323
To be the text view controller, so

1871
01:16:37,325 --> 01:16:40,393
that we know this is a text view controller.

1872
01:16:40,395 --> 01:16:41,694
Okay?

1873
01:16:41,695 --> 01:16:42,994
Now, let's talk about this thing's UI.

1874
01:16:42,997 --> 01:16:44,430
It has a very simple UI.

1875
01:16:44,432 --> 01:16:49,300
I'm actually gonna drag out a text displaying object here.

1876
01:16:49,302 --> 01:16:50,702
And I'm not going to use label.

1877
01:16:51,637 --> 01:16:53,404
Label is nice for one and two and

1878
01:16:53,406 --> 01:16:57,040
maybe three lines of static text.

1879
01:16:57,042 --> 01:16:59,109
But I really want something that kind of can show as

1880
01:16:59,111 --> 01:17:00,877
much diagnostic history as I want it.

1881
01:17:00,879 --> 01:17:03,145
So I want something that shows a lot more text.

1882
01:17:03,147 --> 01:17:04,747
A text field is

1883
01:17:04,748 --> 01:17:06,348
not really appropriate because that's editable.

1884
01:17:06,350 --> 01:17:07,616
One, two, three liner.

1885
01:17:07,618 --> 01:17:09,918
So label and text field are very similar.

1886
01:17:09,920 --> 01:17:11,052
It's just editable or not.

1887
01:17:11,054 --> 01:17:13,538
But there's yet

1888
01:17:13,539 --> 01:17:16,023
another one down here, called text view, right here.

1889
01:17:16,025 --> 01:17:18,292
And this displays multiple lines of editable text.

1890
01:17:18,294 --> 01:17:22,862
It lets you set the font, and the text can be selectable.

1891
01:17:22,864 --> 01:17:24,564
You can copy and paste from it, things like that.

1892
01:17:24,566 --> 01:17:26,332
So it's a much more powerful text styler, but

1893
01:17:26,334 --> 01:17:28,100
we'll talk about this later in the quarter.

1894
01:17:28,102 --> 01:17:31,336
But for now I'm just going to drag this in right here.

1895
01:17:31,338 --> 01:17:33,738
You noticed I used the blue lines.

1896
01:17:33,740 --> 01:17:34,772
I'm going to go up here and

1897
01:17:34,774 --> 01:17:36,807
reset to suggested constraints.

1898
01:17:36,809 --> 01:17:40,144
I'm going to go over here to the size inspector up here.

1899
01:17:40,146 --> 01:17:43,880
And verify that my constraints are the way I want, and

1900
01:17:43,882 --> 01:17:44,614
they look fine.

1901
01:17:44,616 --> 01:17:46,415
Okay, so that's good.

1902
01:17:46,417 --> 01:17:49,451
I could also set some attributes maybe, about this

1903
01:17:49,453 --> 01:17:53,188
text view, like I probably don't want it to be editable.

1904
01:17:53,190 --> 01:17:56,057
I don't want the diagnostic history to be actually,

1905
01:17:56,059 --> 01:17:58,059
you know, touched on and edited.

1906
01:17:58,061 --> 01:17:59,760
But it's not bad to have it selectable,

1907
01:17:59,762 --> 01:18:02,930
someone might wanna select the diagnostic history and

1908
01:18:02,932 --> 01:18:04,632
then copy it and

1909
01:18:04,633 --> 01:18:06,333
paste it somewhere, or something like that.

1910
01:18:06,335 --> 01:18:08,535
Or you could set the font to be larger too,

1911
01:18:08,537 --> 01:18:11,437
maybe something 24 point or something like that.

1912
01:18:12,373 --> 01:18:14,573
And of course we've got this kind of

1913
01:18:16,176 --> 01:18:18,710
pseudo latin placeholder text right here.

1914
01:18:18,712 --> 01:18:20,278
But that's not gonna matter cuz that's not

1915
01:18:20,280 --> 01:18:22,046
gonna show because we're going to

1916
01:18:22,048 --> 01:18:26,883
set the text we want when we prepare for this segue, okay?

1917
01:18:26,885 --> 01:18:29,352
So now let's go ahead and wire up this UI.

1918
01:18:29,354 --> 01:18:31,487
We've got this text view right here.

1919
01:18:31,489 --> 01:18:34,156
Let's Ctrl + Drag to create an outlet to it, okay?

1920
01:18:34,158 --> 01:18:36,759
I'm gonna call that outlet text view.

1921
01:18:36,761 --> 01:18:38,193
So, we've got a nice outlet here.

1922
01:18:38,195 --> 01:18:40,795
And let's add a model to our text view controller.

1923
01:18:40,797 --> 01:18:42,463
My model, I'm going to call it text.

1924
01:18:42,465 --> 01:18:43,864
It's going to be a string.

1925
01:18:43,866 --> 01:18:45,566
We'll start out as an empty string.

1926
01:18:46,568 --> 01:18:47,701
Okay.

1927
01:18:47,703 --> 01:18:50,136
Now every time my model gets set,

1928
01:18:51,172 --> 01:18:55,874
I want to make sure that I update my text views text.

1929
01:18:55,876 --> 01:18:59,411
So text view is this thing that manages text.

1930
01:18:59,413 --> 01:19:02,080
And you can see has an enormous number of things you

1931
01:19:02,082 --> 01:19:04,815
can do on it it's a very powerful text object, but

1932
01:19:04,817 --> 01:19:06,917
it also has just a simple method called text.

1933
01:19:06,919 --> 01:19:10,520
Just like UI label does, and we're gonna set that equal to

1934
01:19:10,522 --> 01:19:13,023
our text the model's text right.

1935
01:19:13,025 --> 01:19:15,725
And just to be safe in case this is being called while

1936
01:19:15,727 --> 01:19:16,992
we're preparing.

1937
01:19:16,994 --> 01:19:19,495
Okay, we'll do the same thing with optional chaining in

1938
01:19:19,497 --> 01:19:21,763
case our outlet here has not been set.

1939
01:19:21,765 --> 01:19:24,799
And similarly when our outlet finally does get

1940
01:19:24,801 --> 01:19:30,538
set by the system, we're going to have it, property observer,

1941
01:19:30,540 --> 01:19:34,007
say text view dot text equals text.

1942
01:19:35,110 --> 01:19:36,609
Okay. And here we don't have to do

1943
01:19:36,611 --> 01:19:39,345
the question mark because where actually the text view

1944
01:19:39,347 --> 01:19:40,846
is being set by the system, so

1945
01:19:40,848 --> 01:19:43,348
we know it's set by the time this didSet happens.

1946
01:19:43,350 --> 01:19:45,083
Okay, so this is a very,

1947
01:19:45,085 --> 01:19:48,352
very simple MVC that we're using right here.

1948
01:19:49,588 --> 01:19:54,924
And it should have no

1949
01:19:54,926 --> 01:20:01,330
problem displaying our little diagnostic history, there.

1950
01:20:01,332 --> 01:20:03,549
Okay?

1951
01:20:03,550 --> 01:20:05,767
So now it's time to prepare this segue.

1952
01:20:05,770 --> 01:20:07,469
All right? We want to

1953
01:20:07,471 --> 01:20:10,238
prepare this segue so that you click on history,

1954
01:20:10,240 --> 01:20:12,740
it shows the diagnostic history here now.

1955
01:20:12,742 --> 01:20:15,810
We might, we know that this instigator right here is

1956
01:20:15,812 --> 01:20:18,078
inside this happiness view controller.

1957
01:20:18,080 --> 01:20:21,314
So we might think that we should go to our happiness

1958
01:20:21,316 --> 01:20:24,484
view controller right here and add the prepare in here.

1959
01:20:25,453 --> 01:20:27,353
Okay. And we could do that but

1960
01:20:27,355 --> 01:20:28,920
remember that happiness view control is

1961
01:20:28,922 --> 01:20:31,189
something we dragged in from another app.

1962
01:20:31,191 --> 01:20:34,225
And maybe that's another app that's being worked on at

1963
01:20:34,227 --> 01:20:36,994
our company or that there's another programer who

1964
01:20:36,996 --> 01:20:38,629
owns this particular class.

1965
01:20:38,631 --> 01:20:40,114
And he said no, no,

1966
01:20:40,115 --> 01:20:41,598
you can't add prepare for segue to this class.

1967
01:20:41,600 --> 01:20:44,234
It's a generic happiness showing thing.

1968
01:20:44,236 --> 01:20:45,968
It doesn't know anything about diagnostic history.

1969
01:20:45,970 --> 01:20:50,773
And they'd probably be right because if we started

1970
01:20:50,775 --> 01:20:53,408
adding things about diagnostic history to a happiness view

1971
01:20:53,410 --> 01:20:56,344
controller, it would be kind of a diagnostic or

1972
01:20:56,346 --> 01:20:59,347
diagnosed happiness view controller not

1973
01:20:59,349 --> 01:21:01,615
a happiness view controller anymore.

1974
01:21:01,617 --> 01:21:03,751
So where are we going to put our prepare for segue then?

1975
01:21:03,753 --> 01:21:05,852
The answer is that we are going to

1976
01:21:05,854 --> 01:21:07,454
actually create a subclass of

1977
01:21:07,456 --> 01:21:10,456
happiness view controller that we can use that's going to get

1978
01:21:10,458 --> 01:21:13,426
all the behavior of happiness view controller.

1979
01:21:13,428 --> 01:21:16,061
Plus, we're going to add the ability to do

1980
01:21:16,063 --> 01:21:17,162
the diagnostic history.

1981
01:21:17,164 --> 01:21:18,430
Okay. So we're going to

1982
01:21:18,432 --> 01:21:19,564
create a subclass.

1983
01:21:19,566 --> 01:21:21,666
We're just going to go up here.

1984
01:21:21,668 --> 01:21:23,601
New file.

1985
01:21:23,602 --> 01:21:25,535
Again, I'm just going to create a SWF file this time.

1986
01:21:25,538 --> 01:21:31,708
I'm going to call it diagnosed happiness view controller.

1987
01:21:31,710 --> 01:21:34,777
Okay, because it's just like a happiness controller, but

1988
01:21:34,779 --> 01:21:38,080
it's diagnosed happiness.

1989
01:21:38,082 --> 01:21:40,099
Here it is right here.

1990
01:21:40,100 --> 01:21:42,117
I'm gonna import UI kit because it's a UI class.

1991
01:21:42,119 --> 01:21:46,254
And I'm just gonna say that my class

1992
01:21:46,256 --> 01:21:51,225
diagnosed happiness view controller inherits from

1993
01:21:51,227 --> 01:21:52,926
happiness view controller, okay?

1994
01:21:53,929 --> 01:21:55,829
So I am going to be

1995
01:21:55,830 --> 01:21:57,730
a sub class that diagnosed happiness view controller.

1996
01:21:57,733 --> 01:22:00,366
Make sense?

1997
01:22:00,368 --> 01:22:03,235
Now, over here in my storyboard,

1998
01:22:03,237 --> 01:22:06,772
I am going to select this scene right here.

1999
01:22:06,774 --> 01:22:09,408
And I'm going to go to the identity inspector, and

2000
01:22:09,410 --> 01:22:11,242
I am going to say that this scene is no

2001
01:22:11,244 --> 01:22:13,211
longer a happiness view controller.

2002
01:22:13,213 --> 01:22:17,514
It is a diagnosed happiness view controller.

2003
01:22:17,516 --> 01:22:19,016
So now I'm this guy here.

2004
01:22:19,018 --> 01:22:22,552
Now, all my outlets that were set up will

2005
01:22:22,554 --> 01:22:23,820
work absolutely just fine.

2006
01:22:24,756 --> 01:22:26,321
Okay? Because I'm gonna inherit all

2007
01:22:26,323 --> 01:22:29,491
the capability of happiness view controller in my

2008
01:22:29,493 --> 01:22:31,693
diagnosed happiness view controller subclass.

2009
01:22:31,695 --> 01:22:34,228
In fact, what's really cool is I have a scene right here.

2010
01:22:34,230 --> 01:22:38,532
And this scene is a diagnose happiness view controller.

2011
01:22:38,534 --> 01:22:44,337
But if I go up here to pick a different class.

2012
01:22:44,339 --> 01:22:45,822
If I go back and

2013
01:22:45,823 --> 01:22:47,306
pick my happiness view controller, and I see it here.

2014
01:22:47,308 --> 01:22:50,509
You can see that it'll show me that that's hooked up.

2015
01:22:50,511 --> 01:22:52,511
Okay, cuz it knows that this is inherited,

2016
01:22:52,513 --> 01:22:53,679
this outlet is inherited.

2017
01:22:53,681 --> 01:22:55,547
And so it's hooked up.

2018
01:22:55,549 --> 01:22:58,883
So I can still go back and show my

2019
01:22:58,885 --> 01:23:02,153
superclasses for my diagnose happiness view controller to

2020
01:23:02,155 --> 01:23:04,588
happiness view controller, and see the outlets.

2021
01:23:06,391 --> 01:23:08,124
Okay? So this is an important thing.

2022
01:23:08,126 --> 01:23:10,259
Polymorphism of controllers, here.

2023
01:23:10,261 --> 01:23:12,761
You often might have a reusable controller.

2024
01:23:12,763 --> 01:23:14,162
And you wanna add something to it for

2025
01:23:14,164 --> 01:23:15,964
a particular storyboard or

2026
01:23:15,966 --> 01:23:17,598
a particular use in the storyboard.

2027
01:23:17,600 --> 01:23:20,735
Then you can just create a little subclass of it and

2028
01:23:20,737 --> 01:23:22,937
put your prepare.

2029
01:23:22,938 --> 01:23:25,138
So what we're gonna do is put our prepare right in here.

2030
01:23:26,274 --> 01:23:27,140
Okay?

2031
01:23:27,142 --> 01:23:29,092
So this

2032
01:23:29,093 --> 01:23:31,043
DiagnosedHappinessViewControl- ler, first of all it's

2033
01:23:31,045 --> 01:23:34,313
going to have to keep track of the diagnosed happinesses.

2034
01:23:34,315 --> 01:23:37,516
Okay. So we're gonna add a new var

2035
01:23:37,518 --> 01:23:42,086
to this subclass called diagnosed happiness.

2036
01:23:42,088 --> 01:23:45,990
Or diagnostic history, let's call it.

2037
01:23:45,992 --> 01:23:48,459
Okay it's the diagnostic history of this thing,

2038
01:23:48,461 --> 01:23:51,695
and we're just gonna keep it as an array of ints.

2039
01:23:51,697 --> 01:23:53,663
So we've got our nice diagnostic history right

2040
01:23:53,665 --> 01:23:59,402
there, and now let's go ahead and let's do this.

2041
01:23:59,404 --> 01:24:03,538
Let's go here and here and

2042
01:24:04,508 --> 01:24:06,808
here to give ourselves some room.

2043
01:24:06,810 --> 01:24:08,976
And let's override.

2044
01:24:08,978 --> 01:24:13,080
Actually, we don't even have to type the override here

2045
01:24:13,082 --> 01:24:16,316
because we start typing prepare for segway end tab.

2046
01:24:16,318 --> 01:24:17,450
It's going to automatically put

2047
01:24:17,452 --> 01:24:19,852
the override func in there for us, which is nice.

2048
01:24:19,854 --> 01:24:22,788
We don't have to be typing this unnecessarily.

2049
01:24:22,790 --> 01:24:24,256
So here's our repair for segue.

2050
01:24:24,258 --> 01:24:27,492
And so all we're going to be doing in this prepare for

2051
01:24:27,494 --> 01:24:30,962
segue is prepare our text to view controller, all right?

2052
01:24:30,964 --> 01:24:33,364
Because our text view controller, here,

2053
01:24:33,366 --> 01:24:36,100
is what we're seguing to.

2054
01:24:36,102 --> 01:24:37,901
So we're preparing this segue right here.

2055
01:24:37,903 --> 01:24:39,536
So we wanna prepare this MVC,

2056
01:24:39,538 --> 01:24:42,005
which is a text view controller, okay?

2057
01:24:42,007 --> 01:24:43,639
So let's prepare that.

2058
01:24:43,641 --> 01:24:48,510
And let's, first of all, make sure that this is

2059
01:24:48,512 --> 01:24:50,946
the segue we're talking about, here.

2060
01:24:50,948 --> 01:24:54,349
So let's go right here, check our identifiers,

2061
01:24:54,351 --> 01:24:56,718
get our identifier out of there.

2062
01:24:56,720 --> 01:24:58,319
Let's switch on our identifier.

2063
01:24:58,321 --> 01:25:03,590
Currently, we only support this one case.

2064
01:25:03,592 --> 01:25:05,625
I'm also going to put this case,

2065
01:25:05,626 --> 01:25:07,659
this is something you should probably always do,

2066
01:25:07,662 --> 01:25:10,997
which is to put the segue identifier here into some

2067
01:25:10,999 --> 01:25:14,200
sort of constants struct.

2068
01:25:14,202 --> 01:25:16,268
I'm gonna call this my history struct.

2069
01:25:16,270 --> 01:25:20,638
I'm going to have, and let me make sure this is private.

2070
01:25:20,640 --> 01:25:24,775
Oops. Let's type

2071
01:25:24,777 --> 01:25:26,243
this correctly here, private.

2072
01:25:26,245 --> 01:25:28,545
All right.

2073
01:25:28,547 --> 01:25:31,281
Yes.

2074
01:25:31,282 --> 01:25:34,016
I'm going to have this be static let

2075
01:25:34,019 --> 01:25:38,454
segue equal that show diagnostic history.

2076
01:25:38,456 --> 01:25:41,156
So this would be a segue identifier.

2077
01:25:41,158 --> 01:25:45,326
Maybe we'd even want to call this identifier,

2078
01:25:45,328 --> 01:25:47,128
segue identifier.

2079
01:25:47,130 --> 01:25:51,198
All right.

2080
01:25:51,200 --> 01:25:54,234
All right, so putting this in here it just, you know,

2081
01:25:54,236 --> 01:25:56,903
collects all your constant strings together.

2082
01:25:56,905 --> 01:25:58,971
And if you ever change something in your storybook.

2083
01:25:58,973 --> 01:26:01,674
Some people might even call this struct storyboard, so

2084
01:26:01,676 --> 01:26:05,110
that every string that's in your storyboard that has to

2085
01:26:05,112 --> 01:26:07,546
match up here in their code, is in one struct.

2086
01:26:07,548 --> 01:26:10,548
We'll call this one History right here.

2087
01:26:10,550 --> 01:26:12,216
It's kind of debatable which way to go there.

2088
01:26:13,419 --> 01:26:15,503
So what do

2089
01:26:15,504 --> 01:26:17,588
we want to do when that history identifier happens?

2090
01:26:17,590 --> 01:26:22,459
Well, if we can get our segue's destination view

2091
01:26:22,461 --> 01:26:25,595
controller as a text view controller,

2092
01:26:25,597 --> 01:26:29,765
that's the only thing we need to segue to with this segue.

2093
01:26:29,767 --> 01:26:32,734
Then we're just going to set the tvc's text equal to

2094
01:26:32,736 --> 01:26:34,102
our diagnostic history,

2095
01:26:34,104 --> 01:26:36,637
which I'm going to do by diagnostic history.

2096
01:26:36,639 --> 01:26:38,839
So, it's just going to show this array,

2097
01:26:38,841 --> 01:26:41,308
this diagnostic history array, as a string.

2098
01:26:41,310 --> 01:26:41,942
All right.

2099
01:26:44,646 --> 01:26:47,680
And of course we'll need the default.

2100
01:26:47,682 --> 01:26:49,248
Break out of here.

2101
01:26:50,317 --> 01:26:51,483
Okay? So there we

2102
01:26:51,485 --> 01:26:53,318
have this nice diagnostic history.

2103
01:26:53,320 --> 01:26:56,220
So let's go ahead and run this and see if this is working.

2104
01:27:00,393 --> 01:27:02,192
All right, so again we click here.

2105
01:27:02,194 --> 01:27:03,693
And, well, it seems to be working,

2106
01:27:03,695 --> 01:27:05,561
cuz it's showing no diagnostic history.

2107
01:27:05,563 --> 01:27:07,963
I haven't clicked any of these.

2108
01:27:07,965 --> 01:27:09,398
So, since we added this code,

2109
01:27:09,400 --> 01:27:12,634
anyway, I haven't gotten any diagnosis, so that's good.

2110
01:27:12,636 --> 01:27:13,668
So let's dismiss that.

2111
01:27:13,670 --> 01:27:16,738
And here, I'm gonna go there, go there.

2112
01:27:16,740 --> 01:27:18,105
Oh, it's not working.

2113
01:27:18,107 --> 01:27:18,872
So why is it not working?

2114
01:27:19,942 --> 01:27:22,642
Okay, well, we have this nice diagnostic history, but

2115
01:27:22,644 --> 01:27:24,444
we never actually set it.

2116
01:27:24,446 --> 01:27:26,278
Okay, it's always just empty.

2117
01:27:26,280 --> 01:27:27,546
And so how are we gonna set it, though?

2118
01:27:27,548 --> 01:27:29,981
We are sub class of happiness view controller.

2119
01:27:29,983 --> 01:27:35,119
Well, we can just override our var happiness from

2120
01:27:35,121 --> 01:27:39,089
our super class, and do a did set of our own in here.

2121
01:27:39,091 --> 01:27:42,426
So that happiness has its own did set.

2122
01:27:42,428 --> 01:27:44,127
And we're gonna add our own did set here,

2123
01:27:44,129 --> 01:27:47,963
which is we're gonna say the diagnosing history plus equals

2124
01:27:47,965 --> 01:27:50,366
the happiness, okay?

2125
01:27:50,368 --> 01:27:52,300
You can use plus equals with an array but

2126
01:27:52,302 --> 01:27:54,269
you have to remember that the argument has to be an array,

2127
01:27:54,271 --> 01:27:56,905
so if you just want to add one thing,

2128
01:27:56,906 --> 01:27:59,540
you can just wrap a little array around it here, okay?

2129
01:27:59,542 --> 01:28:03,010
So here, it's perfectly fine to override a bar from your

2130
01:28:03,012 --> 01:28:04,328
super class.

2131
01:28:04,329 --> 01:28:05,645
If you go look at our super class,

2132
01:28:05,647 --> 01:28:09,916
happiness It has a var and even does it's own didsets.

2133
01:28:09,918 --> 01:28:13,919
So I'm over riding this var, and I do my own didset,

2134
01:28:13,921 --> 01:28:17,522
it does not override or replace this didset.

2135
01:28:17,524 --> 01:28:20,392
So it's gonna do this didset, and

2136
01:28:20,394 --> 01:28:22,326
then it's gonna do this didset.

2137
01:28:22,328 --> 01:28:24,262
So, it'll do both of them.

2138
01:28:24,263 --> 01:28:26,197
So it's a really nice feature, the property observers,

2139
01:28:26,199 --> 01:28:28,832
when you override they don't replace the super class as

2140
01:28:28,834 --> 01:28:30,801
one, they add on to it.

2141
01:28:31,770 --> 01:28:33,386
Okay.

2142
01:28:33,387 --> 01:28:35,003
So now our diagnostic history is being added.

2143
01:28:35,006 --> 01:28:36,639
So hopefully now when we go and

2144
01:28:36,641 --> 01:28:38,440
look in our diagnostic history, it will work.

2145
01:28:38,442 --> 01:28:40,208
So here we'll go dancing tree.

2146
01:28:40,210 --> 01:28:41,776
Look up here.

2147
01:28:41,778 --> 01:28:42,877
And look at that!

2148
01:28:42,879 --> 01:28:44,645
We've got our diagnostic history.

2149
01:28:44,647 --> 01:28:46,680
Let's go over and do golden bear.

2150
01:28:46,682 --> 01:28:47,498
Oh.

2151
01:28:47,499 --> 01:28:48,315
That's kind of interesting.

2152
01:28:48,317 --> 01:28:49,482
This is not a very good history.

2153
01:28:49,484 --> 01:28:51,918
It's only remembering the last thing I redo.

2154
01:28:51,920 --> 01:28:55,654
I wonder why it only remembers the last thing I redo.

2155
01:28:55,656 --> 01:28:56,254
That's bad.

2156
01:28:56,256 --> 01:28:57,422
That's a bug.

2157
01:28:57,424 --> 01:29:00,091
So, why has that happened?

2158
01:29:00,093 --> 01:29:04,995
Well, I did it this way to show you, and to remind you,

2159
01:29:04,997 --> 01:29:07,764
that these segues, all of these segues that

2160
01:29:07,766 --> 01:29:12,135
are happening here, they are always creating a new MVC.

2161
01:29:12,137 --> 01:29:16,438
So this segue, when we click on golden bear, dancing tree,

2162
01:29:16,440 --> 01:29:19,408
and it segues to this, it creates a brand new MVC.

2163
01:29:19,410 --> 01:29:22,777
And since this is a brand new diagnosed happiness view

2164
01:29:22,779 --> 01:29:27,148
controller, it's going to get a brand new

2165
01:29:27,150 --> 01:29:30,217
diagnostic history, which is going to be empty.

2166
01:29:30,219 --> 01:29:31,485
So it is constantly going to

2167
01:29:31,487 --> 01:29:33,486
be reentering it every time we segue.

2168
01:29:33,488 --> 01:29:35,205
We really need to

2169
01:29:35,206 --> 01:29:36,923
store this diagnostic history somewhere else.

2170
01:29:36,925 --> 01:29:38,858
We can't just have it be in afar here.

2171
01:29:38,860 --> 01:29:42,627
And a great place to have permanent storage, of course,

2172
01:29:42,629 --> 01:29:45,497
is in its future defaults.

2173
01:29:45,499 --> 01:29:46,882
Okay.

2174
01:29:46,883 --> 01:29:48,266
So let's change this diagnostic history.

2175
01:29:48,268 --> 01:29:51,235
Instead of being a stored property here,

2176
01:29:51,237 --> 01:29:54,371
let's change it to be a computed property.

2177
01:29:54,373 --> 01:29:56,106
So I'm gonna have it be an Int.

2178
01:29:56,108 --> 01:29:58,141
And it's gonna become computed, so

2179
01:29:58,143 --> 01:29:59,475
it's gonna have a get.

2180
01:29:59,477 --> 01:30:00,543
And the set.

2181
01:30:00,545 --> 01:30:02,511
And in the get and the set here, and

2182
01:30:02,513 --> 01:30:04,579
I'm gonna go into user defaults.

2183
01:30:06,116 --> 01:30:08,383
Put this diagnostic history into user defaults, and

2184
01:30:08,385 --> 01:30:09,884
out of user defaults.

2185
01:30:09,886 --> 01:30:12,119
Since I'm going to be using user defaults,

2186
01:30:12,121 --> 01:30:15,955
I'm just gonna create a little private let called defaults.

2187
01:30:15,957 --> 01:30:16,923
Which is just gonna be the

2188
01:30:16,925 --> 01:30:19,458
NSUserDefaults.standardUserDe- faults.

2189
01:30:19,460 --> 01:30:22,161
You remember this is like a shared version of any of

2190
01:30:22,163 --> 01:30:23,462
those UserDefaults that we get.

2191
01:30:23,464 --> 01:30:26,064
The whole app is gonna be sharing this, and

2192
01:30:26,066 --> 01:30:30,034
using it to read and write from NSUserDefaults.

2193
01:30:30,036 --> 01:30:31,118
Okay. This is nice,

2194
01:30:31,119 --> 01:30:32,201
it's convenient to have this.

2195
01:30:32,204 --> 01:30:34,004
Makes the code a little more readable to

2196
01:30:34,006 --> 01:30:35,305
have this be repeated everywhere,

2197
01:30:35,307 --> 01:30:38,808
versus just this little short thing right here.

2198
01:30:38,810 --> 01:30:41,243
All right. So how am I going to get the

2199
01:30:41,245 --> 01:30:44,580
defaults and set the defaults, well let's do set first.

2200
01:30:44,582 --> 01:30:47,416
Once we set maybe it will be easier to imagine our get.

2201
01:30:47,418 --> 01:30:48,783
So I am just going to go to defaults,

2202
01:30:48,785 --> 01:30:52,687
I am going to set an object and remember that this is

2203
01:30:52,689 --> 01:30:55,489
any object, but it has to be a property list, okay?

2204
01:30:55,491 --> 01:30:58,225
But luckily an array of ints,

2205
01:30:58,227 --> 01:31:01,328
which is what our diagnostic history is.

2206
01:31:01,330 --> 01:31:03,630
Sorry, this isn't an array of ints,

2207
01:31:03,632 --> 01:31:08,167
this diagnose is an array of ints,

2208
01:31:08,169 --> 01:31:11,136
that is a property so luckily, we can do that.

2209
01:31:11,138 --> 01:31:13,505
And here we're in the setting, okay, so

2210
01:31:13,507 --> 01:31:15,840
we're just gonna put our new value here.

2211
01:31:15,842 --> 01:31:18,776
So that's gonna be an array of ints, the new value.

2212
01:31:18,778 --> 01:31:21,912
For key we need a key, so let's go back down to

2213
01:31:21,914 --> 01:31:24,948
our constants here and add another one, and

2214
01:31:24,950 --> 01:31:29,252
this is going to be our called defaults key, for the history.

2215
01:31:29,254 --> 01:31:33,322
And we can really put anything we want in here, any name for

2216
01:31:33,324 --> 01:31:37,226
the key, but remember that default is a database that is

2217
01:31:37,228 --> 01:31:40,796
shared in our entire application, so we might want

2218
01:31:40,798 --> 01:31:43,865
to kind of name space it a little bit by saying

2219
01:31:43,867 --> 01:31:47,435
diagnosedHappinessViewControl- ler.History or

2220
01:31:47,437 --> 01:31:49,136
something like that.

2221
01:31:49,138 --> 01:31:53,307
So this is just a naming convention to throw the name

2222
01:31:53,309 --> 01:31:56,309
of the ViewContoller or the name of the class in general.

2223
01:31:56,311 --> 01:31:58,345
That is writing to the default in front.

2224
01:31:59,514 --> 01:32:00,880
You don't have to do this.

2225
01:32:00,882 --> 01:32:04,283
This is purely something you just want to be consistent

2226
01:32:04,285 --> 01:32:05,751
with in your whole application and

2227
01:32:05,753 --> 01:32:08,153
how you divide up this name space for the defaults,

2228
01:32:08,155 --> 01:32:11,922
because this is a global name space inside your application.

2229
01:32:13,025 --> 01:32:17,060
So this will be our History and DefaultsKey.

2230
01:32:17,062 --> 01:32:20,630
All right, so that's the new write our any time we set this

2231
01:32:20,632 --> 01:32:24,800
diagnostic history it's gonna write it out to user defaults.

2232
01:32:24,802 --> 01:32:26,101
Then similarly we can get it

2233
01:32:26,103 --> 01:32:29,971
out by just returning defaults.objectForKey.

2234
01:32:29,973 --> 01:32:31,139
Same thing.

2235
01:32:31,140 --> 01:32:32,306
This History.DefaultsKey.

2236
01:32:32,308 --> 01:32:36,443
But one thing I wanna make sure of is that it's

2237
01:32:36,445 --> 01:32:38,245
always an array of int.

2238
01:32:38,247 --> 01:32:40,714
So I'm gonna do as array of int.

2239
01:32:40,716 --> 01:32:44,150
And if that returns nil then I'm gonna turn empty array.

2240
01:32:44,152 --> 01:32:46,536
Okay. So if I have

2241
01:32:46,537 --> 01:32:48,921
never saved the diagnostic history to the defaults for

2242
01:32:48,923 --> 01:32:51,023
example, then this is going to come back nil,

2243
01:32:51,025 --> 01:32:53,625
okay, but I never have saved it before.

2244
01:32:53,627 --> 01:32:54,693
So we'll start out with a nice,

2245
01:32:54,695 --> 01:32:55,927
empty array in that case.

2246
01:32:57,330 --> 01:32:59,430
Okay.

2247
01:32:59,431 --> 01:33:01,531
And also, if somehow some junk had got written here that

2248
01:33:01,534 --> 01:33:02,699
wasn't in an array of int for

2249
01:33:02,701 --> 01:33:04,601
some reason, then this would also be nil and

2250
01:33:04,603 --> 01:33:05,902
we would start out with a fresh array.

2251
01:33:05,904 --> 01:33:08,671
It would be kind of a weird case, but anyway so you

2252
01:33:08,673 --> 01:33:13,108
can see a simple way here to read and write from default.

2253
01:33:13,110 --> 01:33:18,279
Okay make sense, all right so now let's go run around and

2254
01:33:18,281 --> 01:33:21,315
see if this fixed our problem, of our defaults not

2255
01:33:21,317 --> 01:33:23,650
lying around, so let's see golden bear, dancing tree,

2256
01:33:23,652 --> 01:33:25,352
buckeye, put a whole bunch in there,

2257
01:33:25,354 --> 01:33:27,721
history it's remembering them all.

2258
01:33:27,723 --> 01:33:30,807
Okay.

2259
01:33:30,808 --> 01:33:33,892
Golden Bear, 0, Dancing Tree, 100.

2260
01:33:33,895 --> 01:33:35,160
Okay?

2261
01:33:35,162 --> 01:33:37,462
That looks quite awesome.

2262
01:33:37,464 --> 01:33:38,664
All right.

2263
01:33:38,665 --> 01:33:39,865
Let's try one other thing here.

2264
01:33:39,866 --> 01:33:41,066
Let's go try running this on an iPhone.

2265
01:33:41,068 --> 01:33:44,602
Let's see how this works on an iPhone, with our great new

2266
01:33:44,604 --> 01:33:47,738
feature here, and we'll see what it looks like.

2267
01:33:51,710 --> 01:33:53,877
All right so we got there a gold bear.

2268
01:33:53,879 --> 01:33:55,378
We got a dancing tree.

2269
01:33:55,380 --> 01:33:57,513
We got the buckeye.

2270
01:33:57,515 --> 01:34:00,015
Okay, let's see that history.

2271
01:34:00,017 --> 01:34:04,986
Whoa, that looks really, really bad, okay?

2272
01:34:04,988 --> 01:34:06,020
Well, hm.

2273
01:34:06,022 --> 01:34:07,521
So it didn't put up the history in

2274
01:34:07,523 --> 01:34:09,556
the little popover like that.

2275
01:34:09,558 --> 01:34:11,625
It took over the whole screen.

2276
01:34:11,627 --> 01:34:15,128
Modal, it's what a modal segue looks like.

2277
01:34:15,130 --> 01:34:16,396
And I put it up here, and

2278
01:34:16,398 --> 01:34:18,664
smashed into my carrier thing up here, and

2279
01:34:18,666 --> 01:34:21,800
there's no way to get out of here there's no done button or

2280
01:34:21,802 --> 01:34:25,037
dismiss or something, because in a popover we don't need to

2281
01:34:25,039 --> 01:34:27,772
dismiss because you just click on the background.

2282
01:34:27,774 --> 01:34:31,876
So you know, this is really a small amount of information I

2283
01:34:31,878 --> 01:34:35,813
could have put it in a popover there why did iOS adapt that

2284
01:34:35,815 --> 01:34:39,249
popover for the iPhone and put it to your screen?

2285
01:34:39,251 --> 01:34:41,585
Well, because it doesn't really know how big this is

2286
01:34:41,587 --> 01:34:44,054
going to be and how much data is going to be drawn or

2287
01:34:44,056 --> 01:34:47,690
whatever until it's being displayed.

2288
01:34:47,692 --> 01:34:50,893
And so on an iPhone to be safe it always adapts

2289
01:34:50,895 --> 01:34:53,829
popovers to make them full screen presentation like

2290
01:34:53,831 --> 01:34:54,996
this to take over the screen.

2291
01:34:55,999 --> 01:34:58,066
Okay, but in this case, we don't actually want that.

2292
01:34:58,068 --> 01:34:59,700
We dont want that adaptation behavior.

2293
01:34:59,702 --> 01:35:01,902
We want to prevent this adaptation behavior so

2294
01:35:01,904 --> 01:35:05,205
they just keep putting it in its nice little popover.

2295
01:35:05,207 --> 01:35:06,773
It'll be perfectly fine in iPad and

2296
01:35:06,775 --> 01:35:08,441
it will be perfectly fine for iPhone.

2297
01:35:08,443 --> 01:35:12,144
So, how do we prevent this adaptation behavior

2298
01:35:12,146 --> 01:35:13,612
from happening?

2299
01:35:14,614 --> 01:35:18,549
To do that, we need to get at that popover presentation

2300
01:35:18,551 --> 01:35:23,187
controller I was talking to you about in the slides.

2301
01:35:23,189 --> 01:35:25,122
And it's pretty easy to get ahold of it.

2302
01:35:25,124 --> 01:35:26,556
Inside our prepare-

2303
01:35:26,558 --> 01:35:28,424
So here's our prepare in our diagnosed,

2304
01:35:28,426 --> 01:35:31,727
diagnosed happiness view controller right here.

2305
01:35:31,729 --> 01:35:35,297
The same place down here where we're doing the preparation

2306
01:35:35,299 --> 01:35:39,501
happening, we can also say if we can let,

2307
01:35:39,503 --> 01:35:42,337
ppc I'll call it, equal the text view

2308
01:35:42,339 --> 01:35:45,839
controller's popover presentation controller.

2309
01:35:45,841 --> 01:35:48,459
Okay.

2310
01:35:48,460 --> 01:35:51,078
So, this is a method in UI viewcontroller and

2311
01:35:51,080 --> 01:35:53,747
it'll return nil if you're not currently in the process of

2312
01:35:53,749 --> 01:35:56,315
being presented in a popover.

2313
01:35:56,317 --> 01:35:59,285
So if this segue if we changed this segue to

2314
01:35:59,287 --> 01:36:02,021
segue somehow else other than a popover,

2315
01:36:02,023 --> 01:36:05,991
maybe we wanted to go full modal for some reason or

2316
01:36:05,993 --> 01:36:08,693
we decided to push it on a navigation stack or

2317
01:36:08,695 --> 01:36:10,828
whatever then this would return nill and

2318
01:36:10,830 --> 01:36:13,063
so nothing that I'm gonna do right here would even happen.

2319
01:36:14,533 --> 01:36:17,050
So what am I going to do?

2320
01:36:17,051 --> 01:36:19,568
I'm just going to set the popoverPresentationControll-

2321
01:36:19,571 --> 01:36:23,673
er's delegate to myself, and that's because the popover

2322
01:36:23,675 --> 01:36:26,342
controller's delegate allows you to

2323
01:36:26,344 --> 01:36:30,512
have someone else control the way the presentation works.

2324
01:36:30,514 --> 01:36:34,349
And this is the first time you're seeing the [COUGH]

2325
01:36:34,351 --> 01:36:38,385
present the idea of a delegate in an action in an iOS.

2326
01:36:38,387 --> 01:36:40,287
Now you remember when we set ourselves as

2327
01:36:40,289 --> 01:36:42,989
a delegate you can see there's an error right here it says

2328
01:36:42,991 --> 01:36:45,692
DiagnosedHappinessViewContro- ller does not conform to

2329
01:36:45,694 --> 01:36:47,527
this protocol

2330
01:36:47,528 --> 01:36:49,361
UIPopoverPrsentationControlle- rDelegate.

2331
01:36:49,364 --> 01:36:53,632
And that's true, because up here we have to say we are a

2332
01:36:53,634 --> 01:36:55,767
UIPopoverPresentationControll- erDelegate.

2333
01:36:56,736 --> 01:36:58,069
Okay? And now,

2334
01:36:58,071 --> 01:37:02,773
once we put this on here, we have to go down here and

2335
01:37:02,775 --> 01:37:07,443
actually implement that method, the method we want.

2336
01:37:07,445 --> 01:37:09,545
And this method that we want is called

2337
01:37:09,547 --> 01:37:12,981
adaptive presentation style for presentation controller.

2338
01:37:14,051 --> 01:37:17,002
Okay?

2339
01:37:17,003 --> 01:37:19,954
And this is basically saying, here's a popover controller.

2340
01:37:19,956 --> 01:37:22,189
[INAUDIBLE] You know how, in a delegate method, we

2341
01:37:22,191 --> 01:37:24,858
usually pass along the thing that's doing the delegation.

2342
01:37:24,860 --> 01:37:28,128
So this is that same popover presentation controller being

2343
01:37:28,130 --> 01:37:29,796
passed back to us.

2344
01:37:29,798 --> 01:37:34,400
And it's saying, please return a presentation style which you

2345
01:37:34,402 --> 01:37:37,769
want and when you're adapting on the iPhone.

2346
01:37:37,771 --> 01:37:42,173
So I'm gonna return the UI modal presentation style none,

2347
01:37:42,175 --> 01:37:45,443
which means don't adapt, Okay do not when you're on

2348
01:37:45,445 --> 01:37:48,379
iPhone do no adaptations do what you normally do,

2349
01:37:49,314 --> 01:37:50,847
which is put the pop over in a little window.

2350
01:37:52,317 --> 01:37:53,482
And that's it. That's all I

2351
01:37:53,484 --> 01:37:55,317
need to do to suppress that.

2352
01:37:55,319 --> 01:37:57,686
Now, by the way,

2353
01:37:57,687 --> 01:38:00,054
in addition to PPC delegating inside here, I could, there

2354
01:38:00,057 --> 01:38:03,692
are other methods in popover presentation controller.

2355
01:38:03,694 --> 01:38:09,196
You can go take a look at, and they will show you things that

2356
01:38:09,198 --> 01:38:11,865
you can find out about what's going on with the popover.

2357
01:38:11,867 --> 01:38:15,369
But setting its delegates so that you can control that

2358
01:38:15,371 --> 01:38:18,238
adaptation is a popular thing to want to do.

2359
01:38:18,240 --> 01:38:19,305
All right.

2360
01:38:19,307 --> 01:38:20,840
So let's go try it now on the iPhone again.

2361
01:38:20,842 --> 01:38:24,777
Here we go let's hit history and

2362
01:38:24,779 --> 01:38:27,679
now it's working okay coming up in the pop over here.

2363
01:38:27,681 --> 01:38:30,982
Let's go add history let's go another dancing tree over here

2364
01:38:30,984 --> 01:38:33,785
now we've dancing tree added there.

2365
01:38:33,787 --> 01:38:36,154
Okay?

2366
01:38:36,155 --> 01:38:38,522
And it'll work fine landscape or portrait.

2367
01:38:41,593 --> 01:38:41,992
Okay?

2368
01:38:41,993 --> 01:38:42,392
Questions about that?

2369
01:38:43,561 --> 01:38:45,444
All right.

2370
01:38:45,445 --> 01:38:47,328
The last thing I want to do with the pop over is

2371
01:38:47,331 --> 01:38:49,164
when we ran this pop over,

2372
01:38:49,165 --> 01:38:50,998
over here, you notice that it's kind of big.

2373
01:38:51,001 --> 01:38:53,601
It's covering the whole smiley face for no reason,

2374
01:38:53,603 --> 01:38:57,538
because it really only needs to be big enough to hold that.

2375
01:38:57,540 --> 01:39:01,308
Well, that's because really again the popover presentation

2376
01:39:01,310 --> 01:39:04,711
controller really has no idea how big this information is

2377
01:39:04,713 --> 01:39:05,345
in here.

2378
01:39:06,381 --> 01:39:08,247
And, but there is a way to tell it.

2379
01:39:08,249 --> 01:39:10,916
And if you think about who knows what the size of

2380
01:39:10,918 --> 01:39:14,252
this is best, well it's the text view controller.

2381
01:39:14,254 --> 01:39:15,403
Cuz the text view

2382
01:39:15,404 --> 01:39:16,553
controller's the one that's gonna display this.

2383
01:39:16,556 --> 01:39:19,957
It knows what it's preferred size would be.

2384
01:39:19,959 --> 01:39:22,059
So as we're talking about in the slides.

2385
01:39:22,061 --> 01:39:24,094
Let's go ahead and make it so

2386
01:39:24,096 --> 01:39:26,797
the text view controller reports its preferred size.

2387
01:39:26,799 --> 01:39:32,435
So I'm gonna go over here to the text view controller.

2388
01:39:32,437 --> 01:39:34,320
Okay.

2389
01:39:34,321 --> 01:39:36,204
[COUGH] Now the prefered size is just a var in

2390
01:39:36,207 --> 01:39:40,309
UIV controller so the text view controller could set that

2391
01:39:40,311 --> 01:39:44,646
somewhere, it could just say preferred content size equals

2392
01:39:44,648 --> 01:39:48,916
something, but since this is a subclass UIV controller and

2393
01:39:48,918 --> 01:39:54,154
the content size would change every time this is changing.

2394
01:39:54,156 --> 01:39:56,056
And also might change depending on

2395
01:39:56,058 --> 01:39:58,725
how big a space the popover is being popped into.

2396
01:40:00,061 --> 01:40:05,564
We can actually do better here by overriding the var

2397
01:40:05,566 --> 01:40:11,402
preferredContentSize, which is a CGSsize.

2398
01:40:11,404 --> 01:40:15,739
I'm going to override it and do the get set.

2399
01:40:15,741 --> 01:40:18,208
Okay, so it's going to be a computed property,

2400
01:40:18,210 --> 01:40:19,943
get and set.

2401
01:40:19,945 --> 01:40:22,445
And on the setting side of this,

2402
01:40:22,447 --> 01:40:24,447
if someone set the preferred content size,

2403
01:40:24,449 --> 01:40:26,148
I'm just gonna let my super class.

2404
01:40:26,150 --> 01:40:31,486
Preferred content size do its thing, okay?

2405
01:40:31,488 --> 01:40:32,920
We'll just let the new value do that.

2406
01:40:32,922 --> 01:40:35,189
So I'm going to let my super class handle it or

2407
01:40:35,191 --> 01:40:35,889
someone sets it.

2408
01:40:36,925 --> 01:40:39,926
All right?

2409
01:40:39,927 --> 01:40:42,928
But if someone tries to get it, then if my text view has

2410
01:40:42,931 --> 01:40:45,898
been set, so if this outlet has been set, and if I'm in

2411
01:40:45,900 --> 01:40:51,103
the middle of being presented on screen, okay, then I can

2412
01:40:51,105 --> 01:40:54,105
ask the text view what its preferred size would be.

2413
01:40:55,108 --> 01:40:57,541
Okay, so we're going to let the textView do the work here.

2414
01:40:57,543 --> 01:40:58,876
So what does that look like?

2415
01:41:00,512 --> 01:41:02,912
So, we might say,

2416
01:41:02,914 --> 01:41:08,117
for example here, if textView does not equal nil.

2417
01:41:08,119 --> 01:41:12,187
Oops, I've got sticky keys on here, so

2418
01:41:12,189 --> 01:41:14,489
you see that in the lower corner there.

2419
01:41:14,491 --> 01:41:17,658
If textView doesn't equal nil, and if we're

2420
01:41:17,660 --> 01:41:21,128
being presented right now so how can we find that out?

2421
01:41:21,130 --> 01:41:24,531
UIViewController has another great bar

2422
01:41:24,533 --> 01:41:27,767
called presentingViewController.

2423
01:41:28,903 --> 01:41:30,903
The presentingViewController is the view controller that

2424
01:41:30,905 --> 01:41:34,940
is currently presenting you via some sort of segue.

2425
01:41:34,942 --> 01:41:38,610
So, in the popover case, it's going to be that diagnosed

2426
01:41:38,612 --> 01:41:40,845
view controller's gonna be presenting me.

2427
01:41:40,847 --> 01:41:43,614
But whoever it is, I can check to make sure that's not nil.

2428
01:41:44,550 --> 01:41:47,451
So, this is only gonna happen right here,

2429
01:41:47,453 --> 01:41:50,187
in the case where I'm in the middle of a presentation.

2430
01:41:50,189 --> 01:41:52,555
Okay, also my text here not to be no it's not clear that I

2431
01:41:52,557 --> 01:41:55,725
really need to set this because, probably my

2432
01:41:55,727 --> 01:41:58,694
outlets are all gonna be set before this gets there.

2433
01:41:58,696 --> 01:42:02,798
But just to be safe I'll set both of these things and

2434
01:42:02,800 --> 01:42:05,600
in this case I'm gonna let the text view tell me a size that

2435
01:42:05,602 --> 01:42:09,504
fits inside my presenting view controllers.

2436
01:42:09,506 --> 01:42:12,039
Viewbounds.size.

2437
01:42:13,042 --> 01:42:14,307
'Kay?

2438
01:42:14,309 --> 01:42:17,210
And this of course we will need to unwrap.

2439
01:42:17,212 --> 01:42:19,095
But it's okay,

2440
01:42:19,096 --> 01:42:20,979
cuz we checked to make sure it's not nil first.

2441
01:42:20,982 --> 01:42:22,765
'Kay?

2442
01:42:22,766 --> 01:42:24,549
So this is the bounds.size of our presentingViewController.

2443
01:42:24,552 --> 01:42:26,718
So in the diagnosedHappinessViewContro-

2444
01:42:26,720 --> 01:42:29,921
ller case, it's the whole seam, basically.

2445
01:42:29,923 --> 01:42:33,191
And we're just gonna see what is a good size that fits.

2446
01:42:33,193 --> 01:42:35,860
Now this is only a preferred content size.

2447
01:42:35,862 --> 01:42:38,429
So if this size that fits were really huge, for

2448
01:42:38,431 --> 01:42:42,232
example, the popover's still going to limit the size to

2449
01:42:42,234 --> 01:42:44,134
whatever its restrictions are, okay?

2450
01:42:44,136 --> 01:42:46,319
So we just prefer.

2451
01:42:46,320 --> 01:42:48,503
This is not actual content size, it's just preferred.

2452
01:42:48,506 --> 01:42:49,772
Now, what if we're not in

2453
01:42:49,773 --> 01:42:51,039
the middle of presenting right here?

2454
01:42:51,042 --> 01:42:54,610
Well, then once again I'm going to let my

2455
01:42:54,612 --> 01:42:57,946
super class do the work here so whatever it

2456
01:42:57,948 --> 01:43:00,882
would normally return I'm going to have it return.

2457
01:43:00,884 --> 01:43:03,785
So remember I'm overriding this my super class.

2458
01:43:03,787 --> 01:43:05,136
So really I'm just getting involved in

2459
01:43:05,137 --> 01:43:06,486
this one case where I happen to be in the middle of

2460
01:43:06,489 --> 01:43:09,256
presenting something, then I pretty much know what my

2461
01:43:09,258 --> 01:43:12,492
size is based on my text field okay?

2462
01:43:13,495 --> 01:43:16,696
So let's run and see how that fixes it.

2463
01:43:16,698 --> 01:43:19,565
All right, so the goal is to get our history, excellent.

2464
01:43:19,567 --> 01:43:22,434
Now notice also, our history was remembered even

2465
01:43:22,436 --> 01:43:25,670
after we quit our app and run it again because we are using

2466
01:43:25,672 --> 01:43:29,307
defaults which these defaults remember things when it quits.

2467
01:43:29,309 --> 01:43:33,577
So here we got 0, 150, 100, let's go back over here and

2468
01:43:33,579 --> 01:43:34,478
do nothing.

2469
01:43:34,480 --> 01:43:35,612
25.

2470
01:43:35,614 --> 01:43:36,512
Looks good.

2471
01:43:36,514 --> 01:43:39,048
Let's go back and do Golden Bear.

2472
01:43:39,050 --> 01:43:41,784
Zero, so it's working beautifully there.

2473
01:43:41,786 --> 01:43:45,153
Okay, again it works no matter what size you use.

2474
01:43:45,155 --> 01:43:51,526
Go on there and it will also work on the iPad as well.

2475
01:43:51,528 --> 01:43:56,663
There we go.

2476
01:43:56,665 --> 01:43:57,731
So, there's the history.

2477
01:43:57,733 --> 01:43:59,532
Shows it up there.

2478
01:43:59,534 --> 01:44:01,734
There too.

2479
01:44:01,736 --> 01:44:04,937
Okay, so that's it for popovers, but we also managed

2480
01:44:04,939 --> 01:44:08,040
to cover a couple other things there along the way.

2481
01:44:08,042 --> 01:44:11,209
Most notably was the polymorphism of

2482
01:44:11,211 --> 01:44:13,011
view controllers.

2483
01:44:13,947 --> 01:44:16,747
And we were in our storyboard here,

2484
01:44:16,749 --> 01:44:19,450
we ended up actually creating a sub class,

2485
01:44:19,452 --> 01:44:22,586
DiagnosedHappinessViewContro- ller here to add some more

2486
01:44:22,588 --> 01:44:24,487
functionality, okay?

2487
01:44:24,489 --> 01:44:26,622
And that is not an edge case,

2488
01:44:26,624 --> 01:44:27,957
that's a common thing you wanna do.

2489
01:44:27,959 --> 01:44:30,659
You have some reusable happiness view controller or

2490
01:44:30,661 --> 01:44:32,627
something like happiness view controller.

2491
01:44:32,629 --> 01:44:35,663
You wanna use it, but you need to add something to it and

2492
01:44:35,665 --> 01:44:36,464
you don't wanna change it.

2493
01:44:36,466 --> 01:44:37,465
Well, that's exactly what

2494
01:44:37,467 --> 01:44:38,699
object oriented programming is for!

2495
01:44:38,701 --> 01:44:40,801
You can create a subclass of it and

2496
01:44:40,803 --> 01:44:47,607
add the methods that you wanna add to it, to your diagnosed.

2497
01:44:47,609 --> 01:44:49,576
And what's kind of nice too

2498
01:44:49,577 --> 01:44:51,544
is diagnosed view controller contains all the stuff that

2499
01:44:51,546 --> 01:44:55,114
has to do with the diagnostic business and nothing else.

2500
01:44:55,116 --> 01:44:58,850
So this is a very nice class well contained,

2501
01:44:58,852 --> 01:45:01,953
only has the diagnostic stuff in it.

2502
01:45:01,955 --> 01:45:05,056
Okay, so that's it, and you don't need this for

2503
01:45:05,058 --> 01:45:08,492
your homework per se, but there is an extra credit item

2504
01:45:08,494 --> 01:45:12,329
to add a popover so hopefully you'll decide to tackle that.

2505
01:45:14,433 --> 01:45:14,464
>> For more, please visit us at stanford.edu.

